<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ã€ŠiOS è§†è§‰ä¸“é¢˜ã€‹]]></title>
    <url>%2F2019%2F04%2F22%2F%E3%80%8AiOS%20%E8%A7%86%E8%A7%89%E4%B8%93%E9%A2%98%E3%80%8B%2F</url>
    <content type="text"><![CDATA[å‰æƒ…æè¦&emsp; ã€ŠæƒåŠ›çš„æ¸¸æˆã€‹ç¬¬å…«å­£å·²ç»å¼€æ’­äº†ï¼Œä½œä¸ºæœ€å—è§‚ä¼—å–œçˆ±çš„ç¾Žå‰§ä¹‹ä¸€ï¼Œå®ƒå¤§å°ºåº¦çš„ç”»é¢ã€å……æ»¡æ‚¬å¿µçš„å‰§æƒ…æ€»æ˜¯èƒ½è½»æ˜“çš„ä¿˜èŽ·ä½ çš„æ³¨æ„åŠ›ã€‚ &emsp; â€œThere are a thousand Hamlets in a thousand peopleâ€™s eyes.â€ &emsp; è¿½åŒæ ·çš„å‰§ï¼Œä½†æ¯ä¸ªäººè¢«å¸å¼•çš„ç‚¹å´åƒå·®ä¸‡åˆ«ã€‚è£¸éœ²çš„è‚‰ä½“ï¼Œè¡€è…¥çš„æ€æˆ®ï¼Œé’±æƒçš„äº‰å¤ºâ€¦â€¦å®ƒå¸å¼•æˆ‘çš„ï¼Œè¿œä¸æ­¢æ˜¯è¿™äº›ç”»é¢ä¸Žå‰§æƒ…ï¼Œè€Œæ˜¯å®ƒèƒ½å°†äººæ€§çš„é™©æ¶ä¸Žå…‰è¾‰éƒ½åˆ»ç”»çš„æ·‹æ¼“å°½è‡´ã€‚&emsp; è¯¥å‰§ä¸­å……æ»¡äº†è¿èƒŒé“å¾·ä¸Žä¼¦ç†çš„äººè®¾ï¼Œä»–ä»¬æˆ–å‡ºäºŽæœ€åŽŸå§‹çš„æ±‚ç”Ÿæ¬²ï¼Œåšå‡ºä¸æƒœä¸€åˆ‡æ‰‹æ®µä¿å…¨è‡ªæˆ‘çš„é€‰æ‹©ï¼Œæˆ–å‡ºäºŽå¯¹æ­£ä¹‰ä¸Žèª“è¨€çš„åšæŒï¼Œæ— æ‚”çš„å°†è‡ªå·±çš„ç”Ÿå‘½äº¤ç»™åŽ†å²çš„å·¨è½®ç¢¾åŽ‹ã€‚å…³äºŽé‚£äº›é€‰æ‹©çš„å¯¹é”™ä¸Žå¦ï¼Œä¸Žæˆ‘ä»¬è€Œè¨€æ„ä¹‰å¹¶ä¸å¤§ã€‚&emsp; å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éƒ½å·²ç»ä¹ æƒ¯äº†ç”¨â€œæ­£æ´¾â€ä¸Žâ€œåæ´¾â€æ¥åˆ’åˆ†ä»–ä»¬ã€‚å¦‚æžœä½ èƒ½ç»†ç»†å“å‘³ä»–ä»¬çš„äººç”Ÿå¢ƒé‡ï¼Œä»¥åŠæ¯ä¸ªäººåœ¨å„ç§å¢ƒé‡ä¸‹çš„çŠ¶æ€å’Œå¿ƒç†åŽ†ç¨‹ï¼Œå†çœ‹ä»–ä»¬çš„é€‰æ‹©å’Œå¯¹çŽ¯å¢ƒçš„åˆ¤æ–­ï¼Œå¾ˆå¯èƒ½ä¼šæ”¹å˜ä½ å¯¹ä¸€ä¸ªè§’è‰²çš„è®¤çŸ¥ï¼Œä½ å¯¹äººæ€§çš„ç†è§£ä¹Ÿä¼šæ·±åˆ»ä¸å°‘ã€‚äºŽæˆ‘æ¥çœ‹ï¼Œå…¶å®žä»–ä»¬éƒ½æ— ç»å¯¹çš„å¥½ä¸Žåï¼Œè¿™å–å†³äºŽä½ è¯„åˆ¤çš„å‡ºå‘ç‚¹æ˜¯æŸä¸ªå½“äº‹äººï¼Œè¿˜æ˜¯æŸä¸ªå®¶æ—çš„å‘½è¿ï¼Œäº¦æˆ–æ˜¯æŸä¸ªéƒ¨è½çš„å­˜äº¡ï¼Œç”šè‡³æ˜¯å…¨äººç±»çš„å‘å±•â€¦â€¦è¯¦ç»†çš„æ€è¾¨è¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚ &emsp; å’³å’³â€¦æ‰¯è¿œäº†ï¼Œè¨€å½’æ­£ä¼ ï¼Œä»Šå¤©èµ·æ–°å¢žä¸€ä¸ªä¸“é¢˜ï¼šã€ŠiOS è§†è§‰ã€‹ã€‚æ­¤å‰æˆ‘ä»¬ä¸€ç›´åœ¨å›´ç»•ç€ â€œiOS é€†å‘â€è¿™ä¸ªä¸“é¢˜åœ¨å±•å¼€ï¼Œæœ€è¿‘å‡ºäºŽå·¥ä½œ&amp;æœªæ¥çš„éœ€è¦ï¼Œè¦ç€æ‰‹ä»Ž0å­¦ä¹  iOS è§†è§‰ç›¸å…³çš„çŸ¥è¯†äº†ã€‚å½“ç„¶ï¼Œé€†å‘ç›¸å…³çš„æ›´æ–°ä¹Ÿä¼šæŒç»­ã€‚ ç›®å½•ä¸€è§ˆ&emsp; ä¸ºäº†ä½ æœ‰ä¸€ä¸ªç³»ç»Ÿæ¸…æ™°çš„æ•´ä½“æ„Ÿï¼Œä¹Ÿä¸ºæœ‰ä¸€ä¸ªç»Ÿä¸€ä¾¿æ·çš„å…¥å£ï¼Œæˆ‘ä¼šæŒç»­çš„åœ¨æ­¤ç¯‡æ›´æ–°ã€ŠiOS è§†è§‰ã€‹å­¦ä¹ å¿ƒå¾—çš„é“¾æŽ¥è‡³ä»¥ä¸‹ç›®å½•ï¼š ä¸€ï¼šOpenGL æ¦‚è¿° OpenGL æ˜¯ä»€ä¹ˆï¼šæ¥è‡ª LearnOpenGLæ•™ç¨‹ çš„ä¸­æ–‡ç¿»è¯‘ç³»åˆ—ï¼ŒæŽ¨èç»™ä½ ã€‚ â€¦ äºŒï¼šç€è‰²å™¨åŸºç¡€ ç€è‰²å™¨ â€¦ ä¸‰ï¼šâ€¦æ­¤ç›®å½•ä¼šéšç€å­¦ä¹ è¿›åº¦å®žæ—¶æ›´æ–°ï¼ŒæŽ¨èä¸¤æœ¬ä¹¦ï¼šOpenGL ES 3.0ç¼–ç¨‹æŒ‡å—ã€OpenGLç¼–ç¨‹æŒ‡å— æœ‰å§‹æœ‰ç»ˆ&emsp; å¯èƒ½å¾ˆå¤šåŒå­¦çœ‹åˆ° OpenGL ä¼šæœ‰ä¸€ä¸æ‹…å¿§ï¼šè‹¹æžœä¸æ˜¯ä»Ž iOS 12 å¼€å§‹å·²ç»æ­£å¼å¼ƒç”¨ OpenGL äº†å—ï¼ŒçŽ°åœ¨å­¦ OpenGL ä¼šä¸ä¼šæ²¡æœ‰ç›´æŽ¥å­¦è‹¹æžœè‡ªå·±çš„ Metal æ”¶ç›Šé«˜å‘¢ï¼Ÿæˆ‘è§‰å¾—å®Œå…¨æ²¡æœ‰å¿…è¦ã€‚ä¸”åœ¨ã€ŠiOS è§†è§‰ä¸“é¢˜ã€‹çš„å­¦ä¹ è®¡åˆ’ä¸­ï¼Œä¹Ÿä¼šè¦†ç›–åˆ° Metal æ¡†æž¶ï¼Œä½†ä¼šåœ¨ OpenGL çŸ¥è¯†å­¦ä¹ ä¹‹åŽã€‚&emsp; åœ¨å­¦ä¹ æ–°çŸ¥è¯†æ—¶å¹¶ä¸æ˜¯â€œå¼€å¤´éš¾â€ï¼Œéš¾å¾—æ˜¯å¦‚ä½•æŒç»­ã€ç³»ç»Ÿçš„å­¦æˆä¸€é—¨æ–°çŸ¥è¯†ã€‚è¿™ä¹Ÿæ˜¯æˆ‘å†³å®šå¼€è¿™ä¸ªä¸“é¢˜çš„å‡ºå‘ç‚¹ï¼Œä¹Ÿå¸Œæœ›èƒ½å¸®åŠ©æ›´å¤šçš„äººæ›´å¥½çš„æŽŒæ¡è¿™ä¸ªæŠ€èƒ½ã€‚&emsp; å‹æƒ…æç¤ºï¼šè¯¥é¢†åŸŸéœ€è¦æžå¤§çš„ç²¾åŠ›æŠ•å…¥æ‰èƒ½æœ‰äº§å‡ºï¼Œæ‰€ä»¥å¦‚æžœä½ æš‚æ—¶ç”¨ä¸åˆ°ç›¸å…³çŸ¥è¯†ä¸”æ²¡æœ‰é•¿æœŸåšè¿™å—çš„æ‰“ç®—ï¼Œä¸å»ºè®®æµªè´¹æ—¶é—´åœ¨è¿™é‡Œã€‚&emsp; å¦‚æžœä½ ä¹Ÿæœ‰å­¦ä¹ è¿™æ–¹é¢çš„æ‰“ç®—ï¼Œæˆ–è€…å·²ç»åœ¨ç ”ç©¶è¯¥é¢†åŸŸï¼Œæ¬¢è¿ŽåŽç»­å¤šå¤šäº¤æµå­¦ä¹ å¿ƒå¾—~]]></content>
  </entry>
  <entry>
    <title><![CDATA[iOS é€†å‘ä¹‹ Cycript é«˜çº§çŽ©æ³•ï¼ˆéžè¶Šç‹±ï¼‰ & .cyæ–‡ä»¶çš„å°è£…]]></title>
    <url>%2F2019%2F04%2F14%2FiOS%20%E9%80%86%E5%90%91%E4%B9%8B%20Cycript%20%E9%AB%98%E7%BA%A7%E7%8E%A9%E6%B3%95%EF%BC%88%E9%9D%9E%E8%B6%8A%E7%8B%B1%EF%BC%89%20%26%20.cy%E6%96%87%E4%BB%B6%E7%9A%84%E5%B0%81%E8%A3%85%2F</url>
    <content type="text"><![CDATA[What is Cycriptæ‘˜è‡ªå®˜æ–¹æ–‡æ¡£ï¼š&emsp; Cycript is a hybrid of ECMAScript some-6, Objective-C++, and Java. It is implemented as a Cycript-to-JavaScript compiler and uses (unmodified) JavaScriptCore for its virtual machine. It concentrates on providing â€œfluent FFIâ€ with other languages by adopting aspects of their syntax and semantics as opposed to treating the other language as a second-class citizen. &emsp; The primary users of Cycript are currently people who do reverse engineering work on iOS. Cycript features a highly interactive console that features live syntax highlighting and grammar-assisted tab completion, and can even be injected into a running process (similar to a debugger) using Cydia Substrate. This makes it an ideal tool for â€œspelunkingâ€. &emsp; However, Cycript was specifically designed as a programming environment and maintains very little (if any) â€œbaggageâ€ for this use case. Many modules from node.js can be loaded into Cycript, while it also has direct access to libraries written for Objective-C and Java. It thereby works extremely well as a scripting language. ç®€è¨€ä¹‹ï¼š&emsp; Cycript æ˜¯ç”± Cydia åˆ›å§‹äºº Saurik æŽ¨å‡ºçš„ä¸€æ¬¾è„šæœ¬è¯­è¨€ï¼Œå®ƒæ··åˆäº† ECMAScript 6.0ï¼ˆç®€ç§°ES6ï¼Œæ˜¯JavaScript è¯­è¨€çš„ä¸‹ä¸€ä»£æ ‡å‡†ï¼‰ã€Objective-C ++ å’Œ Java çš„è¯­æ³•è§£é‡Šå™¨ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸€ä¸ªå‘½ä»¤ä¸­ä½¿ç”¨ OC æˆ–è€… JavaScriptï¼Œç”šè‡³ä¸¤è€…å¹¶ç”¨ã€‚Cycript ç›®å‰çš„ä¸»è¦ç”¨é€”æ˜¯åœ¨ iOS ä¸Šè¿›è¡Œé€†å‘å·¥ä½œï¼Œä½¿ç”¨ Cydia Substrate å¯ä»¥æ³¨å…¥æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼ˆç±»ä¼¼äºŽè°ƒè¯•å™¨ï¼‰ï¼Œè¿™ä½¿å®ƒæˆä¸ºâ€œæŽ¢é™©â€çš„ç†æƒ³å·¥å…·ã€‚ How to use1. å®‰è£…&emsp; åœ¨è¿™é‡Œä¸‹è½½ SDKåˆ°æœ¬åœ°ï¼Œä¸ºäº†æ–¹ä¾¿æ¯æ¬¡ç›´æŽ¥å¯ä»¥ä½¿ç”¨ï¼Œå»ºè®®å°†å¯æ‰§è¡Œæ–‡ä»¶ cycript çš„è·¯å¾„é…ç½®åˆ°çŽ¯å¢ƒå˜é‡ä¸­ï¼ˆåœ¨ .bash_profile/.zshrc [å–å†³äºŽä½ ç”¨å“ªä¸ªç»ˆç«¯] ä¸­ export ä¸€ä¸‹ï¼‰ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œ cycript å‘½ä»¤ï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œcy# æç¤ºç¬¦è¡¨ç¤ºè¿›å…¥äº† JavaScript æŽ§åˆ¶å°ã€‚ä½ é”®å…¥çš„æ‰€æœ‰å†…å®¹éƒ½å°†ç”± JavaScriptCore è¿è¡Œï¼Œè¿™æ˜¯ Apple å¯¹ Safari ä½¿ç”¨çš„ JavaScript è¯­è¨€çš„å®žçŽ°ã€‚ä¸”åœ¨ä½ é”®å…¥æ—¶ï¼Œä½ çš„å‘½ä»¤å°†ä½¿ç”¨ Cycript çš„è¯æ³•åˆ†æžå™¨è¿›è¡Œè¯­æ³•çªå‡ºæ˜¾ï¼Œå¦‚æžœå‡ºçŽ°è¯­æ³•é”™è¯¯ï¼Œåˆ™ä¼šå‡ºçŽ°æç¤ºã€‚ä½ å¯ä»¥ä½¿ç”¨ ctrl+C å–æ¶ˆé”®å…¥ï¼Œæˆ– ctrl+D é€€å‡ºè¯¥çŽ¯å¢ƒã€‚ 2. ä½¿ç”¨é¢„çƒ­å‡†å¤‡&emsp; å…³äºŽ Cycript çš„ç”¨æ³•ï¼Œè¿™ä¸€ç¯‡åªå›´ç»• iOS é€†å‘å·¥ç¨‹æ¥å±•å¼€è®²è¿°ï¼Œè¿™ä¹Ÿæ˜¯ Cycript ç›®å‰ç”¨çš„æœ€å¹¿çš„é¢†åŸŸã€‚å¯¹æ¯”ä¸Šä¸€ç¯‡æåˆ°çš„ LLDB ï¼ŒCycript çš„äº®ç‚¹åœ¨äºŽå®ƒå¯ä»¥åŠ¨æ€æ³¨å…¥ï¼Œåœ¨è¿è¡Œæ—¶å¯ä»¥éšæ—¶èŽ·å–ã€ä¿®æ”¹ç¨‹åºä¸­å¯¹è±¡çš„å€¼ã€‚è€Œ LLDB ä¸ç®¡æ˜¯åœ¨æ­£å‘å¼€å‘è¿˜æ˜¯é€†å‘å·¥ç¨‹ä¸­ï¼Œå®ƒåªèƒ½è¿›è¡Œæ–­ç‚¹é™æ€è°ƒè¯•åˆ†æžï¼Œæ•ˆçŽ‡ç›¸æ¯” Cycript æœ‰æ˜Žæ˜¾çš„ä¸è¶³ã€‚ &emsp; ç”¨ Cycript å®žçŽ°åŠ¨æ€è°ƒè¯•åº”ç”¨çš„å‰æï¼Œæ˜¯ä½ çš„åº”ç”¨ä¸ºå…¶å¼€å¥½äº†ä¸€ä¸ªå¯è¿žæŽ¥çš„ç«¯å£ï¼Œé‰´äºŽè¶Šç‹±æœºå¹¶ä¸æ˜¯äººäººéƒ½æœ‰ï¼Œæ­¤ç¯‡æˆ‘ä¸»è¦ä¸ºå¤§å®¶ä»‹ç»éžè¶Šç‹±çŽ¯å¢ƒä¸‹å¦‚ä½•ä½¿ç”¨ Cycript è¿›è¡Œè°ƒè¯•ï¼Œè®©å¤§å®¶éƒ½æœ‰å®žæ“çš„æ¡ä»¶ã€‚åœ¨å¼€å§‹ä½¿ç”¨ Cycript ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å‡†å¤‡å¦ä¸€ä¸ªå·¥å…·ã€‚ &emsp; åœ¨è¿‡åŽ»ä¸¤ä¸ªå¤šæœˆçš„ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘å°† iOS çš„åº”ç”¨ç­¾ååŽŸç†ã€è‡ªåŠ¨é‡ç­¾åè„šæœ¬ä»¥åŠä»£ç æ³¨å…¥ç­‰çŸ¥è¯†ä¸²è®²äº†ä¸€éï¼Œå…¶å®žè¿™äº›å·¥ä½œå…¨éƒ½æœ‰å·¥å…·å¸®æˆ‘ä»¬é›†æˆå¥½äº†ï¼Œç›¸ä¿¡ä½ ä¹ŸçŒœåˆ°äº†ï¼Œæ²¡é”™ï¼Œè¿™ä¸ªå·¥å…·å°±æ˜¯ MonkeyDev â€”- åŽŸæœ‰ iOSOpenDev çš„å‡çº§ï¼Œéžè¶Šç‹±æ’ä»¶å¼€å‘é›†æˆç¥žå™¨ï¼å…³äºŽ MonkeyDev çš„å®‰è£… è¿™é‡Œå°±ä¸å±•å¼€èµ˜è¿°äº†ï¼Œå®‰è£…æˆåŠŸåŽï¼Œæ–°å»ºä¸€ä¸ª MonkeyApp é¡¹ç›® ï¼ˆMonkeyDevDemoï¼‰ï¼š æ‰“å¼€ MonkeyDevDemoï¼Œåªéœ€å°†ä½ è¦è°ƒè¯•çš„ ipa/app ï¼ˆè„±å£³è¿˜æ˜¯å¿…è¦çš„ï¼‰ ä¸¢åˆ°æ–°å»ºé¡¹ç›®çš„è¿™ä¸ªç›®å½•ä¸‹ï¼š è¿è¡Œé¡¹ç›®ï¼Œå°±å¯ä»¥å°†åº”ç”¨ç›´æŽ¥è¿è¡Œåˆ°ä½ çš„çœŸæœºä¸Šäº†ï¼š ä¸Šå›¾ä¸­ï¼Œçº¢æ¡†æ ‡æ³¨å‡ºçš„ CYListenServer(6666); æ­£æ˜¯æˆ‘ä»¬å‰é¢æåˆ°çš„ï¼Œç”¨ Cycript å®žçŽ°åŠ¨æ€è°ƒè¯•åº”ç”¨çš„å‰æï¼šä¸€ä¸ªå¯è¿œç¨‹è¿žæŽ¥çš„ç«¯å£å·â€“6666ï¼Œåœ¨æŽ§åˆ¶å°ä¸­åŒæ ·å¯ä»¥æ‰¾åˆ°æ‰“å°æ—¥å¿—ï¼š æˆ‘ç›¸ä¿¡ä½ ä¸€å®šæ³¨æ„åˆ°äº†æ—¥å¿—ä¸­çš„è¿™ä¸€è¡Œï¼š Download cycript(https://cydia.saurik.com/api/latest/3) then run: ./cycript -r 192.168.199.236:6666 &emsp; æ²¡é”™ï¼Œå®ƒå°±æ˜¯åœ¨å‘Šè¯‰ä½ ï¼Œserver ç«¯å£ç»‘å®šæˆåŠŸï¼Œç»ˆç«¯æ‰§è¡Œ ./cycript -r 192.168.199.236:6666 å°±èƒ½è¿žæŽ¥åˆ°è¿è¡Œä¸­çš„åº”ç”¨äº†ã€‚192.168.199.236 æ˜¯æˆ‘å½“å‰æ‰‹æœºçš„ ip åœ°å€ã€‚&emsp; å…¶å®žçŽ°åŽŸç†ï¼Œç®€å•æ¥è®²ï¼Œå°±æ˜¯ hook äº† AppDelegate é‡Œçš„ application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *) æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•é‡Œå¼€å¯ Cycript å¹¶ç»‘å®šåˆ°6666ç«¯å£ã€‚ ç®€å•ä½¿ç”¨åœ¨ä¸Šä¸€ç¯‡ LLDB ä¸­æŽ¨èçš„æ’ä»¶ chisel é‡Œï¼Œå¾ˆå¤šå¥½ç”¨çš„å‘½ä»¤åœ¨ MonkeyDev ä¸­ä¹Ÿéƒ½åšäº†æ”¯æŒï¼š 123456789101112131415NSString* pvc(void);NSString* pviews(void);NSString* pactions(vm_address_t address);NSString* pblock(vm_address_t address);NSString* methods(const char * classname);NSString* ivars(vm_address_t address);NSString* choose(const char* classname);NSString* vmmap(); èµ¶å¿«æ¥è¯•è¯•æ‰‹ï¼šæ‰¾åˆ°æ·˜å®é¦–é¡µåº•éƒ¨ â€œæ·˜â€ æŒ‰é’®å¹¶å°†å…¶éšè—æŽ‰ï¼š æ˜¯ä¸æ˜¯çªç„¶æƒ³æ‹¿å¾®ä¿¡å‘ä¸ª ï¿¥0.01 çš„çº¢åŒ…ï¼Œç„¶åŽç”¨æ–°å­¦çš„è¿™æ‹›æ“ä½œä¸€æ³¢ï¼šemmmmmmâ€¦å‹æƒ…æç¤ºï¼Œç™»å½•ç ´è§£çš„å¾®ä¿¡åº”ç”¨ï¼Œå¤§æ¦‚çŽ‡ä¼šè¢«å¾®ä¿¡å°å·çš„ï¼Œåˆ«é—®æˆ‘æ€Žä¹ˆçŸ¥é“çš„ (&gt;_&lt;) &emsp; è¨€å½’æ­£ä¼ ï¼Œä¸Šé¢åˆ—å‡ºçš„å‡ ä¸ªå‘½ä»¤ï¼ŒåŸºæœ¬å¯ä»¥æ»¡è¶³ä½ å¿«é€Ÿæ‘¸æ¸…ä¸€ä¸ª app å„ä¸ªå¤æ‚é¡µé¢çš„ç»“æž„ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç²¾å‡†çš„å®šä½å¹¶ä¿®æ”¹ç›®æ ‡è§†å›¾çš„UIã€‚æœ‰çš„åŒå­¦å¦‚æžœæ²¡æŽ¥è§¦è¿‡ Cycript ï¼Œå»ºè®®å…ˆçœ‹ä¸€ä¸‹ å®˜æ–¹æ–‡æ¡£ï¼Œç†Ÿæ‚‰ä¸‹æ”¯æŒçš„è¯­æ³•å’Œæ•°æ®ç»“æž„ï¼Œå¤šæ‰¾å‡ ä¸ªå°caseæœ‰ç›®çš„çš„ç»ƒä¹ ï¼Œå¾ˆå¿«å°±èƒ½ä¸Šæ‰‹çŽ©äº†ï¼Œè¿™å¯¹äºŽæƒ³é€šè¿‡å­¦ä¹ å¤§åŽ‚ä¼˜ç§€ app çš„è®¾è®¡ä¸Žå®žçŽ°æ€è·¯çš„åŒå­¦æ¥è¯´ï¼Œæ˜¯ä¸ªä¸å¯é”™è¿‡çš„å¥½é€”å¾„ã€‚ 123Tipsï¼š 1. è¿›å…¥äº† cy# JavaScript æŽ§åˆ¶å°ä¹‹åŽï¼Œç›¸å½“äºŽå¤„åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œå› æ­¤å®šä¹‰çš„å˜é‡åœ¨è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸä¸­ä¸€ç›´å¯ç”¨ã€‚2. #0x10c144d00 ï¼š#+å¯¹è±¡åœ°å€=æ‹¿åˆ°è¯¥å¯¹è±¡ é«˜çº§çŽ©æ³•&emsp; ä¸Ž åŠ å¼ºç‰ˆ LLDB â€”â€” ä¿®æ”¹ .lldbinit æ–‡ä»¶ &amp; æ’ä»¶å®‰è£… ç±»ä¼¼ï¼ŒCycript æ”¯æŒåŠ è½½è‡ªå®šä¹‰è„šæœ¬ï¼Œè¿™æžå¤§çš„æé«˜äº†å®ƒçš„è°ƒè¯•æ•ˆçŽ‡ï¼Œåœ¨å‰é¢ç®€å•ä½¿ç”¨ä¸­åˆ—å‡ºçš„å¯ç”¨å¿«æ·å‘½ä»¤å¯ä¸æ˜¯ Cycript æœ¬æ¥å°±æœ‰çš„ï¼Œè€Œæ˜¯ MonkeyDev çš„ä½œè€…åŠ è½½äº†è‡ªå·±å†™çš„ç½‘ç»œè„šæœ¬æ‰æ”¯æŒçš„ï¼šæˆ‘ä»¬å¯ä»¥æ‰“å¼€è¯¥åœ°å€æŸ¥çœ‹å¯¹åº”çš„.cyæ–‡ä»¶æºç ã€‚ ç„¶åŽå‘¢ï¼Ÿç„¶åŽæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±æžä¸€ä»½è‡ªå·±è°ƒè¯•æ—¶å¸¸ç”¨çš„è„šæœ¬ï¼Œè¿™é‡ŒæŽ¨èä¸€ä¸ªå°ç å“¥å†™çš„ mjcript ã€‚ åŠ è½½.cyè„šæœ¬çš„æ–¹å¼ä¹Ÿä¸ºä½ å‡†å¤‡å¥½äº†ï¼šé€šè¿‡MonkeyDevåŠ è½½ç½‘ç»œæˆ–è€…è‡ªå·±çš„cyè„šæœ¬ã€‚ æ¥æ„Ÿå—ä¸€æ³¢è‡ªå®šä¹‰è„šæœ¬çš„æ•ˆçŽ‡ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225(function(exports) &#123; var invalidParamStr = &apos;Invalid parameter&apos;; var missingParamStr = &apos;Missing parameter&apos;; // app id CJAppId = [NSBundle mainBundle].bundleIdentifier; // mainBundlePath CJAppPath = [NSBundle mainBundle].bundlePath; // document path CJDocPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0]; // caches path CJCachesPath = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES)[0]; // åŠ è½½ç³»ç»ŸåŠ¨æ€åº“ CJLoadFramework = function(name) &#123; var head = &quot;/System/Library/&quot;; var foot = &quot;Frameworks/&quot; + name + &quot;.framework&quot;; var bundle = [NSBundle bundleWithPath:head + foot] || [NSBundle bundleWithPath:head + &quot;Private&quot; + foot]; [bundle load]; return bundle; &#125;; // keyWindow CJKeyWin = function() &#123; return UIApp.keyWindow; &#125;; // æ ¹æŽ§åˆ¶å™¨ CJRootVc = function() &#123; return UIApp.keyWindow.rootViewController; &#125;; // æ‰¾åˆ°æ˜¾ç¤ºåœ¨æœ€å‰é¢çš„æŽ§åˆ¶å™¨ var _CJFrontVc = function(vc) &#123; if (vc.presentedViewController) &#123; return _CJFrontVc(vc.presentedViewController); &#125;else if ([vc isKindOfClass:[UITabBarController class]]) &#123; return _CJFrontVc(vc.selectedViewController); &#125; else if ([vc isKindOfClass:[UINavigationController class]]) &#123; return _CJFrontVc(vc.visibleViewController); &#125; else &#123; var count = vc.childViewControllers.count; for (var i = count - 1; i &gt;= 0; i--) &#123; var childVc = vc.childViewControllers[i]; if (childVc &amp;&amp; childVc.view.window) &#123; vc = _CJFrontVc(childVc); break; &#125; &#125; return vc; &#125; &#125;; CJFrontVc = function() &#123; return _CJFrontVc(UIApp.keyWindow.rootViewController); &#125;; // é€’å½’æ‰“å°UIViewController viewçš„å±‚çº§ç»“æž„ CJVcSubviews = function(vc) &#123; if (![vc isKindOfClass:[UIViewController class]]) throw new Error(invalidParamStr); return vc.view.recursiveDescription().toString(); &#125;; // é€’å½’æ‰“å°æœ€ä¸Šå±‚UIViewController viewçš„å±‚çº§ç»“æž„ CJFrontVcSubViews = function() &#123; return CJVcSubviews(_CJFrontVc(UIApp.keyWindow.rootViewController)); &#125;; // èŽ·å–æŒ‰é’®ç»‘å®šçš„æ‰€æœ‰TouchUpInsideäº‹ä»¶çš„æ–¹æ³•å CJBtnTouchUpEvent = function(btn) &#123; var events = []; var allTargets = btn.allTargets().allObjects() var count = allTargets.count; for (var i = count - 1; i &gt;= 0; i--) &#123; if (btn != allTargets[i]) &#123; var e = [btn actionsForTarget:allTargets[i] forControlEvent:UIControlEventTouchUpInside]; events.push(e); &#125; &#125; return events; &#125;; // CGå‡½æ•° CJPointMake = function(x, y) &#123; return &#123;0 : x, 1 : y&#125;; &#125;; CJSizeMake = function(w, h) &#123; return &#123;0 : w, 1 : h&#125;; &#125;; CJRectMake = function(x, y, w, h) &#123; return &#123;0 : CJPointMake(x, y), 1 : CJSizeMake(w, h)&#125;; &#125;; // é€’å½’æ‰“å°controllerçš„å±‚çº§ç»“æž„ CJChildVcs = function(vc) &#123; if (![vc isKindOfClass:[UIViewController class]]) throw new Error(invalidParamStr); return [vc _printHierarchy].toString(); &#125;; // é€’å½’æ‰“å°viewçš„å±‚çº§ç»“æž„ CJSubviews = function(view) &#123; if (![view isKindOfClass:[UIView class]]) throw new Error(invalidParamStr); return view.recursiveDescription().toString(); &#125;; // åˆ¤æ–­æ˜¯å¦ä¸ºå­—ç¬¦ä¸² &quot;str&quot; @&quot;str&quot; CJIsString = function(str) &#123; return typeof str == &apos;string&apos; || str instanceof String; &#125;; // åˆ¤æ–­æ˜¯å¦ä¸ºæ•°ç»„ []ã€@[] CJIsArray = function(arr) &#123; return arr instanceof Array; &#125;; // åˆ¤æ–­numæ˜¯å¦ä¸ºæ•°å­— CJIsNumber = function(num) &#123; return typeof num == &apos;number&apos; || num instanceof Number; &#125;; var _CJClass = function(className) &#123; if (!className) throw new Error(missingParamStr); if (CJIsString(className)) &#123; return NSClassFromString(className); &#125; if (!className) throw new Error(invalidParamStr); // å¯¹è±¡æˆ–è€…ç±» return className.class(); &#125;; // æ‰“å°æ‰€æœ‰çš„å­ç±» CJSubclasses = function(className, reg) &#123; className = _CJClass(className); return [c for each (c in ObjectiveC.classes) if (c != className &amp;&amp; class_getSuperclass(c) &amp;&amp; [c isSubclassOfClass:className] &amp;&amp; (!reg || reg.test(c))) ]; &#125;; // æ‰“å°æ‰€æœ‰çš„æ–¹æ³• var _CJGetMethods = function(className, reg, clazz) &#123; className = _CJClass(className); var count = new new Type(&apos;I&apos;); var classObj = clazz ? className.constructor : className; var methodList = class_copyMethodList(classObj, count); var methodsArray = []; var methodNamesArray = []; for(var i = 0; i &lt; *count; i++) &#123; var method = methodList[i]; var selector = method_getName(method); var name = sel_getName(selector); if (reg &amp;&amp; !reg.test(name)) continue; methodsArray.push(&#123; selector : selector, type : method_getTypeEncoding(method) &#125;); methodNamesArray.push(name); &#125; free(methodList); return [methodsArray, methodNamesArray]; &#125;; var _CJMethods = function(className, reg, clazz) &#123; return _CJGetMethods(className, reg, clazz)[0]; &#125;; // æ‰“å°æ‰€æœ‰çš„æ–¹æ³•åå­— var _CJMethodNames = function(className, reg, clazz) &#123; return _CJGetMethods(className, reg, clazz)[1]; &#125;; // æ‰“å°æ‰€æœ‰çš„å¯¹è±¡æ–¹æ³• CJInstanceMethods = function(className, reg) &#123; return _CJMethods(className, reg); &#125;; // æ‰“å°æ‰€æœ‰çš„å¯¹è±¡æ–¹æ³•åå­— CJInstanceMethodNames = function(className, reg) &#123; return _CJMethodNames(className, reg); &#125;; // æ‰“å°æ‰€æœ‰çš„ç±»æ–¹æ³• CJClassMethods = function(className, reg) &#123; return _CJMethods(className, reg, true); &#125;; // æ‰“å°æ‰€æœ‰çš„ç±»æ–¹æ³•åå­— CJClassMethodNames = function(className, reg) &#123; return _CJMethodNames(className, reg, true); &#125;; // æ‰“å°æ‰€æœ‰çš„æˆå‘˜å˜é‡ CJIvars = function(obj, reg)&#123; if (!obj) throw new Error(missingParamStr); var x = &#123;&#125;; for(var i in *obj) &#123; try &#123; var value = (*obj)[i]; if (reg &amp;&amp; !reg.test(i) &amp;&amp; !reg.test(value)) continue; x[i] = value; &#125; catch(e)&#123;&#125; &#125; return x; &#125;; // æ‰“å°æ‰€æœ‰çš„æˆå‘˜å˜é‡åå­— CJIvarNames = function(obj, reg) &#123; if (!obj) throw new Error(missingParamStr); var array = []; for(var name in *obj) &#123; if (reg &amp;&amp; !reg.test(name)) continue; array.push(name); &#125; return array; &#125;;&#125;)(exports); åªè¦ä½ æƒ³ï¼Œåªè¦ä½ èƒ½ï¼Œæ›´å¤šå§¿åŠ¿ï¼Œç­‰ä½ è§£é”ã€‚ summary&emsp; æ— ä½¿ç”¨åœºæ™¯çš„å­¦ä¹ å¤šåŠéƒ½æ˜¯åœ¨æµªè´¹æ—¶é—´ï¼Œä¸ç»å¸¸ä½¿ç”¨çš„çŸ¥è¯†ä¹Ÿæ— æ³•äº§ç”Ÿä»·å€¼ã€‚Cycript ä¹Ÿä¸ä¾‹å¤–ï¼Œå¦‚æžœä»…ä»…æ˜¯å‡ºäºŽå¥½å¥‡ï¼ŒèŠ±äº†ä¸¤ä¸ªå°æ—¶çŽ©äº†ä¸€ä¸‹ä¸‹ï¼Œç„¶åŽä»Žæ­¤åˆ«è¿‡ï¼Œå…¶å®žæ„ä¹‰çœŸçš„ä¸å¤§ã€‚æœ‰äº›åŒå­¦è§‰å¾—å¹¿æ³›æ¶‰çŒŽï¼Œåœ¨é¢è¯•çš„æ—¶å€™å¯ä»¥å¤¸å¤¸å…¶è°ˆï¼Œèƒ½å¢žåŠ ä¸€ç‚¹â€œå¤§ä½¬â€æ„Ÿï¼Œæˆ‘ä¸ªäººæ˜¯ä¸è®¤åŒçš„ï¼Œç¨å¾®æ·±å…¥ä¸€ç‚¹çš„é—®é¢˜ä½ å°±è¯´ä¸ä¸Šæ¥æˆ–è€…å¹²è„†ä¸æ‡‚è£…æ‡‚åè€Œä¼šé€‚å¾—å…¶åã€‚æ‰€ä»¥ä¸ªäººè¿˜æ˜¯å»ºè®®ï¼Œæ—¢ç„¶å­¦äº†ä¸€ä¸ªä¸œè¥¿ï¼Œå°±å°½åŠ›å­¦çš„æ·±å…¥ä¸€ç‚¹ï¼Œå¹¶åœ¨å·¥ä½œä¸­ä¸æ–­æ€è€ƒï¼Œå¦‚ä½•åˆ©ç”¨å·²å­¦çŸ¥è¯†åŽ»æé«˜æ•ˆçŽ‡ã€‚Cycript é™¤äº†åœ¨é€†å‘å·¥ç¨‹ä¸­ï¼Œ åœ¨æ­£å‘å¼€å‘å’Œæ—¥å¸¸å­¦ä¹ ä¸­ï¼Œä¾ç„¶éžå¸¸å¥½ç”¨ã€‚ æ„¿ä½ æœ‰æ‰€æ”¶èŽ·~]]></content>
  </entry>
  <entry>
    <title><![CDATA[LLDB çŸ¥å¤šå°‘]]></title>
    <url>%2F2019%2F03%2F23%2FLLDB%20%E7%9F%A5%E5%A4%9A%E5%B0%91%2F</url>
    <content type="text"><![CDATA[é‡è¯† LLDBLLDB æ˜¯ä»€ä¹ˆï¼Ÿ&emsp;â€œå¦‚æžœè°ƒè¯•æ˜¯åˆ é™¤ bug çš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆç¼–ç¨‹å°±æ˜¯å¼•å…¥ bug çš„è¿‡ç¨‹ã€‚â€ï¼ˆEdsger W. Dijkstraï¼‰ &emsp;å¯¹äºŽè‹¹æžœå¼€å‘è€…è€Œè¨€ï¼ŒLLDB æ˜¯æ— äººä¸çŸ¥çš„è°ƒè¯•å·¥å…·ï¼Œç„¶è€Œæ­¤çŸ¥éžå½¼çŸ¥ï¼Œç›¸ä¿¡æœ‰ç›¸å½“è§„æ¨¡çš„å¼€å‘è€…å¯¹ LLDB çš„äº†è§£ä»ç„¶åœç•™äºŽå‡ ä¸ªåŸºç¡€å‘½ä»¤çš„ä½¿ç”¨ï¼Œä»Šå¤©è®©æˆ‘ä»¬æ¥é‡æ–°è®¤è¯†ä¸€ä¸‹æ—¢ç†Ÿæ‚‰åˆé™Œç”Ÿçš„ LLDBï¼Œçœ‹çœ‹å®ƒé‚£äº›ä½ ä¸æ›¾ç”¨è¿‡çš„å¼ºå¤§åŠŸèƒ½ï¼Œä»¥åŠå¦‚ä½•æé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆçŽ‡ã€‚ &emsp;å¼€å§‹æŠŠçŽ©å…¶åŠŸèƒ½ä¹‹å‰ï¼Œå…ˆæžæ¸…æ¥š LLDB æ˜¯ä»€ä¹ˆï¼Œç®€è¨€ä¹‹ï¼ŒLLDB æ˜¯ä¸€ä¸ªæœ‰ç€ REPL çš„ç‰¹æ€§å’Œ C++ ã€Python æ’ä»¶çš„å¼€æºè°ƒè¯•å™¨ã€‚ &emsp;LLDB is a next generation, high-performance debugger. It is built as a set of reusable components which highly leverage existing libraries in the larger LLVM Project, such as the Clang expression parser and LLVM disassembler.&emsp;LLDB is the default debugger in Xcode on Mac OS X and supports debugging C, Objective-C and C++ on the desktop and iOS devices and simulator. &emsp;ä»¥ä¸Šæ‘˜è‡ªå®˜æ–¹æ–‡æ¡£ä¸­çš„ä¸€æ®µç®€çŸ­çš„ä»‹ç»ï¼Œæ›´å¤šç›¸å…³ä¿¡æ¯è¯·å‚é˜… LLDB å®˜æ–¹æ–‡æ¡£ã€‚ LLDB å‘½ä»¤ç»“æž„&emsp;çŸ¥é“äº† LLDB æ˜¯ä»€ä¹ˆï¼Œè¿˜è¦äº†è§£å…¶å‘½ä»¤ç»“æž„åŠè¯­æ³•ï¼Œè¿™æ ·æ‰èƒ½å‘Šåˆ«æ­»è®°å‘½ä»¤ï¼Œå¼€å¯åŽ‹æ¦¨ LLDB ä¹‹è·¯äº†ã€‚LLDB é€šç”¨ç»“æž„çš„å½¢å¼å¦‚ä¸‹ï¼š &lt;command&gt; [&lt;subcommand&gt; [&lt;subcommand&gt;...]] &lt;action&gt; [-options [option-value]] [argument [argument...]] å…¶ä¸­ï¼š commandã€subcommandï¼šLLDBè°ƒè¯•å‘½ä»¤çš„åç§°ã€‚å‘½ä»¤å’Œå­å‘½ä»¤æŒ‰å±‚çº§ç»“æž„æ¥æŽ’åˆ—ï¼šä¸€ä¸ªå‘½ä»¤å¯¹è±¡ä¸ºè·Ÿéšå…¶çš„å­å‘½ä»¤å¯¹è±¡åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œå­å‘½ä»¤åˆä¸ºå…¶å­å‘½ä»¤åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œä¾æ­¤ç±»æŽ¨ã€‚ actionï¼šå‘½ä»¤æ“ä½œï¼Œæƒ³åœ¨å‰é¢çš„å‘½ä»¤åºåˆ—çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œçš„ä¸€äº›æ“ä½œã€‚ optionsï¼šå‘½ä»¤é€‰é¡¹ï¼Œè¡Œä¸ºä¿®æ”¹å™¨(action modifiers)ã€‚é€šå¸¸å¸¦æœ‰ä¸€äº›å€¼ã€‚ argumentï¼šå‘½ä»¤å‚æ•°ï¼Œæ ¹æ®ä½¿ç”¨çš„å‘½ä»¤çš„ä¸Šä¸‹æ–‡æ¥è¡¨ç¤ºå„ç§ä¸åŒçš„ä¸œè¥¿ã€‚ []ï¼šè¡¨ç¤ºå‘½ä»¤æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥æœ‰ä¹Ÿå¯ä»¥æ²¡æœ‰ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š å‘½ä»¤ï¼šbreakpoint set -n main å¯¹åº”åˆ°ä¸Šé¢çš„è¯­æ³•å°±æ˜¯ï¼š commandï¼šbreakpoint æ–­ç‚¹å‘½ä»¤ actionï¼šset è®¾ç½®æ–­ç‚¹ optionï¼š-n è¡¨æ ¹æ®æ–¹æ³• name è®¾ç½®æ–­ç‚¹ arguementï¼šmian è¡¨ç¤ºæ–¹æ³•åä¸º mian å…³äºŽåŽŸå§‹å‘½ä»¤ï¼š &emsp;LLDBæ”¯æŒä¸å¸¦å‘½ä»¤é€‰é¡¹çš„åŽŸå§‹å‘½ä»¤ï¼ŒåŽŸå§‹å‘½ä»¤ä¼šå°†å‘½ä»¤åŽé¢çš„æ‰€æœ‰ä¸œè¥¿å½“åšå‚æ•°(arguement)å¤„ç†ã€‚ä½†å¾ˆå¤šåŽŸå§‹å‘½ä»¤ä¹Ÿå¯ä»¥å¸¦å‘½ä»¤é€‰é¡¹ï¼Œå½“ä½ ä½¿ç”¨å‘½ä»¤é€‰é¡¹çš„æ—¶å€™ï¼Œéœ€è¦åœ¨å‘½ä»¤é€‰é¡¹åŽé¢åŠ  -- åŒºåˆ†å‘½ä»¤é€‰é¡¹å’Œå‚æ•°ã€‚&emsp;å¦‚ï¼šexpression ï¼ˆå°±æ˜¯ p/print/callï¼‰ã€expression -oï¼ˆå°±æ˜¯ poï¼‰ï¼Œæ‰“å°ä¸€ä¸ªUIViewå¯¹è±¡åœ°å€ï¼š&emsp;å‰è€…æ˜¯è®¡ç®—å…¶åœ°å€çš„å€¼ï¼ŒåŽè€…è°ƒç”¨äº†å¯¹è±¡çš„ description æ–¹æ³•ï¼Œå…¶ä¸­ä½“çŽ°äº†å”¯ä¸€åŒ¹é…åŽŸåˆ™ï¼šå‡å¦‚æ ¹æ®å‰nä¸ªå­—æ¯å·²ç»èƒ½å”¯ä¸€åŒ¹é…åˆ°æŸä¸ªå‘½ä»¤ï¼Œåˆ™åªå†™å‰nä¸ªå­—æ¯ç­‰æ•ˆäºŽå†™ä¸‹å®Œæ•´çš„å‘½ä»¤ã€‚å†ç”¨è®¾ç½®æ–­ç‚¹çš„å‘½ä»¤ä¸¾ä¾‹ï¼Œä¸‹é¢ä¸¤æ¡å‘½ä»¤ç­‰æ•ˆï¼š&emsp;æ›´å¤šå‘½ä»¤ç»“æž„çš„ä»‹ç»åŠç”¨æ³•ï¼Œè¯·å‚è€ƒ LLDB å…¥é—¨ã€‚æŽ¥ä¸‹æ¥ä»‹ç»ç‚¹ LLDB æœ€å®žç”¨åˆæœ€å®¹æ˜“è¢«å¿½ç•¥çš„ç”¨æ³•ã€‚ LLDB å¸¸ç”¨å‘½ä»¤æ€»ç»“è¾…åŠ©è®°å¿†ï¼šapropos&emsp;å½“æˆ‘ä»¬å¹¶ä¸èƒ½å®Œå…¨è®°å¾—æŸä¸ªå‘½ä»¤çš„æ—¶å€™ï¼Œä½¿ç”¨ apropos é€šè¿‡å‘½ä»¤ä¸­çš„æŸä¸ªå…³é”®å­—å°±å¯ä»¥æ‰¾åˆ°æ‰€æœ‰ç›¸å…³çš„å‘½ä»¤ä¿¡æ¯ã€‚æ¯”å¦‚: æˆ‘ä»¬æƒ³ä½¿ç”¨stop-hookçš„å‘½ä»¤ï¼Œä½†æ˜¯å·²ç»ä¸è®°å¾—stop-hookå‘½ä»¤æ˜¯å•¥æ ·äº†ï¼šå®žåœ¨è®°ä¸èµ·æ¥ä¹Ÿä¸è¦æ…Œï¼Œè¿™é‡Œæœ‰ å‘½ä»¤listã€‚ ä¸€.æ–­ç‚¹è®¾ç½®&emsp;å…³äºŽæ–­ç‚¹è®¾ç½®ï¼Œå¤šæ•°äººéƒ½ä¹ æƒ¯ç”¨å›¾å½¢ç•Œé¢åŽ»åšï¼Œä½†åœ¨è°ƒè¯•ä¸­æœ‰äº›åœºæ™¯ä»…ä»…é å›¾å½¢ç•Œé¢è¿˜æ˜¯ä¸å¤Ÿçš„ï¼Œæ¯”å¦‚ï¼šå¦‚ä½•é€šè¿‡æ–­ç‚¹å®žçŽ°ç±»ä¼¼ KVO é‚£æ ·å¯¹æˆå‘˜å˜é‡å˜åŒ–çš„ç›‘å¬å‘¢ï¼Ÿï¼ˆåˆ«è·Ÿæˆ‘è¯´ä½ è¦åŠ ä»£ç é‡å†™setæ–¹æ³•â€¦å³ä½¿è¿™æ ·ä¹Ÿä¸é è°±ï¼‰ã€‚ä¸‹é¢ä¸€ä¸€ç½—åˆ—é‚£äº›å¥½ç”¨çš„æ–­ç‚¹å‘½ä»¤ï¼š breakpoint listï¼šæŸ¥çœ‹æ‰€æœ‰æ–­ç‚¹åˆ—è¡¨ breakpoint deleteï¼šåˆ é™¤æ‰€æœ‰æ–­ç‚¹ï¼ˆå¯è·Ÿç»„å·åˆ é™¤æŒ‡å®šç»„ï¼‰ breakpoint disable/enableï¼šç¦ç”¨ å¯ç”¨æŒ‡å®šæ–­ç‚¹ breakpoint set -r someï¼šéåŽ†æ•´ä¸ªé¡¹ç›®ä¸­åŒ…å« some è¿™ä¸ªå­—ç¬¦çš„æ‰€æœ‰æ–¹æ³•å¹¶è®¾ç½®æ–­ç‚¹ breakpoint æ”¯æŒæŒ‰æ–‡ä»¶åã€å‡½æ•°åã€è¡Œæ•°ã€æ­£åˆ™ç­‰å„ç§æ¡ä»¶ç­›é€‰è®¾ç½®æ–­ç‚¹ï¼Œè¯·ç»“åˆè¯­æ³•å¹¶å‚è€ƒå®˜æ–¹æ–‡æ¡£ watchpoint set expression 0x10cc64d50ï¼šåœ¨å†…å­˜ä¸­ä¸ºåœ°å€ä¸º0x10cc64d50çš„å¯¹è±¡è®¾ç½®å†…å­˜æ–­ç‚¹ watchpoint set variable xxooï¼šä¸ºå½“å‰å¯¹è±¡çš„å˜é‡ xxoo è®¾ç½®å†…å­˜æ–­ç‚¹ target stop-hook add -o â€œframe variableâ€ï¼šæ·»åŠ æ¯æ¬¡ç¨‹åº stop æ—¶éƒ½å¸Œæœ›æ‰§è¡Œçš„å‘½ä»¤ï¼šframe variableï¼ˆæ‰“å°å½“å‰æ ˆå†…çš„æ‰€æœ‰å˜é‡ï¼‰ target stop-hookã€watchpoint çš„å¢žåˆ æ”¹æŸ¥å‘½ä»¤ä¸Ž breakpoint çš„åŸºæœ¬ç›¸åŒ æ›´å¤šå˜æ€æ–­ç‚¹çŽ©æ³•éœ€è‡ªå®šä¹‰æ’ä»¶æ”¯æŒï¼Œè¿«ä¸åŠå¾…çš„ä½ è¯·å¿«è¿›æ­¤æ–‡ ã€‹ã€‹ã€‹ äºŒ.æµç¨‹æŽ§åˆ¶è¿™ä¸¤å¹…å›¾ä½ ä¸€å®šä¸é™Œç”Ÿï¼š å›¾ä¸€ å›¾äºŒ ç¬¬ä¸€ä¸ªæŒ‰é’®ï¼šcontinue/c ç»§ç»­æ‰§è¡Œ ç¬¬äºŒä¸ªæŒ‰é’®ï¼š å›¾ä¸€ï¼š thread step-over/next/n å½“å‰çº¿ç¨‹ä¸‹ä¸€æ­¥ï¼ˆä»¥ä¸€ä¸ªå®Œæ•´å­å‡½æ•°ä¸ºä¸€æ­¥ï¼‰ å›¾äºŒï¼š thread step-inst-over/ni å½“å‰çº¿ç¨‹ä¸‹ä¸€æ­¥ï¼ˆä»¥ä¸€ä¸ªæ±‡ç¼–å‡½æ•°ä¸ºä¸€æ­¥ï¼‰ ç¬¬ä¸‰ä¸ªæŒ‰é’®ï¼š å›¾ä¸€ï¼š thread step-in/step/s å½“å‰çº¿ç¨‹ä¸‹ä¸€æ­¥ï¼ˆé‡åˆ°å­å‡½æ•°å°±è¿›å…¥å¹¶ä¸”ç»§ç»­å•æ­¥æ‰§è¡Œï¼‰ å›¾äºŒï¼š thread step-inst-over/si å½“å‰çº¿ç¨‹ä¸‹ä¸€æ­¥ï¼ˆé‡åˆ°æ±‡ç¼–å‡½æ•°å°±è¿›å…¥å¹¶ä¸”ç»§ç»­å•æ­¥æ‰§è¡Œæ±‡ç¼–æŒ‡ä»¤ï¼‰ ç¬¬å››ä¸ªæŒ‰é’®ï¼šthread step-out/finish é€€å‡ºå½“å‰å¸§æ ˆ å…¶ä»–å‘½ä»¤ï¼š thread returnï¼šå®ƒæœ‰ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œåœ¨æ‰§è¡Œæ—¶å®ƒä¼šæŠŠå¯é€‰å‚æ•°åŠ è½½è¿›è¿”å›žå¯„å­˜å™¨é‡Œï¼Œç„¶åŽç«‹åˆ»æ‰§è¡Œè¿”å›žå‘½ä»¤ï¼Œè·³å‡ºå½“å‰æ ˆå¸§ã€‚è¿™æ„å‘³è¿™å‡½æ•°å‰©ä½™çš„éƒ¨åˆ†ä¸ä¼šè¢«æ‰§è¡Œã€‚è¿™ä¼šç»™ ARC çš„å¼•ç”¨è®¡æ•°é€ æˆä¸€äº›é—®é¢˜ï¼Œæˆ–è€…ä¼šä½¿å‡½æ•°å†…çš„æ¸…ç†éƒ¨åˆ†å¤±æ•ˆã€‚ä½†æ˜¯åœ¨å‡½æ•°çš„å¼€å¤´æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œæ˜¯ä¸ªéžå¸¸å¥½çš„éš”ç¦»æ¬¡å‡½æ•°ã€ä¼ªé€ è¿”å›žå€¼çš„æ–¹å¼ã€‚ ä¸‰.å¯æ‰§è¡Œæ–‡ä»¶&amp;å…±äº«åº“æŸ¥è¯¢å‘½ä»¤è¿™äº›å‘½ä»¤åœ¨é€†å‘åŠå®šä½é”™è¯¯æ—¶ä½¿ç”¨é¢‘çŽ‡éžå¸¸é«˜ã€‚ image listï¼šåˆ—å‡ºä¸»è¦çš„å¯æ‰§è¡Œæ–‡ä»¶å’Œæ‰€æœ‰ä¾èµ–çš„å…±äº«åº“ã€‚ image lookup â€“address 0x1ec4ï¼šåœ¨å¯æ‰§è¡Œæ–‡ä»¶æˆ–ä»»ä½•å…±äº«åº“ä¸­æŸ¥æ‰¾åŽŸå§‹åœ°å€ä¿¡æ¯ã€‚ image lookup -v â€“address 0x1ec4ï¼šæŸ¥æ‰¾å®Œæ•´çš„æºä»£ç è¡Œä¿¡æ¯ã€‚ image lookup â€“type NSStringï¼šæ ¹æ®åç§°æŸ¥æ‰¾å¯¹åº”ï¼ˆNSStringï¼‰ç±»åž‹çš„ä¿¡æ¯ã€‚ å››.å…¶ä»–å¸¸ç”¨å‘½ä»¤æ¨¡æ¿ register readï¼šæ˜¾ç¤ºå½“å‰çº¿ç¨‹çš„é€šç”¨å¯„å­˜å™¨ã€‚ register write rax 123ï¼šå°†ä¸€ä¸ªæ–°çš„åè¿›åˆ¶å€¼â€œ123â€å†™å…¥å½“å‰çº¿ç¨‹å¯„å­˜å™¨â€œraxâ€ã€‚ memory read â€“size 4 â€“format x â€“count 4 0xbffff3c0ï¼šä»Žåœ°å€0xbffff3c0è¯»å–å†…å­˜ï¼Œå¹¶æ˜¾ç¤º4ä¸ªåå…­è¿›åˆ¶uint32_tå€¼ã€‚ åŠ å¼ºç‰ˆ LLDB â€”â€” ä¿®æ”¹ .lldbinit æ–‡ä»¶ &amp; æ’ä»¶å®‰è£…&emsp;å‰é¢æ‰€åˆ—çš„å‘½ä»¤åœ¨ è¿™é‡Œ éƒ½èƒ½æ‰¾åˆ°å®˜æ–¹è¯´æ˜Žï¼Œæ›´å¤šå‘½ä»¤ç”¨æ³•æœ‰å…´è¶£çš„å»ºè®®è‡ªå·±åŽ»ç»†ç»†æŽ¢ç´¢ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬å°†ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œç”¨é«˜æ‰‹ä»¬ä¸“é—¨ä¸º LLDB å†™çš„æ’ä»¶åŽ»æ·±å…¥æŒ–æŽ˜å®ƒçš„æ½œåŠ›ã€‚ æŽ¨èæ’ä»¶ä¸€ï¼š facebook å¼€æºçš„ LLDB æ’ä»¶ chisel brew install chisel çš„å®‰è£…è¿‡ç¨‹è¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼Œå®‰è£…æˆåŠŸåŽï¼Œåœ¨~/ç›®å½•ä¸‹çš„ .lldbinit æ–‡ä»¶ä¸­å¼•å…¥å¯¹åº”æ–‡ä»¶è·¯å¾„ï¼Œå¢žåŠ ä¸€è¡Œï¼šcommand script import /usr/local/opt/chisel/libexec/fblldb.py åŽä¿å­˜ï¼Œ é‡å¯ Xcodeå³å¯ä½¿ç”¨ã€‚å®ƒæä¾›çš„å¿«æ· å‘½ä»¤æ¸…å•åŠè¯´æ˜Ž è¿™é‡Œä¹Ÿä¸èµ˜è¿°äº†ã€‚æˆªä¸ªå›¾æ„Ÿå—ä¸‹å®ƒçš„å¼ºå¤§å§ï¼š æŽ¨èæ’ä»¶äºŒï¼šDerekSelander/LLDB è¯¥æ’ä»¶ä¸Ž chisel éƒ½æ˜¯ç”¨ Python å†™çš„ï¼Œå…¶å®‰è£…éœ€è¦æ‰‹åŠ¨ä¸‹è½½ä»“åº“ï¼Œç„¶åŽå°†ä»“åº“ä¸­ dslldb.py æ–‡ä»¶çš„è·¯å¾„ç”¨ä¸Žä¸Šè¿°åŒæ ·çš„æ–¹å¼æ·»åŠ åˆ° .lldbinit ä¸­ï¼Œå…·ä½“ç”¨æ³•ä¹Ÿå¾ˆç®€å•ç²—æš´ï¼Œå°±ä¸åœ¨è¿™ç²˜è´´äº†ï¼Œè¯·è‡³ README é¢†ç•¥ã€‚ æ€»ç»“ï¼š&emsp;çœ‹åˆ°è¿™ï¼Œä½ æ”¶èŽ·çš„åªæœ‰æš‚æ—¶è®°å¿†ï¼Œå…¶å®žç­‰äºŽæ¯«æ— æ‰€èŽ·â€¦è€Œä¸”è¿˜æµªè´¹äº†å®è´µçš„å‡ åˆ†é’Ÿï¼Œè¿™ä¹Ÿæ˜¯æˆ‘æžä¸å¸Œæœ›çœ‹åˆ°çš„ï¼Œè€Œé¿å…å…¶æˆä¸ºäº‹å®žçš„å”¯ä¸€æ–¹å¼å°±æ˜¯ï¼Œè¯·ä½ æ‰“å¼€ Xcodeï¼Œè¿è¡Œä¸€ä¸ªé¡¹ç›®ï¼Œå‚ç…§ç€æ–‡ä¸­æ¶‰åŠåˆ°çš„è¯´æ˜Žæ–‡æ¡£ï¼Œè¯•ç€æ•²ä¸€æ•²æ¯ä¸ªå‘½ä»¤ï¼Œä½“ä¼šä¸€ä¸‹å®ƒä»¬çš„ç”¨æ³•ä¸ŽåŒºåˆ«ã€‚æœ€åŽï¼Œä¸ºä½ çš„ LLDB é…å¥½æ’ä»¶ï¼ŒåŽ»æ„Ÿå—å®ƒçš„èœ•å˜ï¼Œç›¸ä¿¡æˆ‘ï¼Œä½ çš„å¼€å‘æ•ˆçŽ‡æå‡çš„å¯ä¸æ­¢ä¸€ç‚¹ç‚¹ã€‚å­¦ä¹ æ˜¯ä¸€ç§èƒ½åŠ›ï¼Œæ‹’ç»æ“ä½œæ‰‹å†Œå¼çŒè¾“ï¼Œåˆ†äº«è€…å¤šåŠæ˜¯åœ¨æ€»ç»“å­¦ä¹ æ”¶èŽ·æ—¶ä¸ºè¯»è€…æä¾›ä¸€äº›æ€è·¯æˆ–æ–¹å‘ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä¸ºä½ ä¿ç•™ä¸€ä¸æŽ¢ç´¢ä½™åœ°çš„åˆè¡·ï¼Œæ„¿ä½ æœ‰æ‰€æ”¶èŽ·ã€‚ &emsp;æ°´å¹³æœ‰é™ï¼Œè¯·å¤§ç¥žå¤šå¤šæŒ‡æ­£ã€‚ä¸‹ç¯‡å†ä¼š~]]></content>
  </entry>
  <entry>
    <title><![CDATA[æ‹’ç»åšç„¦è™‘è´©å–è€…çš„éŸ­èœ]]></title>
    <url>%2F2019%2F03%2F16%2F%E6%8B%92%E7%BB%9D%E5%81%9A%E7%84%A6%E8%99%91%E8%B4%A9%E5%8D%96%E8%80%85%E7%9A%84%E9%9F%AD%E8%8F%9C%2F</url>
    <content type="text"><![CDATA[å¤šæ•°äººçš„çŽ°çŠ¶&emsp; æ— è®ºä½ å‡ºå…¥èŒåœºï¼Œè¿˜æ˜¯ç½®èº«äº²å‹ï¼Œä¸ç®¡ä½ æ˜¯å¤§é¾„æœªå©šï¼Œè¿˜æ˜¯å·²ä¸ºäººçˆ¶æ¯ï¼Œçºµç„¶ä½ å·²å°æœ‰æˆå°±ï¼Œäº¦æˆ–ååˆ©åŒæ”¶ï¼Œæˆ‘ä¾ç„¶æ·±ä¿¡æ€»æœ‰é‚£ä¹ˆä¸€ç¾¤ä¸æ»¡çŽ°çŠ¶çš„äººï¼Œåœ¨å„ç§åœˆå­é‡Œã€è§’è‰²ä¸‹ã€æ¬²æœ›ä¸­ï¼Œè¢«ä¸åŒçš„ç„¦è™‘çŽ¯ç»•ç€ï¼Œçœ‹çœ‹èº«è¾¹å¹´é¾„ç›¸ä»¿çš„åŒäº‹ã€äº²å‹çš„çŽ°çŠ¶ï¼Œä¸€åˆ‡éƒ½ä¸è¨€è‡ªæ˜Žã€‚å†™è¿™ç¯‡æ–‡ç« çš„åˆè¡·ï¼Œæ˜¯å¸Œæœ›æˆ‘ä»¬éƒ½èƒ½æ­£ç¡®çš„çœ‹å¾…ç„¦è™‘ï¼ŒåŒæ—¶ä¼ é€’ç»™ä½ ä¸¤ä¸ªä¿¡æ¯ï¼š1.ä¸åšå‹¤åŠ³çš„æ‡’æƒ°è€…ï¼›2.ä½ å¹¶ä¸å­¤å•ï¼Œä¹Ÿä»Žæœªä¸§å¤±æœºä¼šã€‚ &emsp; 30å·¦å³çš„å¹´é¾„ï¼ˆä¸­å¹´å±æœºï¼‰ï¼Œåœ¨ä¸€äºŒçº¿åŸŽå¸‚æ²¡æˆ¿åˆæ²¡æˆå®¶ï¼ˆæ— å¯å¢žé•¿èµ„äº§ï¼Œä¸”æœªæ¥ä»æœ‰å¤§ç¬”æ”¯å‡ºï¼‰ï¼Œèµ„æœ¬å¸‚åœºæŒç»­é™æ¸©ï¼ˆè™½ç„¶è¿™æ˜¯çŸ­æœŸçš„è½¬æŠ˜ï¼Œä½†åŽ†å²è¿›åŒ–æ°¸è¿œéƒ½æ˜¯åœ¨æ·˜æ±°å¼±è€…ï¼‰ï¼Œæ–°æŠ€æœ¯ã€æ–°æ¦‚å¿µæ›´æ–°é€Ÿåº¦è¶Šæ¥è¶Šå¿«ï¼ˆå¾ç”Ÿä¹Ÿæœ‰æ¶¯ï¼Œè€ŒçŸ¥ä¹Ÿæ— æ¶¯ã€‚ä»¥æœ‰æ¶¯éšæ— æ¶¯ï¼Œæ®†å·²ï¼å·²è€Œä¸ºçŸ¥è€…ï¼Œæ®†è€Œå·²çŸ£ï¼ï¼‰â€¦â€¦è¿™æ˜¯ç›®å‰äº’è”ç½‘ä»Žä¸šè€…ï¼ˆå…¶å®žè¿œä¸æ­¢ï¼‰çš„å¤§éƒ¨åˆ†çŽ°çŠ¶ã€‚è¿™ä¸€çŽ°çŠ¶æ— ç–‘è®©è¶Šæ¥è¶Šå¤šçš„äººæ„Ÿåˆ°ç„¦è™‘ï¼Œç‰¹åˆ«æ˜¯å¯¹è‡ªå·±æœ‰æ›´é«˜æœŸæœ›è€Œç“¶é¢ˆå¾ˆéš¾çªç ´çš„äººã€‚å½“ç„¶ä¸æŽ’é™¤æœ‰æ— è®ºä¸–ç•Œæ€Žä¹ˆå˜éƒ½æ— çŸ¥æ— è§‰çš„äººï¼Œä»–ä»¬ä¸åœ¨æˆ‘ä»¬ä»Šå¤©è®¨è®ºçš„èŒƒç•´ã€‚ &emsp; åŸºäºŽä¸Šè¿°æ™®éå­˜åœ¨çš„çŽ°çŠ¶ï¼Œè¶Šæ¥è¶Šå¤šçš„äººä»Žä¸­å‘çŽ°äº†å•†æœºï¼š1ã€çŸ¥è¯†ä»˜è´¹ï¼›2ã€æ¯’é¸¡æ±¤æŠ¢æµé‡ã€‚é¦–å…ˆå£°æ˜Žä¸€ç‚¹ï¼Œæˆ‘æ˜¯çŸ¥è¯†ä»˜è´¹çš„æ‹¥æŠ¤è€…ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å—ç›Šè€…ã€‚ä½†æ¯å½“æŸä¸€é¢†åŸŸçš„éœ€æ±‚å¢žé•¿è¿‡å¿«æ—¶ï¼Œéƒ½éš¾å…æœ‰ä¸€ç¾¤è¶æœºè°‹å–åˆ©ç›Šçš„æ°´å†›æ··å…¥å…¶ä¸­ï¼Œè‰¯èŽ ä¸é½ï¼Œä½¿äººä»¬èŽ·å–æœ‰ä»·å€¼ä¿¡æ¯çš„æˆæœ¬ä¸æ–­æé«˜ã€‚ä»Žå‰å‡ å¹´ä¸€åº¦ç«çˆ†çš„åŸ¹è®­ç­ï¼Œåˆ°çŽ°åœ¨çº¿ä¸Šå¹³å°çš„ä»˜è´¹ä¸“æ ã€ç›´æ’­æŽˆè¯¾ï¼Œäº¤å­¦è´¹æ—¶æ— ä¸å¹ç ´ç‰›çš®ã€ä¿¡èª“æ—¦æ—¦ï¼Œåˆ°æœ€åŽå­¦æ— æ‰€æˆçš„äººæ¯”æ¯”çš†æ˜¯ã€‚è¿™ç©¶ç«Ÿæ˜¯æŽˆè¯¾çš„æœºæž„å’Œè®²å¸ˆæ°´å¹³çš„é—®é¢˜ï¼Œè¿˜æ˜¯å­¦ä¹ è€…è‡ªèº«çš„å­¦ä¹ èƒ½åŠ›ä¸å¤Ÿæˆ–è€…åŠé€”è€ŒåºŸé€ æˆçš„å‘¢ï¼Ÿæˆ‘è§‰å¾—éƒ½æœ‰é—®é¢˜ã€‚æ¯’é¸¡æ±¤ç±»çš„å…¬ä¼—å·ã€è‡ªåª’ä½“ï¼Œæ›´æ˜¯æ— å¤„ä¸åœ¨çš„æ”¶å‰²ç€äººä»¬çš„æ³¨æ„åŠ›å’Œæ—¶é—´ã€‚è€Œè¢«æ¯’é¸¡æ±¤æ·¹æ²¡ï¼Œåªèƒ½æ‰¿è®¤æ›´å¤šæ˜¯å› ä¸ºä¸ªäººè®¤çŸ¥æ°´å¹³å†³å®šäº†è¯†åˆ«èƒ½åŠ›ã€‚ &emsp; å¦‚æžœä½ è®¤ä¸ºè´©å–ç„¦è™‘åªé™äºŽä¸Šè¿°å•†ä¸šä»Žäº‹è€…ï¼Œé‚£è¯´æ˜Žä½ è¿˜æœªæ›¾å°±æ­¤æ·±å…¥çš„æ€è€ƒè¿‡ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œä¸€åˆ‡åˆ©ç”¨äººä»¬ç„¦è™‘æƒ…ç»ªåŽ»åšæ›´åˆ©äºŽè‡ªå·±äº‹æƒ…çš„äººï¼Œéƒ½æ˜¯ç„¦è™‘è´©å–è€…ã€‚æ›´æœ‰ç”šè€…ï¼Œå…ˆè¯±å¯¼äººäº§ç”Ÿç„¦è™‘å†åŠ ä»¥åˆ©ç”¨ã€‚å¦‚æžœä½ ä»”ç»†è§‚å¯Ÿï¼Œè¿™æ ·çš„äººå…¶å®žä½ èº«è¾¹ä¹Ÿå¤§æœ‰äººåœ¨ã€‚åŒ…æ‹¬å¾ˆå¤šäº²å‹ç”šè‡³éƒ½åœ¨æ— æ„è¯†çš„ä¸ºä½ å¢žåŠ ç„¦è™‘ï¼Œç„¶åŽä¿ƒä½¿ä½ åŽ»åšä»€ä¹ˆä»€ä¹ˆâ€¦è¿™é‡Œå°±ä¸åŒºåˆ†ä¸»è§‚æ„è¯†çš„å¥½åäº†ã€‚æ€»ä¹‹ï¼Œæˆ‘ä»¬è‡ªå·±è¦æœ‰è¶³å¤Ÿå¼ºçš„è‡ªæˆ‘æŽŒæŽ§åŠ›å’Œè¾¨åˆ«èƒ½åŠ›ï¼Œæ‰èƒ½å°½å¯èƒ½é¿å…è‡ªå·±å’Œèº«è¾¹çš„äººæˆä¸ºè¢«åˆ«äººåˆ©ç”¨æƒ…ç»ªè¿›è€Œæ“çºµè¡Œä¸ºçš„äººã€‚æ‹’ç»åšç‚®ç°ï¼Œä¸»å¯¼è‡ªå·±å‘½è¿çš„æ–¹å‘ã€‚ æˆ‘çš„æŒ£æ‰ŽåŽ†ç¨‹&emsp; æˆ‘å°±æ­¤çŽ°çŠ¶åˆ†äº«ä¸‹æˆ‘çš„ä¸€ç‚¹å¿ƒå¾—å§ï¼ŒåŒæ—¶ä¹Ÿå¾ˆæƒ³å¬åˆ°ä½ ä»¬å¯¹è‡ªæˆ‘æˆé•¿çš„è§è§£å’Œå½“å‰å½¢åŠ¿çš„çœ‹æ³•ã€‚ &emsp; æ˜¾ç„¶æˆ‘çš„çŽ°çŠ¶ä»å±žä¸Šè¿°ä¹‹åˆ—ï¼ˆæ²¡åŠžæ³•ï¼Œæˆ‘å¼€çªæ™šäº†ï¼‰ï¼Œæ‰€ä»¥æ›¾ç»æˆ‘ä¹Ÿç„¦è™‘è¿‡ï¼Œä¹Ÿè¢«æ”¶è¿‡æ™ºå•†ç¨Žï¼Œä½†å¥½åœ¨å·²äºŽä¸€å¹´å‰æƒ³æ¸…æ¥šäº†è‡ªå·±è¯¥åšä»€ä¹ˆã€æƒ³è¦ä»€ä¹ˆï¼Œæ‰€ä»¥çŽ°åœ¨çš„çŠ¶æ€æ€»ä½“è¿˜ä¸é”™ â€”â€” æ¯ä¸€å¤©éƒ½èƒ½çœŸåˆ‡çš„æ„Ÿåˆ°æ¯”æ˜¨å¤©è¿›æ­¥äº†ï¼Œæ— è®ºæ˜¯ä¸“ä¸šæŠ€èƒ½ä¸Šï¼Œè¿˜æ˜¯å…¶ä»–é¢†åŸŸçš„çŸ¥è¯†ï¼Œéƒ½åœ¨ä¸æ–­çš„æ·»ç –åŠ ç“¦ï¼Œé€æ¸çš„è‡ªæˆä½“ç³»ã€‚å¦‚æžœä½ ä¹Ÿæœ‰è¿™ç§æ„Ÿå—ï¼Œæˆ‘ç›¸ä¿¡ä½ ä¹Ÿæ—©è·Ÿç„¦è™‘å½»åº•è¯´å†è§äº†ã€‚è‡³äºŽå¦‚ä½•å½»åº•èµ°å‡ºç„¦è™‘çš„é˜´å½±ï¼Œæ‰¾åˆ°è‡ªå·±çš„æ–¹å‘å’Œç›®æ ‡ï¼Œæˆ‘ä»”ç»†å›žæƒ³äº†é‚£æ®µæ—¶é—´è‡ªå·±çš„å¿ƒè·¯åŽ†ç¨‹ï¼Œå¤§è‡´æ€»ç»“å¦‚ä¸‹ï¼š åˆ¨æ ¹é—®åº• æƒ³æ˜Žç™½ç„¦è™‘æ˜¯ä»€ä¹ˆï¼Ÿ æˆ‘çš„ç†è§£ï¼šå¯¹çŽ°çŠ¶çš„ä¸æ»¡ + æ”¹å˜çŽ°çŠ¶æ—¶çš„æ— åŠ›/ä¹åŠ›æ„Ÿ + å¯¹æœªæ¥çš„ä¸ç¡®å®š = ç„¦è™‘ ç„¦è™‘ä»Žä½•è€Œæ¥ï¼Ÿ ç»“åˆå‰ä¸€ç‚¹ï¼Œç„¦è™‘ä¸»è¦æœ‰ä»¥ä¸‹æ¥æºï¼š èŒä¸šå‘å±•çš„è¿·èŒ«ä¸Žæ— åŠ© æˆé•¿é€Ÿåº¦è¿‡æ…¢ç”šè‡³åœæ­¢ äººä¸Žäººä¹‹é—´æ¨ªå‘çš„å¯¹æ¯” è·ç¦»è‡ªæˆ‘æœŸæœ›å·®è·å¤ªå¤§ äººç”Ÿå¤§äº‹è‡³ä»Šæ¯«æ— å¤´ç»ª ç§‘æŠ€è¿›æ­¥ç¤¾ä¼šå˜è¿åŠ é€Ÿ å¦‚ä½•å½»åº•æ ¹æ²»ç„¦è™‘ï¼Ÿ åŒæ ·ç»“åˆä¸Šé¢çš„åˆ†æžï¼Œå¯¹ç—‡ä¸‹è¯ï¼š äººçš„ç²¾åŠ›æ˜¯æœ‰é™çš„ï¼Œæ— æ‰€ä¸èƒ½çš„å¤©æ‰ç¡®å®žå­˜åœ¨ï¼Œä½†è¯·ç›¸ä¿¡æˆ‘ï¼Œæˆ‘ä»¬éƒ½ä¸æ˜¯ã€‚æœ‰é™çš„ç²¾åŠ›ä¸€å®šè¦èŠ±åœ¨æœ€æœ‰ç”¨ã€é•¿æœŸæ”¶ç›Šæœ€å¤§çš„äº‹æƒ…ä¸Šï¼Œåˆ«æƒ³ç€ä»€ä¹ˆéƒ½æƒ³å­¦ï¼Œé™ä¸‹å¿ƒæ¥åˆ†æžï¼Œæ‰¾å‡†ä½ æ‰€åœ¨çš„é¢†åŸŸé‡Œï¼Œåœ¨å¯ä»¥é¢„è§çš„æœªæ¥æŸä¸€ä¸ªä¸å¯æˆ–ç¼ºçš„æ–¹å‘ï¼ŒèŠ±å‡ å¹´æ—¶é—´æŠŠå®ƒåšåˆ°æžè‡´ã€‚ï¼ˆä¸è¦æŠ±æ€¨å·¥ä½œå¤ªå¿™æ²¡æ—¶é—´æƒ³ï¼Œæ²¡æ—¶é—´åšï¼Œè‡³å°‘ä½ æ°¸è¿œéƒ½æœ‰é€‰æ‹©çš„æƒåˆ©ï¼‰ å­¦ä¹ ä¸€å®šæ˜¯æœ‰æ–¹æ³•å¯å¾ªçš„ï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯å°½å¯èƒ½æ‰¾åˆ°ä½ èƒ½æŽ¥è§¦åˆ°çš„è¡Œä¸šå¤§ç‰›ï¼ˆä¸€å®šè¦æ˜¯èƒ½è¯´å®žè¯çš„äººï¼‰ï¼Œå®žåœ¨æ²¡æœºä¼šå°±å…³æ³¨ä»–ä»¬çš„åŠ¨æ€ã€åšå®¢ã€å¿ƒå¾—ï¼Œä»–ä»¬ä¹‹æ‰€ä»¥èƒ½èµ°çš„æ¯”ä½ å¿«ï¼Œä¸€å®šæ˜¯æœ‰å¾ˆå¤šå¯å–ä¹‹å¤„çš„ï¼Œæ€è€ƒæ–¹å¼ã€å¯¹æ–°äº‹ç‰©çš„æ€åº¦ã€ä¹äºŽåˆ†äº«å’Œæ€»ç»“çš„ç²¾ç¥žç­‰ç­‰ï¼Œæ‰¾åˆ°å±žäºŽä½ çš„æ ‡æ†ï¼ˆä¸éœ€è¦å¾ˆå¤šï¼Œä¸€ä¸¤ä¸ªè¶³å¤Ÿï¼‰ï¼Œç…§ç€åšå°±æ˜¯äº†ï¼Œå¯¹äº†ï¼Œè¯·å¿˜è®°â€œé€Ÿæˆâ€è¿™ä¸ªè¯ã€‚æœ€å¥½çš„æ–¹æ³•ä¸€å®šæ¥è‡ªä¸æ–­çš„å®žè·µä¸Žæ€»ç»“ï¼Œç»ä¸æ˜¯ç®€å•çš„æ¨¡ä»¿ã€‚ ä½ ä¼šç»å¸¸å‘çŽ°ï¼Œå“‡ï¼Œè¿™å°å­æ¯”æˆ‘å°å¥½å‡ å²ï¼Œå´æ ·æ ·æ¯”æˆ‘ä¼˜ç§€ï¼è¿™å…¶å®žæ˜¯ä¸ªä¸å€¼å¾—æœ‰ä»»ä½•æ„Ÿå¹çš„äº‹å®žï¼Œã€Šå¸ˆè¯´ã€‹æ›¾è¯´ï¼šâ€œç”Ÿä¹Žå¾åŽï¼Œå…¶é—»é“ä¹Ÿäº¦å…ˆä¹Žå¾ï¼Œå¾ä»Žè€Œå¸ˆä¹‹â€ã€â€œé—»é“æœ‰å…ˆåŽï¼Œæœ¯ä¸šæœ‰ä¸“æ”»â€ã€‚äººç”Ÿæ¥å…ˆå¤©æ¡ä»¶å„ä¸ç›¸åŒï¼Œå³ä½¿å…ˆå¤©æ¡ä»¶ä¸å¦‚ä½ çš„åŽæ¥æ¯”ä½ å¼ºäº†ï¼Œä¹Ÿæ²¡ä»€ä¹ˆå¯æ¯”æ€§ã€‚å› ä¸ºä½ ä¸ä»…è¦æ‰¿è®¤åŠªåŠ›å¾ˆé‡è¦ï¼Œè¿æ°”ä¹Ÿå¾ˆé‡è¦ã€‚è€Œå†³å®šè¿æ°”çš„æ˜¯æˆ‘ä»¬å¯¹è¿™ä¸ªä¸–ç•Œçš„æ€åº¦ã€‚æŽ¥çº³ä¸å¤Ÿå¥½çš„è‡ªå·±ï¼Œåšå¥½è‡ªå·±è¯¥åšçš„ï¼Œä¼˜ç§€çš„äººæ˜¯ç”¨æ¥å­¦ä¹ å€Ÿé‰´çš„ï¼Œè€Œä¸æ˜¯è¡¬æ‰˜è‡ªå·±è½é­„çš„ã€‚ åˆç†çš„ç›®æ ‡æ˜¯å‰æï¼Œå¦åˆ™è¿™æ— å¼‚äºŽç»™è‡ªå·±ä¸€ä¸ªå¿…è´¥çš„æ®‹å±€å’Œè‡ªæˆ‘å¦å®šçš„æ¶æ€§å¾ªçŽ¯ã€‚äººçš„å¹¸ç¦æ„Ÿå¾ˆå¤§ç¨‹åº¦ä¸Šæ¥æºäºŽè‡ªæ‹çš„æ„Ÿè§‰è¢«æ»¡è¶³ï¼Œæ— è®ºæ˜¯æ‹çˆ±è¿˜æ˜¯äº¤æœ‹å‹ï¼Œéƒ½æ˜¯å› ä¸ºä»–ä»¬è®¤å¯ä½ ï¼Œæ»¡è¶³äº†ä½ çš„è‡ªæ‹æƒ…ç»ªï¼Œæ‰€ä»¥ä»–ä»¬æ‰èƒ½æ¿€å‘ä½ çš„æ½œèƒ½ã€‚åŒæ ·çš„ï¼Œåˆç†çš„ç›®æ ‡æ˜¯æœ€å¥½çš„è‡ªæˆ‘é¼“åŠ±æ–¹å¼ï¼Œé˜¶æ®µæ€§çš„è¾¾æˆç›®æ ‡ï¼Œæ‰èƒ½å½¢æˆè‡ªæˆ‘è®¤å¯ã€æŒç»­è¿›æ­¥ã€ä¸æ–­ç¼©å°ä¸Žæ›´é«˜æœŸæœ›ä¹‹é—´å·®è·çš„æ­£å‘å¾ªçŽ¯ã€‚ å¤§é¾„å•èº«é’å¹´éšå¤„å¯è§ï¼Œç¬¬ä¸€ä¸ªåŽŸå› ï¼Œäººæ‰€å—æ•™è‚²çš„ç¨‹åº¦ä¸Žä¸ºç¹è¡åŽä»£ï¼ˆå®Œæˆä»»åŠ¡ï¼‰è€Œç»“å©šçš„æŽ¥å—åº¦å‘ˆæ˜Žæ˜¾è´Ÿç›¸å…³ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸æ˜¯ä½ ä¸€ä¸ªäººä¸æƒ³å°†å°±ï¼Œæ˜¯éƒ½ä¸æƒ³å°†å°±ã€‚ç¬¬äºŒä¸ªåŽŸå› ï¼Œç¤¾ä¼šçš„é«˜é€Ÿå‘å±•æ³¨å®šäº†å¹´è½»ä¸€ä»£çš„é«˜åŽ‹çŠ¶æ€ï¼Œè€Œä¸”è¯¥çŠ¶æ€åœ¨å¯é¢„è§çš„æœªæ¥ä¼šä¸€ç›´æŒç»­ï¼Œè¿™ç§çŠ¶æ€å†³å®šäº†æŽ¥è§¦åˆ°é è°±å¼‚æ€§åœˆå­çš„åœºæ™¯è¶Šæ¥è¶Šå°‘ï¼Œè¿™ä¸¤ç‚¹ä¹Ÿæ˜¯é«˜ç­‰æ•™è‚²æ™®åŠä»¥æ¥äººå£ç”Ÿè‚²çŽ‡ä¸€è·¯ä¸‹æ»‘çš„çœŸç›¸ã€‚ç¬¬ä¸‰ä¸ªåŽŸå› ï¼Œä½ ä¸å¤Ÿä¸»åŠ¨ï¼Œå…¶å®žè¿˜æ˜¯æœ‰å¾ˆå¤šåˆé€‚çš„äººåœ¨ç­‰ä½ ä¸»åŠ¨ï¼Œä¸è¦åšä¸ªçŽ»ç’ƒå¿ƒï¼Œä¸è¯•è¯•æ€Žä¹ˆçŸ¥é“å‘¢ï¼Ÿå·å·å‘Šè¯‰ä½ ï¼Œæˆ‘å°±æ˜¯è¿™ä¹ˆæˆåŠŸçš„ã€‚ ä¸ç®¡ç§‘æŠ€å¦‚ä½•å‘è¾¾ï¼Œç¤¾ä¼šå¦‚ä½•å˜é©ï¼Œæ—¢ç„¶è¿½ä¸ä¸Šå˜åŒ–é‚£å°±åˆ«è¿½äº†ï¼Œå€’ä¸å¦‚æ¢ä¸ªè§’åº¦æƒ³æƒ³ä»€ä¹ˆæ˜¯ä¸€æˆä¸å˜çš„ã€‚è¿™ä¹‹å‰ï¼Œå…ˆåŒºåˆ†ä¸€ä¸‹ä¸¤ä¸ªè¯ï¼Œè¶‹åŠ¿å’Œæ½®æµã€‚ä¹ä¸€çœ‹ä»¥ä¸ºæ˜¯åŒä¹‰è¯ï¼Œå…¶å®žå¾ˆå¤šæ—¶å€™æ˜¯æˆªç„¶ç›¸åçš„ä¸¤ä¸ªä¸œè¥¿ï¼Œä½†å®ƒä»¬åˆäº’ç›¸ä½œç”¨ï¼Œç±»ä¼¼æµ·æ´‹æ·±å¤„çš„æš—æµæ¶ŒåŠ¨ä¸Žæˆ‘ä»¬çœ‹å¾—åˆ°çš„ç‹‚é£Žéª‡æµªçš„å…³ç³»ã€‚æš—æµå°±æ˜¯è¶‹åŠ¿ï¼Œå®ƒæ˜¯ç”±äººç±»å…±åŒä½“å†³å®šçš„å¤§æ–¹å‘ï¼Œå…¶åŠ›é‡ä¹‹å¤§å¾€å¾€æ˜¯ä¸å¯æŠ—åŠ›ï¼Œä¸”éœ€è¦è¾ƒé•¿çš„æ—¶é—´æ‰èƒ½é€æ¸æ˜¾çŽ°å‡ºæ¥ã€‚è€Œæ½®æµåˆ™çž¬æ¯ä¸‡å˜ï¼Œæ— æ³•æ•æ‰ï¼Œä½†å®ƒå´åˆæ˜¯æš—æµä¹‹ä¸Šçš„å…·ä½“ä½“çŽ°ã€‚è¿™è·Ÿæˆ‘ä»¬æƒ³è¯´çš„æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿç®€å•æ¥è¯´ï¼Œå¦‚æžœä½ ä¸€ç›´å¿™äºŽè¿½éšæ½®æµã€èµ¶çƒ­é—¨ã€å­¦çƒ­ç‚¹ï¼Œå°±åƒæ˜¯åœ¨çŽ©å†²æµªä¸€æ ·ï¼Œå³ä½¿çŸ­æ—¶é—´å†…ä½ å€Ÿç€å‡ ä¸ªæµªå¤´èŽ·å¾—äº†å‡è¿åŠ è–ªçš„æœºä¼šï¼Œå¤šåŠä¹Ÿæ˜¯æ˜™èŠ±ä¸€çŽ°ï¼Œç»“å±€éƒ½åªä¼šè¢«ä¸‹ä¸€ä¸ªé£Žå¤´æ— æƒ…çš„æ‹å…¥æµ·åº•ã€‚å¦‚æžœä½ æ·±å…¥è§‚å¯Ÿåˆ†æžè¡Œä¸šå†…çš„é¡¶å°–äººå£«ï¼Œä½ ä¼šå‘çŽ°ä»–ä»¬éƒ½ä¸æ˜¯å…¨èƒ½åž‹çš„ï¼Œä¸”ä»–ä»¬éƒ½å…·æœ‰ä»¥ä¸å˜åº”ä¸‡å˜çš„æœ¬é¢†ï¼Œå› ä¸ºä»–ä»¬æŠ“ä½äº†æ²¡å˜çš„ä¸œè¥¿ï¼Œé¢„æµ‹åˆ°äº†æœªæ¥çš„è¶‹åŠ¿ã€‚é‚£åˆ°åº•ä»€ä¹ˆæ˜¯ä¸å˜çš„ï¼Œåˆå¦‚ä½•åšå‡ºé¢„æµ‹çš„å‘¢ï¼Ÿé€šè¿‡ä¸æ–­è§‚å¯Ÿã€å­¦ä¹ å’ŒéªŒè¯ï¼Œæˆ‘å¾—å‡ºä»¥ä¸‹ä¸¤ç‚¹ï¼š ä¸€ï¼Œäººçš„åŸºæœ¬éœ€æ±‚å’Œæœ¬æ€§ã€‚æ ¹æ®è¿™ä¸€ç‚¹ï¼ˆå‰ææ˜¯ä½ å¯¹äººæ€§å’Œå¿ƒç†å­¦æœ‰ä¸€å®šçš„ç ”ç©¶ï¼‰ï¼Œå¯¹æœªæ¥çš„é¢„æµ‹ä¹Ÿæ¯”è¾ƒç®€å•ç²—æš´ï¼šå…³æ³¨æ–°çš„ç§‘å­¦å’ŒæŠ€æœ¯ï¼Œæ€è€ƒç§‘æŠ€å¦‚ä½•æ›´å¥½çš„æ»¡è¶³äººçš„åŸºæœ¬éœ€æ±‚å’Œæœ¬æ€§ï¼šå®ƒä»¬æœ‰å“ªäº›å°†è¦è½åœ°æˆ–è€…å·²ç»è½åœ°ä½†éœ€æ±‚è¿œå¤§äºŽä¾›ç»™çš„åœºæ™¯ã€‚ äºŒï¼Œç¤¾ä¼šçš„è´¢å¯Œåˆ†é…è§„å¾‹ã€‚æ— è®ºç¤¾ä¼šè´¢å¯Œç§¯ç´¯æœ‰å¤šä¸°è£•ï¼Œç©·äººæ‰€å çš„æ¯”ä¾‹ä¼¼ä¹Žå¹¶æ— å˜åŒ–ï¼Œå³ä½¿äººå‡æ”¶å…¥ä¸æ–­å¢žåŠ ï¼Œé‚£ä¹Ÿåªæ˜¯å¯Œäººæ‹‰å‡å¹³å‡æ•°çš„å‡è±¡ã€‚è¿™ä¾§é¢åæ˜ å‡ºçœŸæ­£ä¸å‘å‘½è¿ä½Žå¤´ï¼Œæ„¿æ„ä¸ºæ”¹å˜çŽ°çŠ¶ä»˜å‡ºä»£ä»·çš„äººå¹¶ä¸å¤šã€‚æ— è®ºæ˜¯çŽ¯å¢ƒå½±å“è¿˜æ˜¯è¶‹åˆ©é¿å®³çš„æœ¬èƒ½ååº”ï¼ŒåŠ¨ç‰©éƒ½æ˜¯æ„¿æ„å‘†åœ¨è‡ªå·±èˆ’é€‚åŒºçš„ï¼Œæ‰€ä»¥ï¼Œå¦‚æžœä½ èƒ½ç¦»å¼€è‡ªå·±çš„èˆ’é€‚åŒºï¼ŒæŠŠäººç”Ÿå½“åšä¸€åœºé©¬æ‹‰æ¾ï¼Œä½ ä¸€ç›´éƒ½å¤§æœ‰æœºä¼šã€‚ä½†ï¼Œè¯·ç»™è‡ªå·±æˆé•¿çš„æ—¶é—´ï¼Œç›¸ä¿¡ç§¯ç´¯çš„åŠ›é‡ã€‚ å›žåˆ°çŽ°å®ž&emsp; æ— è®ºé“ç†ç†è§£çš„æœ‰å¤šé€å½»ï¼Œä½†äººç»ˆç©¶è¿˜æ˜¯è¦æ´»åœ¨çŽ°å®žé‡Œçš„ï¼Œç¡è§‰ä¹‹å‰æ»¡è…”çƒ­è¡€ï¼Œä¸€è§‰é†’æ¥è¿˜æ‡’åºŠçš„äººå¤ªå¤šäº†ï¼Œä¸å·®ä½ ä¸€ä¸ªã€‚å¦‚ä½•å°†æ‰€å­¦è‡´äºŽå®žè·µï¼Œè¿™æ‰æ˜¯æ‹‰å¼€äººä¸Žäººä¹‹é—´å·®è·çš„å†³å®šæ€§å› ç´ ï¼Œä¸€æåˆ°å®žå¹²ï¼Œå°±ä¸ç¦æƒ³åˆ°é¸¡æ±¤â€¦å…³äºŽæ¯…åŠ›ã€æ‰§è¡ŒåŠ›è¿™ä¸€ç±»çš„ä¹¦ç±å’Œæ–¹æ³•è®ºæˆ‘ä¸ªäººéƒ½è§‰å¾—ä¸å€¼ä¸€æï¼Œç”šè‡³å…¨éƒ½æ˜¯ä¼ªå‘½é¢˜ã€‚æˆ‘è§‰å¾—ä»»ä½•ä¸€ä»¶äº‹èƒ½ä¸èƒ½åšæˆï¼ˆåˆ«æ‹¿ä¸Žè‡ªèº«ä¸åˆ‡å®žé™…çš„äº‹é’»ç‰›è§’å°–ï¼‰ï¼Œå”¯ä¸€çš„å†³å®šæ€§å› ç´ å°±æ˜¯ï¼šä½ åˆ°åº•æœ‰å¤šæƒ³è¦ã€‚å¯¹ï¼Œä»»ä½•ä¸€ä»¶äº‹çš„å¤±è´¥éƒ½å¯ä»¥å½’ç»“äºŽè¿™ä¸€ç‚¹ï¼šä½ ä¸å¤Ÿæƒ³è¦å®ƒã€‚å¦‚æžœè¿™ä»¶äº‹å¯¹ä½ è€Œè¨€æ²¡å¾—é€‰ï¼Œæ— å¯æ›¿ä»£ï¼Œä¼˜å…ˆçº§æ»¡æ˜Ÿï¼Œä½ è¿˜éœ€è¦æ¯…åŠ›ï¼Ÿè¿˜éœ€è¦æƒ³åŠžæ³•æé«˜æ‰§è¡ŒåŠ›ï¼Ÿæ€•æ˜¯ä¸è®©ä½ åšä½ éƒ½è¦æ‹¼å‘½æŠµæŠ—çš„å§ï¼Œæ‰€ä»¥è¯·ä¸ºæ¯ä¸€ä¸ªç›®æ ‡èµ‹äºˆå…¶é‡å¤§åˆ°ä¸å¾—ä¸åšçš„æ„ä¹‰ã€‚è€Œä»…æ¬¡äºŽæ­¤çš„å› ç´ ï¼Œå°±æ˜¯åšä»€ä¹ˆï¼Œæ€Žä¹ˆåšï¼Œå…³äºŽè¿™ä¸€ç‚¹ï¼Œå‰é¢åˆ—å‡ºçš„åŽŸå› å’Œæ–¹æ¡ˆä¸­å·²ç»è¶³å¤Ÿè¯¦ç»†äº†ã€‚ä¸åšæ‡’æƒ°çš„å‹¤å¥‹è€…ï¼Œå°±æ˜¯è¦é‡è§†æ–¹æ³•å’Œæ•ˆçŽ‡ï¼Œæ‹’ç»åŸ‹å¤´è›®å¹²ã€‚é€‰å¯¹æ–¹å‘ï¼Œç”¨æ­£ç¡®çš„æ–¹å¼ï¼Œåšæ­£ç¡®çš„äº‹ï¼Œå‰©ä¸‹çš„äº¤ç»™æ—¶é—´ã€‚ &emsp; ä»¥ä¸Šçº¯å±žæˆ‘ä¸ªäººå…³äºŽå¦‚ä½•æ‘†è„±ç„¦è™‘çš„ä¸€äº›å¿ƒå¾—å’Œæ€Žæ ·è¸å®žçš„åšå¥½çŽ°åœ¨çš„ä¸€äº›æ€è€ƒï¼Œä¸å¯¹ä»»ä½•ç»“è®ºçš„å¯¹é”™åŠå…¶ç»“æžœè´Ÿè´£ï¼Œä½†ä¹Ÿå¸Œæœ›èƒ½ä¸ºä½ æä¾›ä¸€äº›å¯å‚è€ƒä¹‹å¤„ï¼Œå½“ç„¶æˆ‘ä¹Ÿæ¬£ç„¶æŽ¥å—ä»»ä½•ä¸åŒçš„ä»·å€¼è§‚å’Œçœ‹æ³•ï¼Œæ¬¢è¿Žäº¤æµã€‚ æ€»ç»“ä¸‹æˆ‘æƒ³è¯´çš„è¯ ä»˜è´¹å­¦ä¹ æ˜¯ä»¶å¥½äº‹ï¼Œå‰ææ˜¯ä½ å¹¶éžå‡ºäºŽç¼“è§£ç„¦è™‘è€Œä»˜è´¹ï¼Œè€Œæ˜¯å¾ˆæ¸…æ¥šä½ æƒ³åšä»€ä¹ˆã€‚ å¦‚æžœä½ çœŸçš„å†³å®šè¦å˜å¾—ä¼˜ç§€ï¼Œè¯·ä¸è¦ç€çœ¼äºŽé’±ï¼Œæˆé•¿è‹¥æ˜¯æˆçœŸï¼Œé’±åªæ˜¯é¡ºä¾¿çš„ä¸œè¥¿ã€‚ ä¸è¦æ€¥èºï¼Œé™ä¸‹æ¥ï¼Œå¥½å¥½æå‡è‡ªå·±çš„å­¦ä¹ èƒ½åŠ›ï¼Œè®¤çŸ¥èƒ½åŠ›ï¼Œæ‰èƒ½æ›´å¥½çš„ç­›é€‰æœ‰ä»·å€¼çš„ä¸œè¥¿ã€‚ åˆ«æ€•ä½ å¯¹è‡ªå·±çš„é«˜è¦æ±‚ä¼šè®©ä½ å˜å¾—ä¸åˆç¾¤ï¼Œä»–ä»¬åªæ˜¯å®³æ€•ä½ æˆé•¿çš„å¤ªå¿«è€Œå·²ï¼Œä½ ä¹Ÿä»Žæœªå­¤å•è¿‡ã€‚ å¦‚æžœä½ å¯¹è‡ªå·±æ²¡è¦æ±‚ï¼Œå°±å¼€å¼€å¿ƒçš„è¿‡å¥½æ¯ä¸€å¤©ï¼Œåˆ‡èŽ«æ€¨å¤©å°¤äººï¼ŒæŠ±æ€¨æ˜¯æœ€è¦ä¸å¾—çš„æƒ…ç»ªï¼Œé‚£åªä¼šä½“çŽ°è‡ªå·±çš„æ— èƒ½ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[fishhookä½¿ç”¨åœºæ™¯&æºç åˆ†æž]]></title>
    <url>%2F2019%2F03%2F08%2Ffishhook%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%26%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[ä¸åšä¼ªå­¦ä¹ è€…&emsp;ä¸Šä¸€ç¯‡æˆ‘ä»¬ä¸€èµ·åˆ†æžäº† fishhookçš„å®žçŽ°åŽŸç†ï¼Œä½†å¾ˆå¤šä¸œè¥¿å¦‚æžœæˆ‘ä»¬ä»…ä»…çŸ¥é“åŽŸç†ï¼Œå…¶å®žè·ç¦»çœŸæ­£å¸æ”¶å®ƒå¹¶å°†å…¶è½¬åŒ–æˆè‡ªå·±çš„ç”Ÿäº§åŠ›è¿˜æœ‰å¾ˆé•¿çš„è·¯ã€‚ä½ å¾—å¼„æ¸…æ¥šåˆ«äººæ˜¯æ€Žä¹ˆåˆ©ç”¨è¿™ä¸ªåŽŸç†åŽ»è§£å†³é—®é¢˜çš„ï¼Œè¿˜è¦å€Ÿé‰´åˆ«äººçš„è®¾è®¡æ€æƒ³ï¼Œå†ç»“åˆæˆ‘ä»¬è‡ªå·±çš„æ€è€ƒä¸æ–­åœ°å®žè·µå’Œæ€»ç»“ï¼Œæ‰èƒ½çœŸæ­£è®©çŸ¥è¯†æˆä¸ºè‡ªå·±çš„ç”Ÿäº§åŠ›ã€‚ &emsp;è¯ä¸å¤šè¯´ï¼Œè¿›å…¥ä»Šå¤©çš„ç¬¬ä¸€ä¸ªæ­£é¢˜ã€‚ fishhook ä½¿ç”¨åœºæ™¯&emsp;åœ¨ ä¸Šä¸€ç¯‡ é‡Œå·²ç»ä¸ºå¤§å®¶æ¼”ç¤ºäº†å®ƒçš„åŸºæœ¬ç”¨æ³•ï¼Œä½¿ç”¨å¾ˆç®€å•ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚å®ƒçš„ä½¿ç”¨åœºæ™¯æ­£å¦‚å…¶å: fishhookï¼Œä¸»è¦ç”¨åœ¨å®‰å…¨é˜²æŠ¤é¢†åŸŸã€‚å½“ç„¶ï¼Œå¤§ç¥žçº§çš„é€†å‘ä¸Žå®‰å…¨é˜²æŠ¤ä¸“å®¶å’±ä»¬å…ˆä¸è°ˆï¼Œé‚£ä¸ªçº§åˆ«çš„é«˜æ‰‹æˆ‘ç›¸ä¿¡ä¹Ÿä¸ä¼šçœ‹åˆ°è¿™ç¯‡æ–‡ç« ï¼Œå¤©ä¸‹æ²¡æœ‰ç»å¯¹çš„å®‰å…¨ï¼Œé»‘ä¸Žç™½æ°¸è¿œéƒ½åœ¨åšå¼ˆï¼Œæ‰€ä»¥å¸Œæœ›å¤§å®¶ä¸è¦é’»ç‰›è§’å°–ï¼Œè‡³å°‘å’±ä»¬ä¸èƒ½å†™å‡ºè®©èœé¸Ÿé€†å‘å°±èƒ½è½»æ¾æžå®šçš„åº”ç”¨å¯¹å§ï¼Ÿå½“ç„¶ï¼ŒåŽé¢å’±ä»¬ä¹Ÿä¼šå­¦ä¹ é™æ€åˆ†æžå’Œæ±‡ç¼–çš„çŸ¥è¯†ï¼ŒæŽŒæ¡æ›´é«˜çº§çš„é€†å‘å’Œé˜²æŠ¤æŠ€èƒ½ï¼Œé‚£éƒ½æ˜¯æ‰“å¥½åŸºç¡€çš„åŽè¯äº†ã€‚ä»Šå¤©å’±ä»¬çš„é‡ç‚¹æ˜¯æºç åˆ†æžï¼Œé¡ºä¾¿æ¸©ä¹ ä¸‹ c çš„æ•°æ®ç»“æž„ã€‚ ä¸‹é¢å…ˆæ¥äº†è§£ä¸€ä¸‹ç”¨ fishhook é˜² HOOK çš„åŸºæœ¬æ€è·¯ï¼š åœ¨åŸºç¡€çš„åŠ¨æ€è°ƒè¯•é€†å‘ä¸­ï¼Œæœ€å¸¸è§çš„å°±æ˜¯å®šä½åˆ°ç›®æ ‡æ–¹æ³•åŽï¼Œé€šè¿‡ runtime ä¸­çš„å‡ ç§æ–¹æ³•äº¤æ¢æ–¹å¼ï¼Œå®žçŽ°ä»£ç æ³¨å…¥çš„ç›®çš„ã€‚ä¸ºä½ å‡†å¤‡å¥½äº†ç›¸å…³çš„æ–‡ç« ï¼šiOSä»£ç æ³¨å…¥+HOOKå¾®ä¿¡ç™»å½• æ—¢ç„¶ fishhook å¯ä»¥æ‹¦æˆªç³»ç»Ÿå¤–éƒ¨çš„ C å‡½æ•°ï¼Œé‚£è‡ªç„¶å°±å¯ä»¥ HOOK åˆ° runtime åº“ä¸­çš„æ‰€æœ‰æ–¹æ³•ã€‚ é‚£æˆ‘ä»¬å°±å°†æ‰€æœ‰å¯èƒ½ç”¨æ¥ç¯¡æ”¹æˆ‘ä»¬ OC æ–¹æ³•å®žçŽ°çš„ runtime APIï¼Œéƒ½ç”¨ fishhook æ‹¦æˆªæŽ‰ï¼Œä½¿å…¶æ— æ³•ç”¨ä»£ç æ³¨å…¥çš„æ–¹å¼æˆåŠŸ HOOKã€‚ æ€è·¯ç†æ¸…äº†ï¼Œæ’¸èµ·è¢–å­å¼€å§‹å¹²ã€‚ ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œè¿™é‡Œç›´æŽ¥æžäº†ä¸€ä¸ªåˆ†ç±»ï¼Œå°†ViewControllerçš„ å®žä¾‹æ–¹æ³• viewDidAppear: ç”¨ method_exchangeImplementations(Method _Nonnull m1, Method _Nonnull m2) çš„æ–¹å¼ä¸Ž my_viewDidAppear: äº¤æ¢äº†å®žçŽ°ï¼Œä¸Šä»£ç ï¼šè¿™æ—¶æˆ‘ä»¬ç¨‹åºè·‘èµ·æ¥å°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š ä¸ºäº†é˜»æ­¢å…¶å®Œæˆæ–¹æ³•äº¤æ¢ï¼Œæˆ‘ä»¬è¦ hook method_exchangeImplementations æ–¹æ³•ï¼Œæ‹–å…¥ fishhook æºæ–‡ä»¶ï¼Œå†æ·»åŠ ä¸€ä¸ªåˆ†ç±»å¹¶å†™å¥½ hook method_exchangeImplementations çš„ä»£ç ï¼šï¼ˆå¦‚æžœæˆåŠŸ hook äº† method_exchangeImplementations ï¼Œé‚£åˆ«äººè°ƒç”¨è¯¥æ–¹æ³•æ—¶ä¼šè¿›å…¥æˆ‘ä»¬çš„ myExchange ï¼Œç„¶åŽé¡ºä¾¿åˆæŠŠ NSLog hook äº†ä¸€ä¸‹ï¼Œä¸è¦è¢«è¿™ä¸ªç»•æ™•äº† ðŸ˜œï¼‰å†æ¬¡ Run èµ·æ¥ï¼Œå’¦ï¼Ÿè‚¿ä¹ˆè‚¥å››ï¼Ÿä½ ä¼šå‘çŽ° method_exchangeImplementations å¹¶æ²¡æœ‰ HOOK æˆåŠŸï¼Œ viewDidAppear: ä¾ç„¶è¢«ç¯¡æ”¹äº†å®žçŽ°ï¼Œé—®é¢˜å‡ºåœ¨å“ªäº†å‘¢ï¼Ÿ &emsp;å¯¹ï¼Œèªæ˜Žçš„ä½ ä¸€å®šå‘çŽ°äº†é—®é¢˜æ‰€åœ¨ï¼šæ˜¯ä»£ç æ‰§è¡Œé¡ºåºçš„é—®é¢˜ &emsp;ç»è¿‡å®žè·µï¼Œæˆ‘å‘çŽ°é¡¹ç›®é‡Œå‚ä¸Žç¼–è¯‘çš„æ–‡ä»¶é¡ºåºå°±æ˜¯å…¶ç¼–è¯‘åŽè¢«åŠ è½½æ—¶çš„è½½å…¥é¡ºåºï¼ˆæš‚æœªæ‰¾åˆ°å®˜æ–¹çš„ç¼–è¯‘é¡ºåºè¯´æ˜Žï¼Œè¿˜è¯·æœ‰ç ”ç©¶çš„å¤§ä½¬æŒ‡ç‚¹ï¼‰ï¼Œå³æ­¤æ—¶ ViewController+HOOKTest çš„ load æ–¹æ³•ä¼šæ—©äºŽ ViewController+FishHook çš„ load è°ƒç”¨ï¼Œæ‰€ä»¥ method_exchangeImplementations çš„å®žçŽ°è¢«æˆ‘ä»¬ HOOK å‘ç”Ÿåœ¨ viewDidAppear: è¢«åˆ«äººäº¤æ¢ä¹‹åŽï¼Œä»Žè€Œå¯¼è‡´é˜²æŠ¤çš„å¤±è´¥ï¼šéªŒè¯ä¸€ä¸‹æˆ‘ä»¬çš„æƒ³æ³•ï¼š &emsp;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨è°ƒæ•´äº†ç¼–è¯‘æ–‡ä»¶çš„é¡ºåºä¹‹åŽæˆåŠŸ HOOK åˆ°äº† method_exchangeImplementations çš„è°ƒç”¨ï¼Œä½†å®žé™…å¼€å‘ä¸­æˆ‘ä»¬ä¸å¯èƒ½é‡‡ç”¨è¿™ä¹ˆç¬¨çš„æ–¹æ³•ï¼Œä¹Ÿä¸å¯èƒ½é€šè¿‡è¿™ç§æ–¹å¼å†³å®šæ–‡ä»¶çš„è½½å…¥é¡ºåºï¼Œå› æ­¤æˆ‘ä»¬è¦æƒ³åŠžæ³•ä¿è¯ fishhook çš„ä»£ç å¿…é¡»æœ€å…ˆæ‰§è¡Œæ‰è¡Œã€‚ &emsp;é‚£å¦‚ä½•åšåˆ°å‘¢ï¼Ÿç”±æ­¤å‰çš„ dyldèƒŒåŽçš„æ•…äº‹&amp;æºç åˆ†æž å¯ä»¥å¾—çŸ¥ï¼Œæœ¬åœ°çš„Frameworkä¸­çš„ç±»ä¸€å®šä¼šæ—©äºŽåŽæ³¨å…¥çš„åº“ï¼ˆåŠ¨æ€åº“ä¾‹å¤–ï¼Œéžè¶Šç‹±è®¾å¤‡æ˜¯æ²¡æœ‰æ’å…¥åŠ¨æ€åº“çš„æƒé™çš„ï¼‰å’Œå¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„ç±»è¿›è¡Œåˆå§‹åŒ–ã€‚æ‰€ä»¥æˆ‘ä»¬å°† fishhook çš„ HOOK æ“ä½œä»£ç ç§»åˆ°è‡ªå»ºçš„ Framework ä¸­å³å¯ï¼š&emsp;è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº† fishhook åè°ƒè¯•çš„åŸºæœ¬æ€è·¯ï¼Œå½“ç„¶ï¼Œä¸Šé¢çš„ä»£ç åªæ˜¯æ€è·¯æ¼”ç¤ºï¼Œå®žé™…å¼€å‘ä¸­ï¼Œåƒmethod_getImplementationã€method_setImplementationç­‰å‡½æ•°éƒ½éœ€è¦ç”¨åŒæ ·çš„æ–¹å¼ä¸€ä¸€ HOOKï¼ŒåŒæ—¶ï¼Œå¦‚æžœè‡ªå·±çš„é¡¹ç›®ä¸­å·²ç»ç”¨åˆ°äº†è¿™äº›å‡½æ•°ï¼Œè¿˜éœ€è¦è®¾è®¡ç›¸åº”çš„ç™½åå•æ–¹æ¡ˆï¼Œå¹¶ä¸”åœ¨æ£€æµ‹åˆ°æ˜¯è¢«ä¸‰æ–¹éžæ³• HOOK æ—¶é€šå¸¸ç›´æŽ¥è°ƒç”¨ exit(0) è¿™ç±»æŽ¥å£ç»ˆæ­¢æŽ‰è¿›ç¨‹ã€‚è¿™äº›ç»†èŠ‚ä»¥åŽè¿˜ä¼šè¯¦ç»†è®²ï¼Œè¿™é‡Œç®—æ˜¯æŠ›ç –å¼•çŽ‰å§ã€‚ &emsp;é‚£å’±ä»¬è¿›å…¥ç¬¬äºŒä¸ªæ­£é¢˜ï¼Œæºç åˆ†æžã€‚ fishhook æºç åˆ†æžï¼ˆä¸€ï¼‰ï¼š åœ¨å†™ fishhook çš„ä»£ç æ—¶ï¼Œç¬¬ä¸€ä»¶äº‹å°±æ˜¯å£°æ˜Žä¸€ä¸ª rebinding ç±»åž‹çš„ç»“æž„ä½“å˜é‡ï¼Œå…¶æºç å¦‚ä¸‹ï¼šå‘½åå¾ˆæ˜“è¯»ï¼Œå…¶ä¸­ç¬¬ä¸‰ä¸ªæˆå‘˜ void **replaced æ˜¯æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå­˜ç€å¦ä¸€ä¸ªæŒ‡é’ˆåœ°å€çš„æŒ‡é’ˆï¼Œåœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ *replaced å–å‡ºçš„å°±æ˜¯ä¸€ä¸ªæŒ‡å‘å…±äº«åº“ä¸­ method_exchangeImplementations å‡½æ•°å®žçŽ°çš„æŒ‡é’ˆï¼Œå†å¯¹å…¶å–å€¼ï¼Œ**replaced å¾—åˆ°çš„å°±æ˜¯å…±äº«åº“ä¸­ method_exchangeImplementations å‡½æ•°å®žçŽ°çš„é¦–åœ°å€ï¼Œè¿˜ä¸æ¸…æ¥šçš„åŒå­¦è¦è‡ªå·±åŽ»è¡¥è¡¥åŸºç¡€äº†ðŸ˜ã€‚ ï¼ˆäºŒï¼‰ï¼š æŒ‰ç»“æž„ä½“æˆå‘˜çš„ç±»åž‹å†™å¥½å£°æ˜Žå’Œå®žçŽ°ä¹‹åŽï¼Œä¸€ä¸€èµ‹å€¼ç»™ç»“æž„ä½“å¯¹åº”çš„æˆå‘˜ï¼Œå†æŠŠè¿™äº›ç»“æž„ä½“æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç„¶åŽè°ƒç”¨é‡ç»‘å®šç¬¦å·å‡½æ•° rebind_symbols(å¦‚æžœç»‘å®šæˆåŠŸè¿”å›ž 0ï¼Œå¦åˆ™è¿”å›ž -1)ï¼Œå¹¶å°†ç»“æž„ä½“æ•°ç»„å’Œæ•°ç»„é•¿åº¦ä½œä¸ºå‚æ•°ä¼ å…¥ï¼šæŽ¥ä¸‹æ¥å’±ä»¬ä¸€æ­¥æ­¥çš„åˆ†æžåœ¨è¿™ä¸ªå‡½æ•°é‡Œå…·ä½“éƒ½åšäº†äº›å•¥ï¼š ç¬¬ä¸€ä»¶äº‹ï¼Œè°ƒç”¨äº†è¿™ä¸ªå‡½æ•°â€“ prepend_rebindingsï¼Œå…¶å…·ä½“å®žçŽ°å¦‚ä¸‹ï¼š&emsp;å’¦ï¼Ÿä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•° &amp;_rebindings_head æ˜¯ä¸ªå•¥ä¸œä¸œï¼Ÿ&emsp;çœ‹æºç ï¼š_rebindings_head è¢«å£°æ˜Žä¸ºä¸€ä¸ªæŒ‡å‘ rebindings_entry ç±»åž‹ç»“æž„ä½“çš„é™æ€æŒ‡é’ˆå˜é‡ï¼Œé‚£ &amp;_rebindings_head å°±æ˜¯å–å‡ºè¿™ä¸ªæŒ‡é’ˆçš„åœ°å€ï¼Œå†çœ‹è¯¥å‡½æ•°çš„å‚æ•°å£°æ˜Ž struct rebindings_entry ** ï¼Œæ²¡é”™ï¼Œè¿™åˆæ˜¯ä¸€ä¸ªæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆã€‚&emsp;ç»“æž„ä½“ rebindings_entry çš„ä¸‰ä¸ªæˆå‘˜åˆ†åˆ«æ˜¯ï¼šæŒ‡å‘ rebinding ç±»åž‹ç»“æž„ä½“çš„æŒ‡é’ˆï¼ˆç”¨æ¥æŒ‡å‘ä¼ å…¥ç»“æž„ä½“æ•°ç»„çš„é¦–å…ƒç´ åœ°å€ï¼‰ã€rebindings_nelï¼šè®°å½•æ­¤æ¬¡è¦é‡ç»‘å®šçš„æ•°é‡ï¼ˆç”¨äºŽå¼€è¾Ÿå¯¹åº”å¤§å°çš„ç©ºé—´ï¼‰ã€æŒ‡å‘ä¸‹ä¸€ä¸ª rebindings_entry ç±»åž‹çš„ç»“æž„ä½“ï¼ˆè®°å½•ä¸‹ä¸€æ¬¡éœ€è¦é‡ç»‘å®šçš„æ•°æ®ï¼‰ï¼Œè¿™å°±æ˜¯å…¸åž‹çš„æ•°æ®ç»“æž„â€”â€”é“¾è¡¨çš„ä¸€ç§å®žçŽ°ã€‚_rebindings_head å°±æ˜¯æŒ‡å‘è¯¥é“¾è¡¨çš„æŒ‡é’ˆã€‚ &emsp;ä¸ºäº†åŠ æ·±ç†è§£ï¼Œæˆ‘ä¸ºä½ ç”»äº†ä¸€å¼  prepend_rebindings å‡½æ•°çš„ä½œç”¨ç¤ºæ„å›¾ï¼š&emsp;ä¸€å¥è¯æ€»ç»“ prepend_rebindings å‡½æ•°çš„ç›®çš„ï¼šå°†æ–°åŠ å…¥çš„ rebindings æ•°ç»„ä¸æ–­çš„æ·»åŠ åˆ° _rebindings_head è¿™ä¸ªé“¾è¡¨çš„å¤´éƒ¨æˆä¸ºæ–°çš„å¤´èŠ‚ç‚¹ã€‚ ç¬¬äºŒä»¶äº‹ï¼Œå¯¹å·²ç»è½½å…¥çš„é•œåƒæ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯åº“ï¼‰é€ä¸€æŸ¥æ‰¾ç›®æ ‡ç¬¦å·è¿›è¡Œ hookã€‚å‰é¢æˆ‘ä»¬å·²ç»çŸ¥é“ fishhook çš„ä»£ç æ‰§è¡Œæ—¶é—´éžå¸¸æ—©ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶è¦ hook çš„åº“å¯èƒ½è¿˜æ²¡å®Œæˆè£…è½½ï¼Œå› æ­¤è¿™é‡Œå¦‚æžœæ˜¯ç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šé€šè¿‡ä¸€ä¸ªå‡½æ•°å¯¹åº“çš„è£…è½½å®Œæˆæ³¨å†Œç›‘å¬å’Œå›žè°ƒçš„æ–¹æ³•ï¼š` extern void _dyld_register_func_for_add_image(void (func)(const struct mach_header mh, intptr_t vmaddr_slide)) OSX_AVAILABLE_STARTING(MAC_10_1, __IPHONE_2_0);`&emsp;æºç æ³¨é‡Šå¦‚ä¸‹å›¾ï¼š&emsp;å½“å›žè°ƒåˆ° _rebind_symbols_for_image æ—¶ï¼Œä¼šå°†å­˜ç€å¾…ç»‘å®šå‡½æ•°ä¿¡æ¯çš„é“¾è¡¨ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œç”¨äºŽç¬¦å·æŸ¥æ‰¾å’Œå‡½æ•°æŒ‡é’ˆçš„äº¤æ¢ï¼Œç¬¬äºŒä¸ªå‚æ•° headeræ˜¯ å½“å‰ image çš„å¤´ä¿¡æ¯ï¼Œç¬¬ä¸‰ä¸ªå‚æ•° slideæ˜¯ ASLR çš„åç§»ï¼š ç¬¬ä¸‰ä»¶äº‹ï¼Œæ ¹æ® fishhook æ˜¯å¦‚ä½•æ ¹æ®å­—ç¬¦ä¸²å¯¹åº”åœ¨ç¬¦å·è¡¨ä¸­çš„æŒ‡é’ˆï¼Œæ‰¾åˆ°å…¶åœ¨å…±äº«åº“çš„å‡½æ•°å®žçŽ° ä¸­çš„å‡ ä¸ªæ­¥éª¤ï¼ŒåŽ»æ‰¾åˆ°ç›®æ ‡ç¬¦å·å¯¹åº”æŒ‡é’ˆæ‰€æŒ‡å‘çš„å‡½æ•°å®žçŽ°åœ°å€ï¼š&emsp;è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒæž¯ç‡¥ï¼Œæ— éžå°±æ˜¯æŒ‰ç…§è§„åˆ™è®¡ç®—å„ç§è¡¨çš„åœ°å€å’ŒæŒ‡é’ˆåœ¨è¡¨ä¸­çš„åç§»é‡ã€‚ æœ€åŽä¸€ä»¶äº‹ï¼Œæ ¹æ®ç®—å¥½çš„ç¬¦å·è¡¨åœ°å€å’Œåç§»é‡ï¼Œæ‰¾åˆ°åœ¨ç¬¦å·è¡¨ä¸­ç”¨äºŽæŒ‡å‘å…±äº«åº“ç›®æ ‡å‡½æ•°çš„æŒ‡é’ˆï¼Œç„¶åŽå°†è¯¥æŒ‡é’ˆçš„å€¼ï¼ˆå³ç›®æ ‡å‡½æ•°çš„åœ°å€ï¼‰èµ‹å€¼ç»™æˆ‘ä»¬çš„ *replacedï¼Œæœ€åŽä¿®æ”¹è¯¥æŒ‡é’ˆçš„å€¼ä¸ºæˆ‘ä»¬çš„ replacementï¼ˆæ–°çš„å‡½æ•°åœ°å€ï¼‰ï¼Œperform_rebinding_with_section çš„æºç å®žçŽ°ï¼š fishhook æºç ä¹‹æ—…ï¼Œå‘Šä¸€æ®µè½&emsp;å¦‚æžœä¸ç®—æ³¨é‡Šï¼Œfishhook çš„æºç å®žçŽ°ä¸€å…± 180+ è¡Œï¼Œé€šè¿‡å¯¹å…¶æºç çš„åˆ†æžï¼Œå¦‚æžœåšåˆ°è¯»æ‡‚å®ƒçš„æ¯ä¸€è¡Œï¼Œæˆ‘ç›¸ä¿¡ä¸ç®¡æ˜¯å¯¹æŒ‡é’ˆçš„ç†è§£å’Œä½¿ç”¨ï¼Œè¿˜æ˜¯å¯¹é“¾è¡¨çš„æ•°æ®ç»“æž„å’Œå®žçŽ°æ–¹å¼ï¼Œä½ éƒ½ä¼šæœ‰æ›´å¥½çš„ç†è§£ã€‚å½“ç„¶ï¼Œä½ å¯¹ MachO çš„æ–‡ä»¶ç»“æž„å’ŒåŠ è½½æœºåˆ¶ï¼Œä¹Ÿæ›´åŠ äº†ç„¶äºŽèƒ¸ï¼ŒåŒæ—¶è¿˜ get äº†åŸºæœ¬çš„å®‰å…¨é˜²æŠ¤æŠ€å·§ã€‚ æ„¿ä½ ä¸è™šæ­¤è¡Œã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[fishhookçš„å®žçŽ°åŽŸç†æµ…æž]]></title>
    <url>%2F2019%2F03%2F04%2Ffishhook%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E6%B5%85%E6%9E%90%2F</url>
    <content type="text"><![CDATA[æ‰“å¼€å§¿åŠ¿å¾ˆé‡è¦&emsp;æ—©äº›æ—¶å€™ï¼ŒiOSä¸­ä¸€æåˆ°â€œé»‘é­”æ³•â€ã€HOOKï¼Œå¾ˆå¤šäººç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„å°±æ˜¯ AOP RunTime MethodSwizzling è¿™äº›ä¸æ˜Žè§‰åŽ‰çš„ä¸œè¥¿ï¼Œå®ƒä»¬çš„åŸºæœ¬ç”¨æ³•å…¶å®žéƒ½ä¸éš¾ï¼ŒçœŸæ­£éš¾çš„æ˜¯å¦‚ä½•åœ¨åˆé€‚çš„åœ°æ–¹ç”¨å¥½å®ƒä»¬ã€‚ &emsp;ä»»ä½•äº‹ç‰©éƒ½æœ‰ä¸¤é¢æ€§ï¼Œè¶Šå¼ºå¤§å…¶å¯èƒ½å¸¦æ¥çš„éšæ‚£ä¹Ÿè¶Šå…·æœ‰æ¯ç­æ€§ã€‚è‹¹æžœæä¾›çš„è¿è¡Œæ—¶æœºåˆ¶å›ºç„¶å¤§æœ‰ç”¨å¤„ï¼Œä½†å¦‚æžœåœ¨é¡¹ç›®ä¸­æ»¥ç”¨ï¼ˆæ›´ä¸æ˜¯ç”¨æ¥å½“åšé¢è¯•æå‡é€¼æ ¼çš„ï¼‰ï¼Œå¾ˆå¤šæ—¶å€™åªä¼šé€‚å¾—å…¶åï¼Œè¯¦ç»†è¯¯åŒºè¯·å‚è€ƒiOSç•Œçš„æ¯’ç˜¤-MethodSwizzlingã€‚ &emsp;å…³äºŽ MethodSwizzling çš„ç”¨æ³•åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ä¹Ÿæœ‰è¿‡è®²è§£ï¼Œè¯·å‚è€ƒMethodSwizzlingçš„å‡ ç§å§¿åŠ¿ã€‚ è¯¥æ–¹å¼æ›´å¤šçš„ç”¨äºŽæ€§èƒ½ç›‘æµ‹ã€ crash çš„å…¼å®¹å’Œä¸ŠæŠ¥ã€åç ´è§£é˜²æŠ¤ç­‰ä¸€äº›å·¥å…·çš„å¼€å‘ä¸­ï¼Œè€Œåœ¨é€†å‘ä¸­ï¼Œåœ¨é¢å¯¹æœ‰ç›¸åº”å®‰å…¨é˜²æŠ¤æŽªæ–½çš„åº”ç”¨æ—¶ï¼Œå…¶ç”¨æ­¦ä¹‹åœ°æ¯”è¾ƒæœ‰é™ã€‚ &emsp;æ— ç‹¬æœ‰å¶ï¼Œâ€œé»‘é­”æ³•â€å¯ä¸åªæœ‰ RunTime ï¼Œä»Šå¤©æˆ‘ä»¬æ¥èŠèŠåœ¨é€†å‘ä¸­å¸¸ç”¨çš„å¦ä¸€ç§HOOKæ–¹å¼ï¼šfishhookã€‚ fishhook èƒŒåŽçš„æ•…äº‹ï¼ˆä¸€ï¼‰å®žçŽ°åŽŸç†&emsp;fishhook æ˜¯ FaceBook å¼€æºçš„å¯ä»¥åŠ¨æ€ä¿®æ”¹ MachO ç¬¦å·è¡¨çš„å·¥å…·ã€‚fishhook çš„å¼ºå¤§ä¹‹å¤„åœ¨äºŽå®ƒå¯ä»¥ HOOK ç³»ç»Ÿçš„é™æ€ C å‡½æ•°ã€‚ &emsp;å¤§å®¶éƒ½çŸ¥é“ OC çš„æ–¹æ³•ä¹‹æ‰€ä»¥å¯ä»¥ HOOK æ˜¯å› ä¸ºå®ƒçš„è¿è¡Œæ—¶ç‰¹æ€§ï¼ŒOC çš„æ–¹æ³•è°ƒç”¨åœ¨åº•å±‚éƒ½æ˜¯ msg_sendï¼ˆid,SELï¼‰çš„å½¢å¼ï¼Œè¿™ä¸ºæˆ‘ä»¬æä¾›äº†äº¤æ¢æ–¹æ³•å®žçŽ°ï¼ˆIMPï¼‰çš„æœºä¼šï¼Œä½† C å‡½æ•°åœ¨ç¼–è¯‘é“¾æŽ¥æ—¶å°±ç¡®å®šäº†å‡½æ•°æŒ‡é’ˆçš„åœ°å€åç§»é‡ï¼ˆOffsetï¼‰ï¼Œè¿™ä¸ªåç§»é‡åœ¨ç¼–è¯‘å¥½çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­æ˜¯å›ºå®šçš„ï¼Œè€Œå¯æ‰§è¡Œæ–‡ä»¶æ¯æ¬¡è¢«é‡æ–°è£…è½½åˆ°å†…å­˜ä¸­æ—¶è¢«ç³»ç»Ÿåˆ†é…çš„èµ·å§‹åœ°å€ï¼ˆåœ¨ lldb ä¸­ç”¨å‘½ä»¤image ListèŽ·å–ï¼‰æ˜¯ä¸æ–­å˜åŒ–çš„ã€‚è¿è¡Œä¸­çš„é™æ€å‡½æ•°æŒ‡é’ˆåœ°å€å…¶å®žå°±ç­‰äºŽä¸Šè¿° Offset + Mach0 æ–‡ä»¶åœ¨å†…å­˜ä¸­çš„é¦–åœ°å€ï¼š &emsp;æ—¢ç„¶ C å‡½æ•°çš„æŒ‡é’ˆåœ°å€æ˜¯ç›¸å¯¹å›ºå®šä¸”ä¸å¯ä¿®æ”¹çš„ï¼Œé‚£ä¹ˆ fishhook åˆæ˜¯æ€Žä¹ˆå®žçŽ° å¯¹ C å‡½æ•°çš„ HOOK å‘¢ï¼Ÿå…¶å®žå†…éƒ¨/è‡ªå®šä¹‰çš„ C å‡½æ•° fishhook ä¹Ÿ HOOK ä¸äº†ï¼Œå®ƒåªèƒ½HOOK Mach-O å¤–éƒ¨ï¼ˆå…±äº«ç¼“å­˜åº“ä¸­ï¼‰çš„å‡½æ•°ã€‚fishhook åˆ©ç”¨äº† MachO çš„åŠ¨æ€ç»‘å®šæœºåˆ¶ï¼ˆä¸æ¸…æ¥šçš„åŒå­¦çœ‹è¿™é‡Œï¼šMachO æ–‡ä»¶ç»“æž„è¯¦è§£ã€dyldèƒŒåŽçš„æ•…äº‹&amp;æºç åˆ†æž ï¼‰ï¼šè‹¹æžœçš„å…±äº«ç¼“å­˜åº“ä¸ä¼šè¢«ç¼–è¯‘è¿›æˆ‘ä»¬çš„ MachO æ–‡ä»¶ï¼Œè€Œæ˜¯åœ¨åŠ¨æ€é“¾æŽ¥æ—¶æ‰åŽ»é‡æ–°ç»‘å®šã€‚è‹¹æžœé‡‡ç”¨äº†PICï¼ˆPosition-independent codeï¼‰æŠ€æœ¯æˆåŠŸè®© C çš„åº•å±‚ä¹Ÿèƒ½æœ‰åŠ¨æ€çš„è¡¨çŽ°ï¼š ç¼–è¯‘æ—¶åœ¨ Mach-O æ–‡ä»¶ _DATA æ®µçš„ç¬¦å·è¡¨ä¸­ä¸ºæ¯ä¸€ä¸ªè¢«å¼•ç”¨çš„ç³»ç»Ÿ C å‡½æ•°å»ºç«‹ä¸€ä¸ªæŒ‡é’ˆï¼ˆ8å­—èŠ‚çš„æ•°æ®ï¼Œæ”¾çš„å…¨æ˜¯0ï¼‰ï¼Œè¿™ä¸ªæŒ‡é’ˆç”¨äºŽåŠ¨æ€ç»‘å®šæ—¶é‡å®šä½åˆ°å…±äº«åº“ä¸­çš„å‡½æ•°å®žçŽ°ã€‚ åœ¨è¿è¡Œæ—¶å½“ç³»ç»Ÿ C å‡½æ•°è¢«ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ä¼šåŠ¨æ€ç»‘å®šä¸€æ¬¡ï¼Œç„¶åŽå°† Mach-O ä¸­çš„ _DATA æ®µç¬¦å·è¡¨ä¸­å¯¹åº”çš„æŒ‡é’ˆï¼ŒæŒ‡å‘å¤–éƒ¨å‡½æ•°ï¼ˆå…¶åœ¨å…±äº«åº“ä¸­çš„å®žé™…å†…å­˜åœ°å€ï¼‰ã€‚ fishhook æ­£æ˜¯åˆ©ç”¨äº† PIC æŠ€æœ¯åšäº†è¿™ä¹ˆä¸¤ä¸ªæ“ä½œï¼š å°†æŒ‡å‘ç³»ç»Ÿæ–¹æ³•ï¼ˆå¤–éƒ¨å‡½æ•°ï¼‰çš„æŒ‡é’ˆé‡æ–°è¿›è¡Œç»‘å®šæŒ‡å‘å†…éƒ¨å‡½æ•°/è‡ªå®šä¹‰ C å‡½æ•°ã€‚ å°†å†…éƒ¨å‡½æ•°çš„æŒ‡é’ˆåœ¨åŠ¨æ€é“¾æŽ¥æ—¶æŒ‡å‘ç³»ç»Ÿæ–¹æ³•çš„åœ°å€ã€‚ è¿™æ ·å°±æŠŠç³»ç»Ÿæ–¹æ³•ä¸Žè‡ªå·±å®šä¹‰çš„æ–¹æ³•è¿›è¡Œäº†äº¤æ¢ï¼Œè¾¾åˆ° HOOK ç³»ç»Ÿ C å‡½æ•°ï¼ˆå…±äº«åº“ä¸­çš„ï¼‰çš„ç›®çš„ã€‚ ï¼ˆäºŒï¼‰ç”¨æ±‡ç¼–è§£æžè¿‡ç¨‹&emsp;ä¸ºäº†æ›´å¥½çš„ç†è§£ fishhook æ˜¯å¦‚ä½• HOOK ç³»ç»Ÿçš„ C å‡½æ•°ï¼Œæˆ‘ä»¬ä»¥ HOOK NSLog ä¸ºä¾‹ï¼Œä»Žæ±‡ç¼–ç€æ‰‹æ¥ä¸€æ­¥æ­¥åŽ»åˆ†æžï¼Œä¸ºå¤§å®¶æ‰’å¼€ fishhook å®žçŽ° HOOK ç³»ç»Ÿ NSLog çš„å…¨è¿‡ç¨‹ã€‚123æ³¨ï¼šå¯¹äºŽéžæ‡’åŠ è½½ç¬¦å·è¡¨ï¼Œdyld ä¼šåœ¨åŠ¨æ€é“¾æŽ¥æ—¶å°±é“¾æŽ¥åŠ¨æ€åº“ å¯¹äºŽæ‡’åŠ è½½ç¬¦å·è¡¨ï¼Œdyld ä¼šåœ¨è¿è¡Œæ—¶å‡½æ•°ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨æ—¶åŠ¨æ€ç»‘å®šä¸€æ¬¡ NSLog åœ¨æ‡’åŠ è½½è¡¨ä¸­ 1.éªŒè¯ç³»ç»Ÿçš„åŠ¨æ€ç»‘å®šï¼š&emsp;æ–°å»ºä¸€ä¸ªç©ºå·¥ç¨‹ï¼Œå†™ä¸‹è¿™ä¸¤è¡Œä»£ç ï¼š &emsp;ç¼–è¯‘ä¸€ä¸‹å·¥ç¨‹ï¼Œåœ¨ç›®å½•Productsä¸‹å°† .appå†…çš„å¯æ‰§è¡Œæ–‡ä»¶æ‹·å‡ºç”¨ MachOView æ‰“å¼€ï¼šè®°ä¸‹0x3028è¿™ä¸ªåç§»å€¼ï¼Œè¿™å°±æ˜¯ç”¨äºŽé‡å®šå‘åˆ°å…±äº«åº“ä¸­çš„é‚£ä¸ªæŒ‡é’ˆç›¸å¯¹äºŽ MachOæ–‡ä»¶çš„åç§»é‡ã€‚ åœ¨ä¸¤ä¸ª NSLog å¤„åˆ†åˆ«åŠ ä¸Šæ–­ç‚¹ï¼Œå°†å·¥ç¨‹ Run èµ·æ¥ï¼ŒæŠŠ Debug -&gt; Debug Workflow -&gt; Always Show Disassembly å‹¾é€‰ä¸Šï¼Œç”¨äºŽæŸ¥çœ‹æ±‡ç¼–ä¿¡æ¯ï¼Œæ–­ç‚¹æ–­ä½åŽèŽ·å– MachO åœ¨å†…å­˜ä¸­çš„é¦–åœ°å€ï¼š0x3028+0x000000010b0f7000 å°±æ˜¯ç”¨äºŽé‡å®šå‘åˆ°å…±äº«åº“ä¸­çš„é‚£ä¸ªæŒ‡é’ˆçš„å†…å­˜åœ°å€ã€‚æ­¤æ—¶æˆ‘ä»¬æŸ¥çœ‹è¯¥åœ°å€æ˜¯å¦å·²ç»è¢«é‡å®šå‘ï¼š æ‹¿åˆ°è¯¥æŒ‡é’ˆå½“å‰ä¿å­˜çš„å€¼ï¼ŒiOS çš„ CPU æ˜¯å°ç«¯åºï¼Œå½“å‰æœºåž‹ä¸º 64 ä½ CPUï¼Œæ‰€ä»¥å€’åºè¯» 8 ä¸ªå­—èŠ‚å°±æ˜¯æŒ‡é’ˆçš„å€¼ï¼š0x010b0f89a0 dis -s æ˜¯åæ±‡ç¼–å‘½ä»¤ï¼Œæˆ‘ä»¬å‘çŽ°æ­¤æ—¶è¯¥æŒ‡é’ˆæŒ‡å‘çš„å‡½æ•°æ­£åœ¨è°ƒç”¨ç³»ç»ŸåŠ¨æ€ç»‘å®šçš„å‡½æ•° è¿›ä¸€æ­¥æŸ¥çœ‹è°ƒç”¨å‡½æ•°è¯¦ç»†ä¿¡æ¯ï¼šlibdyld.dylib`dyld_stub_binder è¿™æ˜¯åœ¨å¹²å˜›ï¼Ÿæ²¡é”™ï¼Œè¿™å°±æ˜¯ç¬¬ä¸€æ¬¡è°ƒç”¨ NSLog æ—¶ç³»ç»ŸåŽ»é‡æ–°ç»‘å®šä½æ‡’åŠ è½½ç¬¦å·è¡¨ä¸­ NSLog å¯¹åº”çš„æŒ‡é’ˆæ‰€æŒ‡å‘çš„ä½ç½®ã€‚ æŽ¥ä¸‹æ¥æˆ‘ä»¬è¿‡æŽ‰ç¬¬ä¸€æ¬¡æ–­ç‚¹ï¼Œè®©æ–­ç‚¹æ–­åœ¨ç¬¬äºŒä¸ª NSLog å¤„ï¼Œå†æ¬¡æŸ¥çœ‹ç¬¦å·è¡¨ä¸­è¯¥æŒ‡é’ˆï¼ˆä¾ç„¶æ˜¯ 0x3028+0x000000010b0f7000 è¿™ä¸ªåœ°å€ï¼‰æ‰€æŒ‡å‘çš„åœ°å€ï¼Œ&emsp;æˆ‘ä»¬å‘çŽ°ï¼Œå®ƒæŒ‡å‘çš„åœ°å€ç”±ä¹‹å‰çš„ 0x010b0f89a0å˜ä¸º 0x010b491276 äº†ï¼Œå¯¹åº”çš„å‡½æ•°ä¹Ÿç”±ä¹‹å‰çš„ dyld_stub_binder å˜ä¸º NSLog ï¼Œè¿™æ„å‘³ç€è¯¥å‡½æ•°çš„åŠ¨æ€ç»‘å®šå·²ç»å®Œæˆã€‚ä»¥ä¸Šï¼Œæˆ‘ä»¬éªŒè¯äº† iOS çš„åŠ¨æ€ç»‘å®šå…¨è¿‡ç¨‹ã€‚ 2.éªŒè¯ fishhook çš„é‡ç»‘å®šï¼š&emsp;æˆ‘ä»¬å°† fishhookæ–‡ä»¶æ‹–å…¥å·¥ç¨‹ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªç®€å•çš„ç»‘å®šï¼šæ³¨æ„ï¼šä¿®æ”¹æ–‡ä»¶åŽé‡æ–°ç¼–è¯‘çš„ MachO æ–‡ä»¶ï¼Œç¬¦å·è¡¨é‡Œçš„æŒ‡é’ˆåç§»å€¼å¯èƒ½ä¼šæ”¹å˜ï¼Œé‡æ–°è¿è¡Œçš„ç¨‹åºå†…å­˜é¦–åœ°å€ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦ä½ é‡æ–°æ‹¿åˆ°å®ƒä»¬è®¡ç®—å¾—å‡ºæŒ‡é’ˆæ–°çš„å†…å­˜åœ°å€ã€‚ æˆ‘ä»¬è¿è¡Œèµ·æ¥ä¹‹åŽç‚¹å‡»å±å¹•è¿›å…¥ä¸Šå›¾æ‰€ç¤ºæ–­ç‚¹ï¼ŒæŸ¥çœ‹ç¬¦å·è¡¨ä¸­åŽŸæœ¬æŒ‡å‘ç³»ç»Ÿ NSLog çš„æŒ‡é’ˆæŒ‡å‘ï¼šæ­¤æ—¶è¯¥æŒ‡é’ˆçš„æŒ‡å‘è¢«ä¿®æ”¹ä¸ºæˆ‘ä»¬è‡ªå®šä¹‰çš„å‡½æ•° myNslog äº†ï¼Œè€Œå°†ç³»ç»Ÿé‡å®šä½çš„å¤–éƒ¨å‡½æ•°åœ°å€ä¿å­˜åˆ°äº†å¦ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°æŒ‡é’ˆ sys_nslog ä¸­ï¼šä»¥ä¸Šï¼Œæˆ‘ä»¬é€šè¿‡æ–­ç‚¹åˆ†æžæ±‡ç¼–ä¿¡æ¯ï¼ŒéªŒè¯äº† fishhook å®žçŽ° HOOK ç³»ç»Ÿå¤–éƒ¨å‡½æ•°çš„æ€è·¯ã€‚æŽ¥ä¸‹æ¥æˆ‘ä»¬ç»“åˆ fishhook çš„å®˜æ–¹è¯´æ˜Žçœ‹å®ƒæ˜¯å¦‚ä½•æ ¹æ®å­—ç¬¦ä¸²ï¼ˆæ–¹æ³•åï¼‰æ‰¾åˆ°å¯¹åº”æŒ‡é’ˆåœ¨ç¬¦å·è¡¨ä¸­çš„åç§»å€¼çš„ã€‚ ï¼ˆä¸‰ï¼‰fishhook æ˜¯å¦‚ä½•æ ¹æ®å­—ç¬¦ä¸²å¯¹åº”åœ¨ç¬¦å·è¡¨ä¸­çš„æŒ‡é’ˆï¼Œæ‰¾åˆ°å…¶åœ¨å…±äº«åº“çš„å‡½æ•°å®žçŽ°çš„ï¼Ÿfishhook å®˜æ–¹ç»™äº†è¿™å¼ å›¾ï¼šè¿™å¼ å›¾ä¸»è¦åœ¨æè¿°å¦‚ä½•ç”±ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚ â€œNSLogâ€ï¼‰ï¼Œè·Ÿç€å®ƒåœ¨ MachO æ–‡ä»¶çš„æ‡’åŠ è½½è¡¨ä¸­å¯¹åº”çš„æŒ‡é’ˆï¼Œä¸€æ­¥æ­¥çš„æ‰¾åˆ°è¯¥æŒ‡é’ˆæŒ‡å‘çš„å‡½æ•°å®žçŽ°åœ°å€ï¼Œå¤§è‡´æ­¥éª¤å¦‚ä¸‹ï¼š åœ¨ Lazy Symbol Pointers ä¸­è¯¥å­—ç¬¦ä¸²çš„é¡ºåºå°±æ˜¯å…¶åœ¨ Dynamic Symbols Table -&gt; Indirect Symbols è¡¨ä¸­çš„ä½ç½®ï¼ˆè¿™é‡Œæ˜¯ç¬¬ä¸€ä¸ªï¼‰åœ¨å®žé™…è®¡ç®—åœ°å€ä¸­ç”¨åˆ°äº† Load Commands ä¸­å¯¹åº”å¤´ä¿¡æ¯çš„ Reserved1 çš„ value ï¼ˆsectionåŸºåœ°å€+ åç§»é‡ value = å…¶åœ¨ Indirect Symbols ä¸­å¯¹åº”çš„ offsetï¼‰:ä¸‹ç¯‡æºç åˆ†æžæœ‰è¯¦ç»†è¯´æ˜Žã€‚ Dynamic Symbols Table -&gt; Indirect Symbols è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå¯¹åº”çš„ Data å€¼ï¼ˆ0x7A=122ï¼‰å°±æ˜¯å…¶åœ¨Symbols Table -&gt; Symbols ä¸­çš„ç´¢å¼•ã€‚ åœ¨ Symbols Table -&gt; Symbols ä¸­ç´¢å¼•ä¸º 122 çš„ä½ç½®å¯¹åº”çš„ Data = 0x9Bï¼š ä¸Šè¡¨ä¸­çš„ Dataï¼ˆ0x9Bï¼‰ + String Tableçš„èµ·å§‹åœ°å€ï¼ˆ0x4F04ï¼‰å°±æ˜¯ç›®æ ‡å‡½æ•°å®žçŽ°çš„åœ°å€ï¼š æ€»ç»“&emsp;ä»Šå¤©æˆ‘ä»¬ç»“åˆ iOS çš„å…±äº«ç¼“å­˜åº“ä¸­é‡‡ç”¨çš„ PIC æŠ€æœ¯ï¼Œä»‹ç»äº† fishhook å¯¹ç³»ç»Ÿå¤–éƒ¨å‡½æ•°å®žçŽ° HOOK åŸºæœ¬åŽŸç†å’Œå…·ä½“è¿‡ç¨‹ï¼Œå¹¶é€šè¿‡åæ±‡ç¼–å‘½ä»¤ä¸€ä¸€éªŒè¯äº† iOS çš„åŠ¨æ€ç»‘å®šè¿‡ç¨‹å’Œ fishhook çš„é‡æ–°ç»‘å®šæœºåˆ¶ï¼Œæœ€åŽæŠŠ fishhook åœ¨ç¬¦å·è¡¨ä¸­æ ¹æ®ç¬¦å·æŒ‡é’ˆå¯»æ‰¾å‡½æ•°å®žçŽ°çš„æ­¥éª¤åšäº†æ¼”ç¤ºã€‚ æ„¿ä½ æœ‰æ‰€æ”¶èŽ·ï¼ æ°´å¹³æœ‰é™ï¼Œè¯·å¤šæŒ‡æ•™~ &emsp;é‰´äºŽç¯‡å¹…è¿‡é•¿ä¼šå½±å“å¤§å®¶çš„é˜…è¯»ä½“éªŒï¼Œfishhook çš„æºç åˆ†æžä¸Žåº”ç”¨åœºæ™¯ä»¥åŠå®‰å…¨é˜²æŠ¤çš„åˆ†äº«ï¼Œæˆ‘ä»¬è¿™é‡Œç»§ç»­]]></content>
  </entry>
  <entry>
    <title><![CDATA[dyldèƒŒåŽçš„æ•…äº‹&æºç åˆ†æž]]></title>
    <url>%2F2019%2F02%2F25%2Fdyld%E8%83%8C%E5%90%8E%E7%9A%84%E6%95%85%E4%BA%8B%26%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯dyldï¼Ÿ&emsp;dyldï¼ˆthe dynamic link editorï¼‰æ˜¯è‹¹æžœçš„åŠ¨æ€é“¾æŽ¥å™¨ï¼Œæ˜¯è‹¹æžœæ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå½“ç³»ç»Ÿå†…æ ¸åšå¥½å¯åŠ¨ç¨‹åºçš„å‡†å¤‡å·¥ä½œä¹‹åŽï¼Œä½™ä¸‹çš„å·¥ä½œä¼šäº¤ç»™dyldæ¥è´Ÿè´£å¤„ç†ã€‚é‚£å®ƒå­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿå®ƒåˆå…·ä½“éƒ½è´Ÿè´£åšäº›ä»€ä¹ˆå‘¢ï¼Ÿè¿™ä¸€ç¯‡æˆ‘ä»¬ä¸€èµ·æ¥ä¸€æŽ¢ç©¶ç«Ÿã€‚å‰æ–¹é•¿ç¯‡é¢„è­¦~ dyldå­˜åœ¨çš„æ„ä¹‰&emsp;å­˜åœ¨å³åˆç†ï¼Œä½†æˆ‘ä»¬è¦å¼„æ¸…æ¥šå…¶åˆç†æ€§æ‰€åœ¨ã€‚å…ˆä»Žå¯æ‰§è¡Œæ–‡ä»¶æ˜¯å¦‚ä½•ç”±æºç ç”Ÿæˆçš„è¯´èµ·ã€‚ 1.å¯æ‰§è¡Œæ–‡ä»¶çš„ç”Ÿæˆâ€“é™æ€é“¾æŽ¥ã€‚å…ˆçœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š 1234567#include&lt;stdio.h&gt;int main()&#123; printf(&quot;Hello World\n&quot;); return 0;&#125; &emsp;å‡è®¾è¿™æ®µä»£ç æºæ–‡ä»¶ä¸ºhello.cï¼Œæˆ‘ä»¬è¾“å…¥æœ€ç®€å•çš„å‘½ä»¤ï¼š$gcc hello.c $./a.outï¼Œé‚£ä¹ˆç»ˆç«¯ä¼šè¾“å‡ºï¼šHello Worldï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œäº‹å®žä¸Šç»è¿‡äº†å››ä¸ªæ­¥éª¤ï¼šé¢„å¤„ç†ã€ç¼–è¯‘ã€æ±‡ç¼–å’Œé“¾æŽ¥ã€‚æˆ‘ä»¬æ¥å…·ä½“çœ‹æ¯ä¸€æ­¥éƒ½åšäº†äº›ä»€ä¹ˆã€‚ &emsp;é¢„ç¼–è¯‘çš„ä¸»è¦å¤„ç†è§„åˆ™å¦‚ä¸‹ï¼š åˆ é™¤æ‰€æœ‰#defineï¼Œå¹¶å°†æ‰€æœ‰å®å®šä¹‰å±•å¼€ å°†è¢«åŒ…å«çš„æ–‡ä»¶æ’å…¥åˆ°é¢„ç¼–è¯‘æŒ‡ä»¤(#include)æ‰€åœ¨ä½ç½®ï¼ˆè¿™ä¸ªè¿‡ç¨‹æ˜¯é€’å½’çš„ï¼‰ åˆ é™¤æ‰€æœ‰æ³¨é‡Šï¼š// ã€/ /ç­‰ æ·»åŠ è¡Œå·å’Œæ–‡ä»¶åæ ‡è¯†ï¼Œä»¥ä¾¿äºŽç¼–è¯‘æ—¶ç¼–è¯‘å™¨äº§ç”Ÿè°ƒè¯•ç”¨çš„è¡Œå·ä¿¡æ¯åŠç¼–è¯‘æ—¶èƒ½å¤Ÿæ˜¾ç¤ºè­¦å‘Šå’Œé”™è¯¯çš„æ‰€åœ¨è¡Œå· ä¿ç•™æ‰€æœ‰çš„#pragmaç¼–è¯‘å™¨æŒ‡ä»¤ï¼Œå› ä¸ºç¼–è¯‘å™¨é¡»è¦ä½¿ç”¨å®ƒä»¬ ç»“åˆä¸Šè¿°è§„åˆ™ï¼Œå½“æˆ‘ä»¬æ— æ³•åˆ¤æ–­å®å®šä¹‰æ˜¯å¦æ­£ç¡®æˆ–è€…å¤´æ–‡ä»¶æ˜¯å¦åŒ…å«æ—¶å¯ä»¥æŸ¥çœ‹é¢„ç¼–è¯‘åŽçš„æ–‡ä»¶æ¥ç¡®å®šé—®é¢˜ï¼Œé¢„ç¼–è¯‘çš„è¿‡ç¨‹ç›¸å½“äºŽå¦‚ä¸‹å‘½ä»¤ï¼š$gcc -E hello.c -o hello.i æˆ–$cpp hello.c &gt; hello.i &emsp;ç¼–è¯‘çš„è¿‡ç¨‹å°±æ˜¯æŠŠé¢„å¤„ç†å®Œçš„æ–‡ä»¶è¿›è¡Œä¸€äº›åˆ—è¯æ³•åˆ†æžã€è¯­æ³•åˆ†æžã€è¯­ä¹‰åˆ†æžåŠä¼˜åŒ–åŽç”Ÿäº§ç›¸åº”çš„æ±‡ç¼–ä»£ç æ–‡ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹å¾€å¾€æ˜¯æˆ‘ä»¬æ•´ä¸ªç¨‹åºæž„å»ºçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œä¹Ÿæ˜¯æœ€å¤æ‚çš„éƒ¨åˆ†ä¹‹ä¸€ï¼Œç¼–è¯‘çš„å…·ä½“æ­¥éª¤æ¶‰åŠåˆ°ç¼–è¯‘åŽŸç†ç­‰å†…å®¹ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚æˆ‘ä»¬ä½¿ç”¨å‘½ä»¤ï¼š$gcc -S hello.c -o hello.så¯ä»¥å¾—åˆ°æ±‡ç¼–è¾“å‡ºæ–‡ä»¶hello.sã€‚ &emsp;å¯¹äºŽ C è¯­è¨€çš„ä»£ç æ¥è¯´ï¼Œè¿™ä¸ªé¢„ç¼–è¯‘å’Œç¼–è¯‘çš„ç¨‹åºæ˜¯ cclï¼Œä½†æ˜¯å¯¹äºŽ C++ æ¥è¯´ï¼Œå¯¹åº”çš„ç¨‹åºæ˜¯ ccplusï¼›Objective-C çš„æ˜¯ ccobjcï¼›Java æ˜¯ jclã€‚æ‰€ä»¥å®žé™…ä¸Š gcc è¿™ä¸ªå‘½ä»¤åªæ˜¯è¿™äº›åŽå°ç¨‹åºçš„åŒ…è£…ï¼Œå®ƒä¼šæ ¹æ®ä¸åŒçš„å‚æ•°è¦æ±‚åŽ»è°ƒç”¨é¢„ç¼–è¯‘ç¼–è¯‘ç¨‹åº cclã€æ±‡ç¼–å™¨ asã€é“¾æŽ¥å™¨ ldã€‚ &emsp;æ±‡ç¼–å™¨æ˜¯å°†æ±‡ç¼–ä»£ç è½¬å˜æˆæœºå™¨å¯ä»¥æ‰§è¡Œçš„æŒ‡ä»¤ï¼Œæ¯ä¸€ä¸ªæ±‡ç¼–è¯­å¥å‡ ä¹Žéƒ½å¯¹åº”ä¸€æ¡æœºå™¨æŒ‡ä»¤ã€‚æ‰€ä»¥æ±‡ç¼–å™¨çš„æ±‡ç¼–è¿‡ç¨‹ç›¸å¯¹äºŽç¼–è¯‘å™¨æ¥è®²æ¯”è¾ƒç®€å•ï¼Œå®ƒæ²¡æœ‰å¤æ‚çš„è¯­æ³•ï¼Œä¹Ÿæ²¡æœ‰è¯­ä¹‰ï¼Œä¹Ÿä¸éœ€è¦åšæŒ‡ä»¤ä¼˜åŒ–ï¼Œåªæ˜¯æ ¹æ®æ±‡ç¼–æŒ‡ä»¤å’Œæœºå™¨æŒ‡ä»¤çš„å¯¹ç…§è¡¨ä¸€ä¸€ç¿»è¯‘å°±å¯ä»¥äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨å‘½ä»¤ï¼š$as hello.s -o hello.o æˆ–$gcc -c hello.s -o hello.oæ¥å®Œæˆæ±‡ç¼–ï¼Œè¾“å‡ºç›®æ ‡æ–‡ä»¶ï¼ˆObject Fileï¼‰ï¼šhello.oã€‚ &emsp;é“¾æŽ¥æ˜¯è®©å¾ˆå¤šäººè´¹è§£çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œä¸ºä»€ä¹ˆæ±‡ç¼–å™¨ä¸ç›´æŽ¥è¾“å‡ºå¯æ‰§è¡Œæ–‡ä»¶è€Œæ˜¯ä¸€ä¸ªç›®æ ‡æ–‡ä»¶å‘¢ï¼Ÿé“¾æŽ¥è¿‡ç¨‹åˆ°åº•åŒ…å«äº†ä»€ä¹ˆå†…å®¹ï¼Ÿä¸ºä»€ä¹ˆè¦é“¾æŽ¥ï¼Ÿ &emsp;è¿™å°±è¦æ‰¯ä¸€ä¸‹è®¡ç®—æœºç¨‹åºå¼€å‘çš„åŽ†å²äº†ï¼Œæœ€æ—©çš„æ—¶å€™ç¨‹åºå‘˜æ˜¯åœ¨çº¸å¸¦ä¸Šç”¨æœºå™¨è¯­è¨€é€šè¿‡æ‰“å­”æ¥å®žçŽ°ç¨‹åºçš„ï¼Œè¿žæ±‡ç¼–è¯­è¨€éƒ½æ²¡æœ‰ï¼Œæ¯å½“ç¨‹åºä¿®æ”¹çš„æ—¶å€™ï¼Œä¿®æ”¹çš„æŒ‡ä»¤åŽé¢çš„ä½ç½®è¦ç›¸åº”çš„å‘ç”Ÿç§»åŠ¨ï¼Œç¨‹åºå‘˜è¦äººå·¥è®¡ç®—æ¯ä¸ªå­ç¨‹åºæˆ–è·³è½¬çš„ç›®æ ‡åœ°å€ï¼Œè¿™ä¸ªè¿‡ç¨‹å«é‡å®šä½ã€‚å¾ˆæ˜¾ç„¶è¿™æ ·ä¿®æ”¹ç¨‹åºçš„ä»£ä»·éšç€ç¨‹åºçš„å¢žå¤§ä¼šå˜å¾—é«˜ä¸å¯æ”€ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“å‡ºé”™ï¼ŒäºŽæ˜¯æœ‰å…ˆé©±å‘æ˜Žäº†æ±‡ç¼–è¯­è¨€ï¼Œæ±‡ç¼–è¯­è¨€ä½¿ç”¨æŽ¥è¿‘äººç±»çš„å„ç§ç¬¦å·å’Œæ ‡è®°æ¥å¸®åŠ©è®°å¿†ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œè¿™ç§ç¬¦å·ä½¿å¾—äººä»¬ä»Žå…·ä½“çš„æŒ‡ä»¤åœ°å€ä¸­é€æ­¥è§£æ”¾å‡ºæ¥ï¼Œå½“äººä»¬ä½¿ç”¨è¿™ç§ç¬¦å·å‘½åå­ç¨‹åºæˆ–è€…è·³è½¬ç›®æ ‡ä»¥åŽï¼Œä¸ç®¡ç›®æ ‡æŒ‡ä»¤ä¹‹å‰ä¿®æ”¹äº†å¤šå°‘æŒ‡ä»¤å¯¼è‡´ç›®æ ‡æŒ‡ä»¤çš„åœ°å€å‘ç”Ÿäº†å˜åŒ–ï¼Œæ±‡ç¼–å™¨åœ¨æ¯æ¬¡æ±‡ç¼–ç¨‹åºçš„æ—¶å€™éƒ½ä¼šé‡æ–°è®¡ç®—ç›®æ ‡æŒ‡ä»¤çš„åœ°å€ï¼Œç„¶åŽæŠŠæ‰€æœ‰å¼•ç”¨åˆ°è¯¥æŒ‡ä»¤çš„æŒ‡ä»¤ä¿®æ­£åˆ°æ­£ç¡®çš„åœ°å€ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦äººå·¥å‚ä¸Žã€‚ &emsp;æœ‰äº†æ±‡ç¼–è¯­è¨€ï¼Œç”Ÿäº§åŠ›æžå¤§åœ°æé«˜äº†ï¼Œéšä¹‹è€Œæ¥çš„æ˜¯è½¯ä»¶çš„è§„æ¨¡ä¸Žæ—¥ä¿±å¢žï¼Œä»£ç é‡å¿«é€Ÿè†¨èƒ€ï¼Œå¯¼è‡´äººä»¬å¼€å§‹è€ƒè™‘å°†ä¸åŒåŠŸèƒ½çš„ä»£ç ä»¥ä¸€å®šçš„æ–¹å¼ç»„ç»‡èµ·æ¥ï¼Œä½¿å¾—æ›´åŠ å®¹æ˜“é˜…è¯»å’Œç†è§£ï¼Œæ›´ä¾¿äºŽæ—¥åŽä¿®æ”¹å’Œå¤ç”¨ã€‚è‡ªç„¶è€Œç„¶çš„ï¼Œæˆ‘ä»¬å¼€å§‹ä¹ æƒ¯ç”¨è‹¥å¹²ä¸ªå˜é‡å’Œå‡½æ•°ç»„æˆä¸€ä¸ªæ¨¡å—ï¼ˆæ¯”å¦‚ç±»ï¼‰ï¼Œç„¶åŽç”¨ç›®å½•ç»“æž„æ¥ç»„ç»‡è¿™äº›æºä»£ç æ–‡ä»¶ï¼Œåœ¨ä¸€ä¸ªç¨‹åºè¢«å¤šä¸ªæ¨¡å—åˆ†å‰²ä»¥åŽï¼Œè¿™äº›æ¨¡å—æœ€ç»ˆå¦‚ä½•ç»„åˆæˆä¸€ä¸ªå•ä¸€çš„ç¨‹åºæ˜¯é¡»è¦è§£å†³çš„é—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜å½’æ ¹ç»“åº•æ˜¯æ¨¡å—ä¹‹é—´å¦‚ä½•é€šä¿¡çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è®¿é—®å‡½æ•°éœ€è¦çŸ¥é“å‡½æ•°çš„åœ°å€ï¼Œè®¿é—®å˜é‡éœ€è¦çŸ¥é“å˜é‡çš„åœ°å€ï¼Œè¿™ä¸¤ä¸ªé—®é¢˜éƒ½æ˜¯é€šè¿‡æ¨¡å—é—´ç¬¦å·çš„å¼•ç”¨çš„æ–¹å¼æ¥è§£å†³ã€‚è¿™ä¸ªæ¨¡å—é—´ç¬¦å·å¼•ç”¨æ‹¼æŽ¥çš„è¿‡ç¨‹å°±æ˜¯é“¾æŽ¥ã€‚ &emsp;é“¾æŽ¥çš„ä¸»è¦å†…å®¹å°±æ˜¯æŠŠå„ä¸ªæ¨¡å—ä¹‹é—´ç›¸äº’å¼•ç”¨çš„éƒ¨åˆ†å¤„ç†å¥½ï¼Œä½¿å¾—å„ä¸ªæ¨¡å—ä¹‹é—´èƒ½å¤Ÿæ­£ç¡®åœ°è¡”æŽ¥ã€‚æœ¬è´¨ä¸Šè·Ÿå‰é¢æè¿°çš„â€œç¨‹åºå‘˜äººå·¥è°ƒæ•´åœ°å€â€æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œåªä¸è¿‡çŽ°ä»£çš„é«˜çº§è¯­è¨€çš„è¯¸å¤šç‰¹æ€§å’ŒåŠŸèƒ½ï¼Œä½¿å¾—ç¼–è¯‘å™¨ã€é“¾æŽ¥å™¨æ›´ä¸ºå¤æ‚ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ã€‚é“¾æŽ¥è¿‡ç¨‹åŒ…æ‹¬äº†åœ°å€å’Œç©ºé—´åˆ†é…ã€ç¬¦å·å†³è®®ï¼ˆä¹Ÿå«â€œç¬¦å·/åœ°å€ç»‘å®šâ€ï¼Œâ€œå†³è®®â€æ›´å€¾å‘äºŽé™æ€é“¾æŽ¥ï¼Œè€Œâ€œç»‘å®šâ€æ›´å€¾å‘äºŽåŠ¨æ€é“¾æŽ¥ï¼Œå³é€‚ç”¨èŒƒå›´çš„åŒºåˆ«ï¼‰å’Œé‡å®šä½ï¼Œé“¾æŽ¥å™¨å°†ç»è¿‡æ±‡ç¼–å™¨ç¼–è¯‘æˆçš„æ‰€æœ‰ç›®æ ‡æ–‡ä»¶å’Œåº“è¿›è¡Œé“¾æŽ¥å½¢æˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè€Œæœ€å¸¸è§çš„åº“å°±æ˜¯è¿è¡Œæ—¶åº“ï¼ˆRunTime Libraryï¼‰ï¼Œå®ƒæ˜¯æ”¯æŒç¨‹åºè¿è¡Œçš„åŸºæœ¬å‡½æ•°çš„é›†åˆã€‚åº“å…¶å®žå°±æ˜¯ä¸€ç»„æœ€å¸¸ç”¨çš„ä»£ç ç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶åŽçš„æ‰“åŒ…å­˜æ”¾ã€‚ &emsp;çŸ¥é“äº†å¯æ‰§è¡Œæ–‡ä»¶æ˜¯å¦‚ä½•ç”Ÿæˆçš„ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹å®ƒåˆæ˜¯å¦‚ä½•è¢«è£…è½½è¿›ç³»ç»Ÿä¸­è¿è¡Œèµ·æ¥çš„ã€‚ 2.å¯æ‰§è¡Œæ–‡ä»¶çš„è£…è½½ä¸ŽåŠ¨æ€é“¾æŽ¥ã€‚è£…è½½&emsp;è£…è½½ä¸ŽåŠ¨æ€é“¾æŽ¥å…¶å®žå†…å®¹ç‰¹åˆ«å¤šï¼Œå¾ˆå¤šç»†èŠ‚éœ€è¦å¯¹è®¡ç®—æœºåº•å±‚æœ‰éžå¸¸æ‰Žå®žçš„ç†è§£ï¼Œé‰´äºŽç›®å‰æˆ‘çš„èƒ½åŠ›å°šæµ…ï¼Œè¿™é‡Œåªåšç²—ç•¥çš„ä»‹ç»ï¼ŒæŽ¨èæœ‰å…´è¶£çš„åŒå­¦è´­ä¹°ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»â€“é“¾æŽ¥ã€è£…è½½ä¸Žåº“ã€‹è¿™æœ¬ä¹¦äº†è§£æ›´å¤šç»†èŠ‚ã€‚ &emsp;å¯æ‰§è¡Œæ–‡ä»¶(ç¨‹åº)æ˜¯ä¸€ä¸ªé™æ€çš„æ¦‚å¿µï¼Œåœ¨è¿è¡Œä¹‹å‰å®ƒåªæ˜¯ç¡¬ç›˜ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶ï¼›è€Œè¿›ç¨‹æ˜¯ä¸€ä¸ªåŠ¨æ€çš„æ¦‚å¿µï¼Œå®ƒæ˜¯ç¨‹åºè¿è¡Œæ—¶çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬çŸ¥é“æ¯ä¸ªç¨‹åºè¢«è¿è¡Œèµ·æ¥åŽï¼Œå®ƒä¼šæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œè¿™ä¸ªåœ°å€ç©ºé—´å¤§å°çš„ä¸Šé™æ˜¯ç”±è®¡ç®—æœºçš„ç¡¬ä»¶ï¼ˆCPUçš„ä½æ•°ï¼‰å†³å®šçš„ï¼Œæ¯”å¦‚32ä½çš„å¤„ç†å™¨ç†è®ºæœ€å¤§è™šæ‹Ÿç©ºé—´åœ°å€ä¸º0~2^32-1ã€‚å³0x00000000~0xFFFFFFFFï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬çš„ç¨‹åºè¿è¡Œåœ¨ç³»ç»Ÿä¸Šæ—¶æ˜¯ä¸å¯èƒ½ä»»æ„ä½¿ç”¨å…¨éƒ¨çš„è™šæ‹Ÿç©ºé—´çš„ï¼Œæ“ä½œç³»ç»Ÿä¸ºäº†è¾¾åˆ°ç›‘æŽ§ç¨‹åºè¿è¡Œç­‰ä¸€ç³»åˆ—ç›®çš„ï¼Œè¿›ç¨‹çš„è™šæ‹Ÿç©ºé—´éƒ½åœ¨æ“ä½œç³»ç»Ÿçš„æŽŒæ¡ä¹‹ä¸­ï¼Œä¸”åœ¨æ“ä½œç³»ç»Ÿä¸­ä¼šåŒæ—¶è¿è¡Œç€å¤šä¸ªè¿›ç¨‹ï¼Œå®ƒä»¬å½¼æ­¤ä¹‹é—´çš„è™šæ‹Ÿåœ°å€ç©ºé—´æ˜¯éš”ç¦»çš„ï¼Œå¦‚æžœè¿›ç¨‹è®¿é—®äº†æ“ä½œç³»ç»Ÿåˆ†é…ç»™è¯¥è¿›ç¨‹ä»¥å¤–çš„åœ°å€ç©ºé—´ï¼Œä¼šè¢«ç³»ç»Ÿå½“åšéžæ³•æ“ä½œè€Œå¼ºåˆ¶ç»“æŸè¿›ç¨‹ã€‚ &emsp;å°†ç¡¬ç›˜ä¸Šçš„å¯æ‰§è¡Œæ–‡ä»¶æ˜ å°„åˆ°è™šæ‹Ÿå†…å­˜ä¸­çš„è¿‡ç¨‹å°±æ˜¯è£…è½½ï¼Œä½†å†…å­˜æ˜¯æ˜‚è´µä¸”ç¨€æœ‰çš„ï¼Œæ‰€ä»¥å°†ç¨‹åºæ‰§è¡Œæ—¶æ‰€éœ€çš„æŒ‡ä»¤å’Œæ•°æ®å…¨éƒ¨è£…è½½åˆ°å†…å­˜ä¸­æ˜¾ç„¶æ˜¯è¡Œä¸é€šçš„ï¼ŒäºŽæ˜¯äººä»¬ç ”ç©¶å‘çŽ°äº†ç¨‹åºè¿è¡Œæ—¶æ˜¯æœ‰å±€éƒ¨æ€§åŽŸç†çš„ï¼Œå¯ä»¥åªå°†æœ€å¸¸ç”¨çš„éƒ¨åˆ†é©»ç•™åœ¨å†…å­˜ä¸­ï¼Œè€Œä¸å¤ªå¸¸ç”¨çš„æ•°æ®å­˜æ”¾åœ¨ç£ç›˜é‡Œï¼Œè¿™ä¹Ÿæ˜¯åŠ¨æ€è£…è½½çš„åŸºæœ¬åŽŸç†ã€‚è¦†ç›–è£…å…¥å’Œé¡µæ˜ å°„å°±æ˜¯åˆ©ç”¨äº†å±€éƒ¨æ€§åŽŸç†çš„ä¸¤ç§ç»å…¸åŠ¨æ€è£…è½½æ–¹æ³•ï¼Œå‰è€…åœ¨å‘æ˜Žè™šæ‹Ÿå†…å­˜ä¹‹å‰ä½¿ç”¨æ¯”è¾ƒå¹¿æ³› ï¼ŒçŽ°åœ¨åŸºæœ¬å·²ç»æ·˜æ±°ï¼Œä¸»è¦ä½¿ç”¨é¡µæ˜ å°„ã€‚è£…è½½çš„è¿‡ç¨‹ä¹Ÿå¯ä»¥ç†è§£ä¸ºè¿›ç¨‹å»ºç«‹çš„è¿‡ç¨‹ï¼Œæ“ä½œç³»ç»Ÿåªéœ€è¦åšä»¥ä¸‹ä¸‰ä»¶äº‹æƒ…ï¼š åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ è¯»å–å¯æ‰§è¡Œæ–‡ä»¶å¤´ï¼Œå¹¶ä¸”å»ºç«‹è™šæ‹Ÿç©ºé—´ä¸Žå¯æ‰§è¡Œæ–‡ä»¶çš„æ˜ å°„å…³ç³» å°†CPUçš„æŒ‡ä»¤å¯„å­˜å™¨è®¾ç½®æˆå¯æ‰§è¡Œæ–‡ä»¶çš„å…¥å£åœ°å€ï¼Œå¯åŠ¨è¿è¡Œ åŠ¨æ€é“¾æŽ¥&emsp;å‰é¢æˆ‘ä»¬åœ¨ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶æ—¶è¯´çš„é“¾æŽ¥æ˜¯é™æ€é“¾æŽ¥ã€‚æœ€åŽä¸€æ­¥æ˜¯å°†ç»è¿‡æ±‡ç¼–åŽçš„æ‰€æœ‰ç›®æ ‡æ–‡ä»¶ä¸Žåº“è¿›è¡Œé“¾æŽ¥å½¢æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™é‡Œçš„æåˆ°çš„åº“ï¼ŒåŒ…æ‹¬äº†å¾ˆå¤šè¿è¡Œæ—¶åº“ã€‚è¿è¡Œæ—¶åº“é€šå¸¸æ˜¯æ”¯æŒç¨‹åºè¿è¡Œçš„åŸºæœ¬å‡½æ•°çš„é›†åˆï¼Œä¹Ÿå°±æ„å‘³ç€æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šç”¨åˆ°å®ƒï¼Œå¦‚æžœæ¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶éƒ½å°†å…¶æ‰“åŒ…è¿›è‡ªå·±çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œéƒ½ç”¨é™æ€é“¾æŽ¥çš„æ–¹å¼ï¼Œè™½ç„¶åŽŸç†ä¸Šæ›´å®¹æ˜“ç†è§£ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼å¯¹è®¡ç®—æœºçš„å†…å­˜å’Œç£ç›˜çš„ç©ºé—´æµªè´¹éžå¸¸ä¸¥é‡ï¼åœ¨çŽ°åœ¨çš„Linuxç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªæ™®é€šçš„ç¨‹åºä¼šä½¿ç”¨åˆ°çš„Cè¯­è¨€é™æ€åº“è‡³å°‘åœ¨1Mä»¥ä¸Šï¼Œå¦‚æžœç³»ç»Ÿä¸­æœ‰2000ä¸ªè¿™æ ·çš„ç¨‹åºåœ¨è¿è¡Œï¼Œå°±è¦æµªè´¹å°†è¿‘2Gçš„ç©ºé—´ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒæŠŠè¿è¡Œæ—¶åº“çš„é“¾æŽ¥è¿‡ç¨‹æŽ¨è¿Ÿåˆ°äº†è¿è¡Œæ—¶åœ¨è¿›è¡Œï¼Œè¿™å°±æ˜¯åŠ¨æ€é“¾æŽ¥ï¼ˆDynamic Linkingï¼‰çš„åŸºæœ¬æ€æƒ³ã€‚åŠ¨æ€é“¾æŽ¥çš„å¥½å¤„æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š è§£å†³äº†å…±äº«çš„ç›®æ ‡æ–‡ä»¶å­˜åœ¨å¤šä¸ªå‰¯æœ¬æµªè´¹ç£ç›˜å’Œå†…å­˜ç©ºé—´çš„é—®é¢˜ å‡å°‘ç‰©ç†é¡µé¢çš„æ¢å…¥æ¢å‡ºï¼Œè¿˜å¢žåŠ äº†CPUçš„ç¼“å­˜å‘½ä¸­çŽ‡ï¼Œå› ä¸ºä¸åŒè¿›ç¨‹é—´çš„æ•°æ®å’ŒæŒ‡ä»¤è®¿é—®éƒ½é›†ä¸­åœ¨äº†åŒä¸€ä¸ªå…±äº«æ¨¡å—ä¸Š ç³»ç»Ÿå‡çº§åªéœ€è¦æ›¿æ¢æŽ‰å¯¹åº”çš„å…±äº«æ¨¡å—ï¼Œå½“ç¨‹åºä¸‹æ¬¡å¯åŠ¨æ—¶æ–°ç‰ˆæœ¬çš„å…±äº«æ¨¡å—ä¼šè¢«è‡ªåŠ¨è£…è½½å¹¶é“¾æŽ¥èµ·æ¥ï¼Œç¨‹åºå°±æ— æ„Ÿçš„å¯¹æŽ¥åˆ°äº†æ–°ç‰ˆæœ¬ã€‚ æ›´æ–¹ä¾¿ç¨‹åºæ’ä»¶ï¼ˆPlug-inï¼‰çš„åˆ¶ä½œï¼Œä¸ºç¨‹åºå¸¦æ¥æ›´å¥½çš„å¯æ‰©å±•æ€§å’Œå…¼å®¹æ€§ã€‚ &emsp;è‡³æ­¤ï¼Œç»ˆäºŽè¯´å›žäº†æˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’ï¼šdyld,çŽ°åœ¨å’±ä»¬çŸ¥é“äº†å®ƒå­˜åœ¨çš„æ„ä¹‰â€”â€”åŠ¨æ€åŠ è½½çš„æ”¯æŒã€‚ åŠ¨æ€é“¾æŽ¥çš„æ­¥éª¤&emsp;çŽ°åœ¨ï¼Œæˆ‘ä»¬ç†è§£äº†ä¸ºä»€ä¹ˆéœ€è¦åŠ¨æ€é“¾æŽ¥ï¼Œdyldä½œä¸ºè‹¹æžœçš„åŠ¨æ€é“¾æŽ¥å™¨ï¼Œä½†æœ¬è´¨ä¸Šdyldä¹Ÿæ˜¯ä¸€ä¸ªå…±äº«å¯¹è±¡ï¼šä¸Šå›¾æ˜¯dyldåœ¨ç³»ç»Ÿä¸­çš„è·¯å¾„ï¼Œåœ¨iPhoneä¸­åªæœ‰èŽ·å–rootæƒé™ï¼ˆä¹Ÿå°±æ˜¯è¶Šç‹±ï¼‰çš„ç”¨æˆ·æ‰èƒ½è®¿é—®ï¼ŒåŽé¢åœ¨é€†å‘å®žæˆ˜ä¸­ä¼šç»™å¤§å®¶æ¼”ç¤ºã€‚&emsp;æ—¢ç„¶dyldä¹Ÿæ˜¯ä¸€ä¸ªå…±äº«å¯¹è±¡ï¼Œè€Œæ™®é€šå…±äº«å¯¹è±¡çš„é‡å®šä½å·¥ä½œåˆæ˜¯ç”±dyldæ¥å®Œæˆçš„ï¼Œè™½ç„¶ä¹Ÿå¯ä»¥ä¾èµ–äºŽå…¶ä»–å…±äº«å¯¹è±¡ï¼Œä½†è¢«ä¾èµ–çš„å…±äº«å¯¹è±¡è¿˜æ˜¯è¦ç”±dyldæ¥è´Ÿè´£é“¾æŽ¥å’Œè£…è½½ã€‚é‚£ä¹ˆdyldçš„é‡å®šå‘ç”±è°æ¥å®Œæˆå‘¢ï¼Ÿdyldæ˜¯å¦å¯ä»¥ä¾èµ–å…¶ä»–çš„å…±äº«å¯¹è±¡å‘¢ï¼Ÿè¿™æ˜¯ä¸€ä¸ªâ€œé¸¡ç”Ÿè›‹ï¼Œè›‹ç”Ÿé¸¡â€çš„é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒåŠ¨æ€é“¾æŽ¥å™¨éœ€è¦æœ‰äº›ç‰¹æ®Šæ€§ï¼š åŠ¨æ€é“¾æŽ¥å™¨æœ¬èº«ä¸ä¾èµ–å…¶ä»–ä»»ä½•å…±äº«å¯¹è±¡ åŠ¨æ€é“¾æŽ¥å™¨æœ¬èº«æ‰€éœ€è¦çš„å…¨å±€å’Œé™æ€å˜é‡çš„é‡å®šä½å·¥ä½œç”±å®ƒæœ¬èº«å®Œæˆ ä¸Šè¿°ç¬¬ä¸€ä¸ªæ¡ä»¶åœ¨ç¼–å†™åŠ¨æ€é“¾æŽ¥å™¨æ—¶å¯ä»¥äººä¸ºçš„æŽ§åˆ¶ï¼Œç¬¬äºŒä¸ªæ¡ä»¶è¦æ±‚åŠ¨æ€é“¾æŽ¥å™¨åœ¨å¯åŠ¨æ—¶å¿…é¡»æœ‰ä¸€æ®µä»£ç å¯ä»¥åœ¨èŽ·å¾—è‡ªèº«çš„é‡å®šä½è¡¨å’Œç¬¦å·è¡¨çš„åŒæ—¶åˆä¸èƒ½ç”¨åˆ°å…¨å±€å’Œé™æ€å˜é‡ï¼Œç”šè‡³ä¸èƒ½è°ƒç”¨å‡½æ•°ï¼Œè¿™æ ·çš„å¯åŠ¨ä»£ç è¢«ç§°ä¸ºè‡ªä¸¾ï¼ˆBootstrapï¼‰ã€‚å½“æ“ä½œç³»ç»Ÿå°†è¿›ç¨‹æŽ§åˆ¶æƒäº¤ç»™åŠ¨æ€é“¾æŽ¥å™¨æ—¶ï¼Œè‡ªä¸¾ä»£ç å¼€å§‹æ‰§è¡Œï¼Œå®ƒä¼šæ‰¾åˆ°åŠ¨æ€é“¾æŽ¥å™¨æœ¬èº«çš„é‡å®šä½å…¥å£ï¼ˆå…·ä½“è¿‡ç¨‹å’ŒåŽŸç†æš‚æœªæ·±ç©¶ï¼‰ï¼Œè¿›è€Œå®Œæˆå…¶è‡ªèº«çš„é‡å®šä½ï¼Œåœ¨æ­¤ä¹‹åŽåŠ¨æ€é“¾æŽ¥å™¨ä¸­çš„ä»£ç æ‰å¯ä»¥å¼€å§‹ä½¿ç”¨è‡ªå·±çš„å…¨å±€ã€é™æ€å˜é‡å’Œå„ç§å‡½æ•°äº†ã€‚ &emsp;å®ŒæˆåŸºæœ¬çš„è‡ªä¸¾ä»¥åŽï¼ŒåŠ¨æ€é“¾æŽ¥å™¨å°†å¯æ‰§è¡Œæ–‡ä»¶å’Œé“¾æŽ¥å™¨æœ¬èº«çš„ç¬¦å·è¡¨åˆå¹¶ä¸ºä¸€ä¸ªï¼Œç§°ä¸ºå…¨å±€ç¬¦å·è¡¨ã€‚ç„¶åŽé“¾æŽ¥å™¨å¼€å§‹å¯»æ‰¾å¯æ‰§è¡Œæ–‡ä»¶æ‰€ä¾èµ–çš„å…±äº«å¯¹è±¡ï¼Œå¦‚æžœæˆ‘ä»¬æŠŠä¾èµ–å…³ç³»çœ‹ä½œä¸€ä¸ªå›¾çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªè£…è½½è¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªå›¾çš„ä¾¿åˆ©è¿‡ç¨‹ï¼Œé“¾æŽ¥å™¨å¯èƒ½ä¼šä½¿ç”¨æ·±åº¦ä¼˜å…ˆæˆ–è€…å¹¿åº¦ä¼˜å…ˆä¹Ÿå¯èƒ½å…¶ä»–çš„ç®—æ³•æ¥éåŽ†æ•´ä¸ªå›¾ï¼Œæ¯”è¾ƒå¸¸è§çš„ç®—æ³•éƒ½æ˜¯å¹¿åº¦ä¼˜å…ˆçš„ã€‚ &emsp;æ¯å½“ä¸€ä¸ªæ–°çš„å…±äº«å¯¹è±¡è¢«è£…è½½è¿›æ¥ï¼Œå®ƒçš„ç¬¦å·è¡¨ä¼šè¢«åˆå¹¶åˆ°å…¨å±€ç¬¦å·è¡¨ä¸­ï¼Œè£…è½½å®Œæ¯•åŽï¼Œé“¾æŽ¥å™¨å¼€å§‹é‡æ–°éåŽ†å¯æ‰§è¡Œæ–‡ä»¶å’Œå…±äº«å¯¹è±¡çš„é‡å®šä½è¡¨ï¼Œå°†æ¯ä¸ªéœ€è¦é‡æ–°å®šä½çš„ä½ç½®è¿›è¡Œä¿®æ­£ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸Žé™æ€é“¾æŽ¥çš„é‡å®šä½åŽŸç†åŸºæœ¬ç›¸åŒã€‚é‡å®šä½å®Œæˆä¹‹åŽï¼ŒåŠ¨æ€é“¾æŽ¥å™¨ä¼šå¼€å§‹å…±äº«å¯¹è±¡çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œä½†ä¸ä¼šå¼€å§‹å¯æ‰§è¡Œæ–‡ä»¶çš„åˆå§‹åŒ–å·¥ä½œï¼Œè¿™å°†ç”±ç¨‹åºåˆå§‹åŒ–éƒ¨åˆ†çš„ä»£ç è´Ÿè´£æ‰§è¡Œã€‚å½“å®Œæˆäº†é‡å®šä½å’Œåˆå§‹åŒ–ä¹‹åŽï¼Œæ‰€æœ‰çš„å‡†å¤‡å·¥ä½œå°±å®£å‘Šå®Œæˆäº†ï¼Œè¿™æ—¶åŠ¨æ€é“¾æŽ¥å™¨å°±å¦‚é‡Šé‡è´Ÿï¼Œå°†è¿›ç¨‹çš„æŽ§åˆ¶æƒäº¤ç»™ç¨‹åºçš„å…¥å£å¹¶ä¸”å¼€å§‹æ‰§è¡Œã€‚ dyldæºç åˆ†æž&emsp;æˆ‘ä»¬æ¥é€šè¿‡åˆ†æždyldçš„æºç éªŒè¯ä¸Šè¿°è¿‡ç¨‹ï¼šæ–°å»ºä¸€ä¸ªObjective-Cçš„iOSé¡¹ç›®ä½œä¸ºç¤ºä¾‹ï¼Œåœ¨ä»»æ„å‚ä¸Žç¼–è¯‘çš„ç±»ä¸­é‡å†™ +load æ–¹æ³•å¹¶æ·»åŠ æ–­ç‚¹ï¼Œè¿è¡Œèµ·æ¥è¿›å…¥æ–­ç‚¹å³å¯çœ‹åˆ°ä¸Šå›¾æ‰€ç¤ºçš„dyldè°ƒç”¨å †æ ˆä¿¡æ¯ã€‚ &emsp;ä»Žå›¾ä¸­frame9çš„æ±‡ç¼–ä¿¡æ¯ä¸­ï¼Œä½ ä¸€å®šå‘çŽ°äº†åœ¨dyldçš„å…¥å£å‡½æ•°__dyld_starté‡Œå‡ºçŽ°äº†dyldbootstrap::start(macho_header const*, int, char const**, long, macho_header const*, unsigned long*)çš„å‡½æ•°è°ƒç”¨ï¼Œé‚£è¿™æ®µä»£ç æ˜¯å¹²å˜›çš„å‘¢ï¼Ÿä¸Šæºç ï¼šè¿™ä¸ªå‡½æ•°åšäº†è¿™ä¹ˆå‡ ä»¶äº‹ï¼šdyldçš„è‡ªä¸¾ï¼ˆslideOfMainExecutableã€rebaseDyld å®Œæˆè‡ªèº«çš„é‡å®šä½ï¼‰ã€å¼€æ”¾å‡½æ•°ä½¿ç”¨ï¼šmach_initã€è®¾ç½®å †æ ˆä¿æŠ¤ï¼š__guard_setupã€å¼€å§‹è£…è½½å…±äº«å¯¹è±¡ï¼šdyld::_mainã€‚ åœ¨dyld::_mainä¸­ä¸»è¦åšäº†ä»¥ä¸‹å‡ ä»¶äº‹ é…ç½®çŽ¯å¢ƒï¼š åŠ è½½åŠ¨æ€åº“(å…±äº«ç¼“å­˜)ï¼š å®žä¾‹åŒ–ä¸»ç¨‹åºï¼š æ’å…¥åŠ¨æ€åº“ï¼šï¼ˆè¶Šç‹±ä¸­ç¼–å†™æ’ä»¶å°±æ˜¯ä¿®æ”¹è¿™ä¸ªé…ç½®è®©è‡ªå·±å†™çš„åº“è¢«åŠ è½½ï¼Œè¿™ä¸ªé…ç½®ä¹Ÿåªæœ‰rootç”¨æˆ·æ‰æœ‰æƒé™ä¿®æ”¹ï¼Œæœ¬æ¥æ˜¯è‹¹æžœç»™è‡ªå·±é¢„ç•™æ’å…¥åŠ¨æ€åº“ç”¨çš„ï¼‰ é‡å®šä½å®Œæ‰€æœ‰éœ€è¦é‡å®šä½çš„åº“ï¼Œç„¶åŽåˆå§‹åŒ–ä¸»ç¨‹åºï¼š ç»è¿‡ä¸€ç³»åˆ—åˆå§‹åŒ–å‡½æ•°çš„è°ƒç”¨ï¼Œåˆ°notifySingleå‡½æ•° é€šè¿‡æ–­ç‚¹è°ƒè¯•å‘çŽ°æ­¤å‡½æ•°çš„å›žè°ƒæ˜¯load_imagesè¿™ä¸ªå‡½æ•° load_imagesé‡Œæ‰§è¡Œcall_load_methodså‡½æ•° å¾ªçŽ¯è°ƒç”¨å„ä¸ªç±»çš„ load æ–¹æ³• ç„¶åŽè°ƒç”¨äº† doModInitFunctions å‡½æ•° å†…éƒ¨ä¼šè°ƒç”¨å…¨å±€C++å¯¹è±¡çš„æž„é€ å‡½æ•°ï¼ˆå¸¦attribute((constructor))çš„cå‡½æ•°ï¼‰ è¿”å›žä¸»ç¨‹åºçš„å…¥å£å‡½æ•°ï¼Œè¿›å…¥ä¸»ç¨‹åºçš„mainå‡½æ•°ï¼šåŽ†ç»åƒè¾›ä¸‡è‹¦ï¼Œæˆ‘ä»¬æŠµè¾¾äº†æœ€ç†Ÿæ‚‰çš„mainå‡½æ•°ï¼š æ€»ç»“&emsp;è¿™ä¸€ç¯‡æˆ‘ä»¬ä»Ždyldå‡ºå‘ï¼Œå°†ç¨‹åºä»Žç¼–è¯‘åˆ°è£…è½½çš„æ•´ä¸ªè¿‡ç¨‹ä¸²äº†ä¸€éï¼Œå¹¶ç»“åˆåˆ†æžäº†dyldçš„æºç ï¼Œè¿™äº›èµ„æºéƒ½æ˜¯å¼€æºçš„ï¼Œæœ‰å…´è¶£ä¸€å®šè¦è‡ªå·±åŽ»è‡ªå·±å•ƒä¸€ä¸‹ï¼Œé€šè¿‡çœ‹è‹¹æžœå¯¹æ•°æ®ç»“æž„çš„ä½¿ç”¨å’Œè®¾è®¡ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šå¯å‘çš„ã€‚åœ¨åŽç»­çš„é€†å‘å­¦ä¹ ä¸­ï¼Œè¿™ä¸€ç¯‡çš„ç ”ç©¶æˆ–è®¸èƒ½è®©æˆ‘ä¸ä»…çŸ¥å…¶ç„¶ï¼Œè€Œä¸”çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚ è·¯è¿‡çš„å¤§ç¥žè¿˜æœ›å¤šå¤šæŒ‡æ•™~]]></content>
  </entry>
  <entry>
    <title><![CDATA[MachO æ–‡ä»¶ç»“æž„è¯¦è§£]]></title>
    <url>%2F2019%2F02%2F21%2FMachO%20%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[æ¦‚å¿µâ€”â€”ä»€ä¹ˆæ˜¯MachOï¼Ÿ&emsp; è‹¹æžœå¼€å‘è€…å¯¹å®ƒä¸€å®šä¸é™Œç”Ÿï¼Œç‰¹åˆ«æ˜¯å–œæ¬¢é€†å‘çš„åŒå­¦ï¼Œå¯¹å®ƒçš„ç ”ç©¶æ›´æ˜¯å¿…ä¸å¯å°‘ã€‚åœ¨å¯å®‰è£…çš„æ¯ä¸€ä¸ª.appåŒ…ä¸­ï¼Œéƒ½æœ‰ä¸€ä¸ªä¸ŽappåŒåçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå®ƒå¯èƒ½é•¿è¿™æ ·ï¼šï¼ˆå¦‚æžœä½ ç¢°åˆ°æ˜¾ç¤ºä¸ºç™½è‰²çš„MachOæ–‡ä»¶ï¼Œè¯´æ˜Žå½“å‰ç”¨æˆ·å¯¹å…¶æ²¡æœ‰å¯æ‰§è¡Œæƒé™ï¼‰&emsp; MachOå…¶å®žæ˜¯Mach Objectçš„ç¼©å†™ï¼Œæ˜¯åœ¨Macä»¥åŠiOSä¸Šå¯æ‰§è¡Œçš„ä¸€ç§æ–‡ä»¶æ ¼å¼ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºŽï¼šå¯æ‰§è¡Œæ–‡ä»¶(.out .o)ã€åŠ¨æ€åº“ã€é™æ€åº“ã€dyldã€ç›®æ ‡æ–‡ä»¶ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­åˆ—ä¸¾å¦‚ä¸‹ï¼šå®ƒç±»ä¼¼äºŽWindowsä¸Šçš„PEã€Linuxä¸Šçš„ELFæ ¼å¼ï¼Œæˆ‘ä»¬ç”¨fileå‘½ä»¤çœ‹ä¸Šå›¾ä¸­ AlipayWallet çš„æ–‡ä»¶ç±»åž‹ä¿¡æ¯ï¼šå¯ä»¥çœ‹åˆ°ï¼Œè¯¥ç¤ºä¾‹çš„MachOæ–‡ä»¶å±žäºŽé€šç”¨äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆè‹¹æžœæå‡ºçš„ä¸€ç§èƒ½åŒæ—¶é€‚ç”¨å¤šç§æž¶æž„äºŒè¿›åˆ¶æ–‡ä»¶çš„ç¨‹åºä»£ç ï¼‰ï¼Œå¹¶æ”¯æŒåœ¨ä¸¤ç§æž¶æž„ä¸Šè¿è¡Œï¼šarm_v7å’Œarm64ï¼ŒåŒ…å«äº†å¤šç§æž¶æž„çš„MachOæ–‡ä»¶å¯ä»¥é€šè¿‡lipo thinå‘½ä»¤è¿›è¡Œæ‹†åˆ†ï¼šlipo AlipayWallet -thin armv7 -output alipayArmv7ï¼ŒåŒæ ·ä¹Ÿèƒ½ç”¨lipo createè¿›è¡Œåˆå¹¶ï¼šlipo alipayArm64 alipayArmv7 -create -output AlipayWalletNewï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å®žè·µä¸€ä¸‹ã€‚ æž„é€ â€”â€”MachOçš„å†…éƒ¨ç»“æž„æ˜¯æ€Žæ ·çš„ï¼Ÿä¸€ï¼šç®€å•çš„è®²ï¼Œå®ƒåŒ…æ‹¬ä»¥ä¸‹å››ä¸ªç»„æˆéƒ¨åˆ†ï¼š Header ï¼ˆå¤´éƒ¨ï¼‰ ç”¨äºŽå¿«é€Ÿç¡®è®¤è¯¥æ–‡ä»¶çš„CPUç±»åž‹ã€æ–‡ä»¶ç±»åž‹ç­‰ä¿¡æ¯ LoadCommands ï¼ˆåŠ è½½å‘½ä»¤ï¼‰ ç”¨äºŽå‘Šè¯‰loaderå¦‚ä½•è®¾ç½®å¹¶åŠ è½½äºŒè¿›åˆ¶æ•°æ® Data ï¼ˆæ•°æ®æ®µ segmentï¼‰ å­˜æ”¾æ•°æ®ï¼šä»£ç ã€å­—ç¬¦å¸¸é‡ã€ç±»ã€æ–¹æ³•ç­‰ å¯ä»¥æ‹¥æœ‰å¤šä¸ªsegmentï¼Œæ¯ä¸ªsegmentå¯ä»¥æœ‰é›¶åˆ°å¤šä¸ªsectionã€‚æ¯ä¸ªæ®µéƒ½æœ‰ä¸€æ®µè™šæ‹Ÿåœ°å€æ˜ å°„åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´ Loader Info ï¼ˆé“¾æŽ¥ä¿¡æ¯ï¼‰ ä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·çº§MachOæ–‡ä»¶çš„æœ«ç«¯æ˜¯ä¸€ç³»åˆ—é“¾æŽ¥ä¿¡æ¯ã€‚å…¶ä¸­åŒ…å«äº†åŠ¨æ€åŠ è½½å™¨ç”¨æ¥é“¾æŽ¥å¯æ‰§è¡Œæ–‡ä»¶æˆ–è€…ä¾èµ–æ‰€éœ€ä½¿ç”¨çš„ç¬¦å·è¡¨ã€å­—ç¬¦ä¸²è¡¨ç­‰ &emsp; æ¥ç”¨MachOViewéªŒè¯ä¸€ä¸‹è¯¥ç¤ºä¾‹çš„MachOæ–‡ä»¶ç»“æž„ï¼š äºŒï¼šé€ä¸€æŽ¢ç´¢ï¼š1.Header&emsp; é™¤äº†ç”¨MachOViewèƒ½æŸ¥çœ‹MachOæ–‡ä»¶ä¿¡æ¯ï¼Œè¿˜å¯ä»¥é€šè¿‡otoolå‘½ä»¤æŸ¥çœ‹ï¼Œæˆ‘ä»¬å…ˆæ¥åˆ†æžHeaderä¸­çš„å†…å®¹ï¼šotool -h AlipayWalletï¼š magicï¼šMachOæ–‡ä»¶çš„é­”æ•°ï¼Œç”¨æ¥ç¡®å®šå…¶å±žäºŽ64ä½ï¼ˆ0xfeedfacfï¼‰è¿˜æ˜¯32ä½ï¼ˆ0xfeedfaceï¼‰ä¾‹å­ä¸­æœ‰ä¸¤ä¸ªHeaderï¼Œåˆ†åˆ«å¯¹åº”çš„æ˜¯armv7å’Œarm64çš„Headerï¼Œå‰è€…32ä½ï¼ŒåŽè€…64ä½ã€‚ cputypeå’Œcupsubtypeä»£è¡¨çš„æ˜¯cpuçš„ç±»åž‹å’Œå…¶å­ç±»åž‹ï¼Œä¾‹å­ä¸­åˆ†åˆ«æ˜¯12(c)ä¸Ž9ã€16777228(100000c)ä¸Ž0å®šä¹‰å¦‚ä¸‹ï¼š 1234#define CPU_TYPE_ARM((cpu_type_t) 12)#define CPU_SUBTYPE_ARM_V7((cpu_subtype_t) 9)#define CPU_TYPE_ARM64((cpu_type_t) 16777228)#define CPU_SUBTYPE_AR64M_ALL((cpu_subtype_t) 0) æŽ¥ç€æ˜¯filetypeï¼Œ2ï¼Œä»£è¡¨å¯æ‰§è¡Œçš„æ–‡ä»¶ï¼š12345678910#define MH_EXECUTE 0x2 /* demand paged executable file */``` * ncmds æŒ‡çš„æ˜¯åŠ è½½å‘½ä»¤(load commands)çš„æ•°é‡ï¼Œä¾‹å­ä¸­ä¸€å…±75ä¸ªï¼Œç¼–å·0-74* sizeofcmds è¡¨ç¤º75ä¸ªload commandsçš„æ€»å­—èŠ‚å¤§å°ï¼Œ load commandsåŒºåŸŸæ˜¯ç´§æŽ¥ç€headeråŒºåŸŸçš„* æœ€åŽä¸ªflags æ ‡è¯†äºŒè¿›åˆ¶æ–‡ä»¶æ”¯æŒçš„åŠŸèƒ½ï¼Œä¸»è¦ä¸Žç³»ç»Ÿçš„åŠ è½½ã€é“¾æŽ¥æœ‰å…³ã€‚è¿™é‡Œä¸ºä½ å‡†å¤‡äº† mach_header çš„è‹¹æžœå®˜æ–¹æ–‡æ¡£è¯´æ˜Žï¼šï¼ˆæ›´å¤šè¯¦ç»†å®šä¹‰è¯·å‚è€ƒ[loader.h](https://opensource.apple.com/source/xnu/xnu-1456.1.26/EXTERNAL_HEADERS/mach-o/loader.h)ï¼‰![](https://user-gold-cdn.xitu.io/2019/2/21/1690f152b4cd7c0e?w=896&amp;h=736&amp;f=png&amp;s=192704)#### 2.LoadCommandsæˆ‘ä»¬ç»§ç»­ç”¨å‘½ä»¤æŸ¥çœ‹ï¼š`otool -l alipayArm64`ï¼Œè¯¥ç¤ºä¾‹å…±æœ‰75ä¸ªåŠ è½½æŒ‡ä»¤ï¼Œæˆ‘ä»¬åªæˆªå–ä¸€ä¸ªä½œä¸ºä»£è¡¨ï¼Œåˆ†åˆ«ä¸ºå‡ºçŽ°åœ¨segmentå’Œsectionä¸­çš„æ¯ä¸€ä¸ªå‚æ•°è¿›è¡Œæ³¨é‡Šï¼š Load command 1 cmd LC_SEGMENT_64 // cmd æ˜¯load commandçš„ç±»åž‹ï¼ŒLC_SEGMENT_64çš„å«ä¹‰æ˜¯å°†è¿™ä¸ª64ä½çš„æ®µæ˜ å°„åˆ°è¿›ç¨‹åœ°å€ç©ºé—´ï¼Œå³åŠ è½½å‘½ä»¤ cmdsize 712 // ä»£è¡¨load commandçš„å¤§å° segname TEXT // 16å­—èŠ‚çš„æ®µåå­— TEXT vmaddr 0x0000000100000000 // æ®µçš„è™šæ‹Ÿå†…å­˜èµ·å§‹åœ°å€ vmsize 0x00000000036a4000 // æ®µçš„è™šæ‹Ÿå†…å­˜å¤§å° fileoff 0 // æ®µåœ¨æ–‡ä»¶ä¸­çš„åç§»é‡ filesize 57294848 // æ®µåœ¨æ–‡ä»¶ä¸­çš„å¤§å° maxprot 0x00000005 // æ®µé¡µé¢æ‰€éœ€è¦çš„æœ€é«˜å†…å­˜ä¿æŠ¤ï¼ˆ4=r,2=w,1=xï¼‰ initprot 0x00000005 // æ®µé¡µé¢åˆå§‹çš„å†…å­˜ä¿æŠ¤ nsects 8 // æ®µä¸­åŒ…å«sectionçš„æ•°é‡ flags 0x0 // å…¶ä»–æ‚é¡¹æ ‡å¿—ä½Section sectname text // ç¬¬ä¸€ä¸ªæ˜¯text ,å°±æ˜¯ä¸»ç¨‹åºä»£ç  segname TEXT // è¯¥sectionæ‰€å±žçš„ segmentåï¼Œç¬¬ä¸€ä¸ªæ˜¯TEXT addr 0x0000000100006110 // è¯¥sectionåœ¨å†…å­˜çš„å¯å§‹ä½ç½®ï¼Œ0x100006110 size 0x000000000358a268 // size è¯¥sectionçš„å¤§å°ï¼Œ0x358a268 offset 24848 // 24848 0x6110 align 2^4 (16) // å­—èŠ‚å¤§å°å¯¹é½ï¼Œ16 reloff 0 // é‡å®šä½å…¥å£çš„æ–‡ä»¶åç§» 0 nreloc 0 // éœ€è¦é‡å®šä½çš„å…¥å£æ•°é‡ 0 flags 0x80000400 // åŒ…å«sectionçš„typeå’Œattributes reserved1 0 // â€¦ä¿ç•™ç”¨ reserved2 0 // â€¦ä¿ç•™ç”¨`æ³¨é‡Šå®Œæ¯•ï¼Œæˆ‘åˆä¸ºä½ å‡†å¤‡äº† segmentå’Œsection çš„è‹¹æžœå®˜æ–¹æ–‡æ¡£è¯´æ˜Žï¼šï¼ˆæ›´å¤šè¯¦ç»†å®šä¹‰è¯·å‚è€ƒloader.hï¼‰&emsp; æˆ‘æ€»ç»“äº†æœ€å¸¸è§çš„åŠ è½½å‘½ä»¤å¦‚ä¸‹ï¼š LC_SEGMENT_64ï¼š å°†è¯¥æ®µ(64ä½)æ˜ å°„åˆ°è¿›ç¨‹åœ°å€ç©ºé—´ä¸­ LC_DYLD_INFO_ONLYï¼šåŠ è½½åŠ¨æ€é“¾æŽ¥åº“ä¿¡æ¯ï¼ˆé‡å®šå‘åœ°å€ã€å¼±å¼•ç”¨ç»‘å®šã€æ‡’åŠ è½½ç»‘å®šã€å¼€æ”¾å‡½æ•°ç­‰çš„åç§»å€¼ç­‰ä¿¡æ¯ï¼‰ LC_SYMTABï¼šè½½å…¥ç¬¦å·è¡¨åœ°å€ LC_DYSYMTABï¼šè½½å…¥åŠ¨æ€ç¬¦å·è¡¨åœ°å€ LC_LOAD_DYLINKERï¼šåŠ è½½åŠ¨æ€åŠ è½½åº“ï¼Œå¯ä»¥çœ‹å‡ºç¤ºä¾‹ä½¿ç”¨çš„æ˜¯/usr/lib/dyld LC_UUIDï¼šç¡®å®šæ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ï¼Œcrashè§£æžä¸­ä¹Ÿä¼šæœ‰è¿™ä¸ªï¼ŒåŽ»æ£€æµ‹dysmæ–‡ä»¶å’Œcrashæ–‡ä»¶æ˜¯å¦åŒ¹é… LC_VERSION_MIN_MACOSX/LC_VERSION_MIN_IPHONEOSï¼šç¡®å®šäºŒè¿›åˆ¶æ–‡ä»¶è¦æ±‚çš„æœ€ä½Žæ“ä½œç³»ç»Ÿç‰ˆæœ¬ LC_SOURCE_VERSIONï¼šæž„å»ºè¯¥äºŒè¿›åˆ¶æ–‡ä»¶ä½¿ç”¨çš„æºä»£ç ç‰ˆæœ¬ LC_MAINï¼šè®¾ç½®ç¨‹åºä¸»çº¿ç¨‹çš„å…¥å£åœ°å€å’Œæ ˆå¤§å° LC_ENCRYPTION_INFO_64ï¼šèŽ·å–åŠ å¯†ä¿¡æ¯ LC_LOAD_DYLIBï¼šåŠ è½½é¢å¤–çš„åŠ¨æ€åº“ LC_FUNCTION_STARTSï¼šå®šä¹‰ä¸€ä¸ªå‡½æ•°èµ·å§‹åœ°å€è¡¨,ä½¿è°ƒè¯•å™¨å’Œå…¶ä»–ç¨‹åºæ˜“äºŽçœ‹åˆ°ä¸€ä¸ªåœ°å€æ˜¯å¦åœ¨å‡½æ•°å†… LC_DATA_IN_CODEï¼šå®šä¹‰åœ¨ä»£ç æ®µå†…çš„éžæŒ‡ä»¤çš„è¡¨ LC_CODE_SIGNATUREï¼šèŽ·å–åº”ç”¨ç­¾åä¿¡æ¯3.Dataã€é“¾æŽ¥ä¿¡æ¯&emsp; å¦‚æžœè¯´å‰é¢ä¸¤éƒ¨åˆ†çš„ä¸»è¦ä½œç”¨ï¼Œæ˜¯è®©kernå†…æ ¸çŸ¥é“å¦‚ä½•è¯»å–MachOæ–‡ä»¶ï¼Œå¹¶æŒ‡å®šMachOæ–‡ä»¶çš„åŠ¨æ€é“¾æŽ¥å™¨(dyly)ç”¨æ¥å®ŒæˆåŽç»­çš„åŠ¨æ€åº“åŠ è½½ï¼Œç„¶åŽè®¾ç½®å¥½ç¨‹åºå…¥å£ç­‰ä¸€äº›åˆ—ç¨‹åºå¯åŠ¨å‰çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆDataå’Œé“¾æŽ¥ä¿¡æ¯éƒ¨åˆ†ï¼Œå°±ç›¸å½“äºŽå½“ç¨‹åºè¿è¡Œèµ·æ¥åŽï¼Œä¸ºæ¯ä¸€ä¸ªæ˜ å°„åˆ°è™šæ‹Ÿå†…å­˜ä¸­çš„æŒ‡ä»¤æ“ä½œæä¾›çœŸå®žçš„ç‰©ç†åœ°å€æ”¯æŒã€‚è¯¦ç»†çš„è¿‡ç¨‹ä¼šé¢ä¼šå•ç‹¬å†™ä¸€ç¯‡æ–‡ç« å±•å¼€æ¥è®²ã€‚ æ”¶èŽ·â€”â€”ç†Ÿæ‚‰MachOå¯ä»¥åšä»€ä¹ˆ&emsp; ç†è§£åŽŸç†å¾ˆé‡è¦ï¼Œäº†è§£MachOæ ¼å¼çš„ç»“æž„å’ŒåŠ è½½è¿è¡Œï¼Œä¸ä»…å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç†è§£MacOSå’ŒiOSçš„appå¯æ‰§è¡Œæ–‡ä»¶å¯åŠ¨è¿‡ç¨‹ï¼Œè¿˜èƒ½åšä¸”ä¸é™äºŽï¼š bitcodeåˆ†æž crashç¬¦å·åŒ– ç¬¦å·æ¨¡å—æŸ¥æ‰¾ éžOCå‡½æ•°switch åŒ…æ”¯æŒæž¶æž„åˆ†æž å¸¸é‡å­—ç¬¦ä¸²åˆ†æž è¿›ç¨‹å¯åŠ¨é€Ÿåº¦ä¼˜åŒ– å­¦ä¹ ç»å…¸çš„æ•°æ®ç»“æž„ å¸Œæœ›ä½ æœ‰æ‰€æ”¶èŽ·ï¼ä¸‹ç¯‡æˆ‘ä»¬ä¸»è¦å›´ç»•dyldè®²åŠ¨æ€åŠ è½½è¿‡ç¨‹ï¼Œsee you~ å‚è€ƒæ–‡ç« ï¼š è¶£æŽ¢ Mach-Oï¼šæ–‡ä»¶æ ¼å¼åˆ†æž Mach-Oæ–‡ä»¶æ ¼å¼å’Œç¨‹åºä»ŽåŠ è½½åˆ°æ‰§è¡Œè¿‡ç¨‹]]></content>
  </entry>
  <entry>
    <title><![CDATA[éžè¶Šç‹±ä¸‹iOSä»£ç æ³¨å…¥&å¾®ä¿¡ç™»å½•HOOK]]></title>
    <url>%2F2019%2F02%2F10%2F%E9%9D%9E%E8%B6%8A%E7%8B%B1%E4%B8%8BiOS%E4%BB%A3%E7%A0%81%E6%B3%A8%E5%85%A5%26%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95HOOK%2F</url>
    <content type="text"><![CDATA[&emsp;åœ¨ä¹‹å‰è¿™ç¯‡iOSåº”ç”¨è„šæœ¬é‡ç­¾åä¸­ï¼Œæˆ‘ä»¬å¯¹è„±å£³çš„å¾®ä¿¡å®‰è£…åŒ…è¿›è¡Œé‡ç­¾åï¼Œå¹¶æˆåŠŸåœ¨çœŸæœºä¸Šè¿è¡Œèµ·æ¥ï¼Œå®Œæˆäº†iOSé€†å‘çš„å‡†å¤‡å·¥ä½œã€‚è¿™ä¸€ç¯‡æˆ‘ä»¬å°†é€šè¿‡æ¼”ç¤ºå¦‚ä½•HOOKå¾®ä¿¡ç™»å½•äº‹ä»¶å¹¶èŽ·å–åˆ°ç”¨æˆ·å¯†ç ï¼ŒæŠŠiOSä»£ç æ³¨å…¥çš„å‡ ç§æ–¹å¼ä¸²èµ·æ¥åšä¸ªç®€å•åœ°æ¦‚è¿°ã€‚ä¸ç®¡åšé€†å‘è¿˜æ˜¯æ­£å‘å¼€å‘ï¼Œè¿™äº›éƒ½èƒ½ä¸ºä½ æä¾›ä¸€äº›åœ¨åº”ç”¨å®‰å…¨æ”»é˜²æ–¹é¢çš„æ€è·¯ã€‚&emsp;å½“æ‹¿åˆ°åˆ«äººçš„è„±å£³åŒ…ï¼Œæƒ³è¦HOOKåˆ«äººçš„æ–¹æ³•åšäº›å°æ’ä»¶ï¼Œé¦–å…ˆéœ€è¦ç¨‹åºæ‰§è¡Œä½ å†™çš„ä»£ç ï¼Œä½ æ‰æœ‰æœºä¼šåˆ©ç”¨runtimeçš„è¿è¡Œæ—¶æœºåˆ¶åŽ»åšè‡ªå·±çš„äº‹æƒ…ï¼Œå…³äºŽæ–¹æ³•æ··æ·†çš„æ³¨æ„äº‹é¡¹è¯·å‚è€ƒè¿™ä¸€ç¯‡ã€‚è®©ç¨‹åºæ‰§è¡Œæˆ‘ä»¬å†™çš„ä»£ç å°±éœ€è¦ä¿®æ”¹MachOæ–‡ä»¶ï¼Œå…³äºŽMachOæˆ‘åœ¨è¿™ä¸€ç¯‡é‡Œè¯¦ç»†è®²è§£äº†ï¼Œè¿™ç¯‡ä¸»è¦è®²ä»£ç æ³¨å…¥çš„äº‹å„¿ï¼š Frameworkæ³¨å…¥ æ·»åŠ è‡ªå·±çš„Frameworkï¼š å†™å¥½æµ‹è¯•ä»£ç ï¼Œåœ¨ä¸Šä¸€ç¯‡é‡ç­¾åè„šæœ¬çš„åŸºç¡€ä¸ŠåŠ ä¸€è¡Œä¿®æ”¹MachOåŠ è½½è·¯å¾„çš„ä»£ç ï¼šyololib &quot;$TARGET_APP_PATH/$APP_BINARY&quot; &quot;Frameworks/SharonFramework.framework/SharonFramework&quot;ï¼ŒFrameworkæ–‡ä»¶åä¸ºä½ è‡ªå·±åˆšåˆšæ·»åŠ çš„ã€‚ç›´æŽ¥Runï¼å¤§åŠŸå‘Šæˆã€‚ Dylibæ³¨å…¥ æ·»åŠ è‡ªå·±çš„Dylibï¼š&emsp;è¦æ³¨æ„çš„æ˜¯è¿™æ ·æ·»åŠ çš„MacOSçš„Dylibéœ€è¦å°†BuildSettingâ€“&gt;Base SDKæ”¹ä¸ºiOSï¼ŒBuildSettingâ€“&gt;CODE SIGN IDENTITYæ”¹ä¸ºiPhone Developerå³å¯åœ¨iPhoneä¸Šè¿è¡Œã€‚å¦å¤–ï¼Œä¸ŽFrameworkä¸åŒçš„æ˜¯å®ƒéœ€è¦æ‰‹åŠ¨æ·»åŠ å…³è”åº“ï¼šåŒæ ·åœ¨é‡ç­¾åè„šæœ¬ä¸­åŠ ä¸€è¡Œä¿®æ”¹MachOå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„çš„ä»£ç ï¼šyololib &quot;$TARGET_APP_PATH/$APP_BINARY&quot; &quot;Frameworks/libSharonLibrary.dylib&quot;ï¼Œdylibæ–‡ä»¶åä¸ºä½ è‡ªå·±åˆšåˆšæ·»åŠ çš„ã€‚ç›´æŽ¥Runï¼ &emsp;è‡³æ­¤æˆ‘ä»¬å·²ç»å®Œæˆäº†ä»£ç æ³¨å…¥çš„ç¬¬ä¸€æ­¥ï¼Œè®©åˆ«äººçš„åº”ç”¨åœ¨è¿è¡Œæ—¶æ‰§è¡Œæˆ‘ä»¬å†™çš„ä»£ç ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä½ å¯èƒ½ä¼šç¢°åˆ°ç­¾åä¸æˆåŠŸç­‰å„ç§å„æ ·çš„å¥‡è‘©é—®é¢˜ï¼Œä¸è¦æ…Œï¼Œé™ä¸‹å¿ƒåˆ†æžï¼Œå®žåœ¨ä¸è¡Œä½ å¯ä»¥ç•™è¨€^_^ ~ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬è¦å°è¯•HOOKå¾®ä¿¡çš„ç™»å½•æŒ‰é’®äº‹ä»¶ã€‚ &emsp;åŒæ­¥å‡ ä¸ªå…±è¯†ï¼š +load æ–¹æ³•çš„è°ƒç”¨å‘ç”Ÿåœ¨ç±»æˆ–åˆ†ç±»è¢« runtime åŠ è½½ï¼ˆç¼–è¯‘åŽçš„å¯æ‰§è¡Œæ–‡ä»¶è¢«è£…è½½åˆ°å†…å­˜ä¸­ï¼‰æ—¶ï¼Œåªè°ƒç”¨1æ¬¡ã€‚ å­ç±»çš„ +load æ–¹æ³•ä¼šåœ¨å®ƒçš„æ‰€æœ‰çˆ¶ç±»çš„ +load æ–¹æ³•ä¹‹åŽæ‰§è¡Œï¼Œè€Œåˆ†ç±»çš„ +load æ–¹æ³•ä¼šåœ¨å®ƒçš„ä¸»ç±»çš„ +load æ–¹æ³•ä¹‹åŽæ‰§è¡Œã€‚ å¦‚æžœå­ç±»æ²¡æœ‰å®žçŽ° +load æ–¹æ³•ï¼Œé‚£ä¹ˆå½“å®ƒè¢«åŠ è½½æ—¶ runtime æ˜¯ä¸ä¼šåŽ»è°ƒç”¨çˆ¶ç±»çš„ +load æ–¹æ³•çš„ã€‚åŒç†ï¼Œå½“ä¸€ä¸ªç±»å’Œå®ƒçš„åˆ†ç±»éƒ½å®žçŽ°äº† +load æ–¹æ³•æ—¶ï¼Œä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šè¢«è°ƒç”¨ã€‚ ä¸åŒçš„ç±»ä¹‹é—´çš„ +load æ–¹æ³•çš„è°ƒç”¨é¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚ åŸºäºŽ+loadæ–¹æ³•çš„ä¸Šè¿°ç‰¹ç‚¹ï¼Œå®ƒæ˜¯å®žçŽ°æ–¹æ³•æ··æ·†çš„æœ€ä½³å…¥å£ã€‚ é€šè¿‡viewDebug+å¤´æ–‡ä»¶åˆ†æžç›®æ ‡Methodå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¾ˆå¿«å®šä½åˆ°ç™»å½•æŒ‰é’®çš„targetä¸ºWCAccountLoginControlLogicï¼Œactionä¸ºonFirstViewLoginï¼Œæˆ‘ä»¬åœ¨é€šè¿‡å¤´æ–‡ä»¶åˆ†æžä¸€ä¸‹ï¼Œclass-dumpæ€Žä¹ˆç”¨ç›¸ä¿¡ä½ Googleä¸€ä¸‹å°±æžå¾—å®šï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°å•¦ï¼Œæ‹¿åˆ°å¾®ä¿¡çš„æ‰€æœ‰å¤´æ–‡ä»¶ä¸¢åˆ°sublimeé‡Œå…¨å±€æœç´¢ï¼šæžœç„¶ï¼Œæ‰¾åˆ°äº†ç›®æ ‡æ–‡ä»¶ï¼Œç‚¹å‡»è¿›å…¥å¤´æ–‡ä»¶æŸ¥çœ‹Methodåˆ—è¡¨ï¼šéªŒè¯äº†æˆ‘ä»¬çš„åˆ†æžæ˜¯æ­£ç¡®çš„ã€‚ç”¨åŒæ ·çš„æ–¹å¼æˆ‘ä»¬å®šä½è´¦å·å¯†ç è¾“å…¥é¡µç™»å½•æŒ‰é’®çš„targetä¸ºWCAccountMainLoginViewControllerï¼Œactionä¸ºonNextï¼šæˆ‘ä»¬å°†é€šè¿‡HOOKç™»å½•æŒ‰é’®ç‚¹å‡»äº‹ä»¶èŽ·å–å¯†ç è¾“å…¥æ¡†é‡Œçš„å†…å®¹ã€‚ MethodSwizzlingçš„å‡ ç§å§¿åŠ¿ class_replaceMethodclass_replaceMethodæœ¬èº«ä¼šå°è¯•è°ƒç”¨class_addMethodå’Œmethod_setImplementationï¼Œæ‰€ä»¥ç›´æŽ¥è°ƒç”¨class_replaceMethodå°±å¯ä»¥äº†ã€‚ class_getInstanceMethod &amp; method_setImplementation method_exchangeImplementations å¿ƒç»†çš„åŒå­¦ä¸€å®šä¼šå‘çŽ°ï¼Œåœ¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œå¦‚æžœç›´æŽ¥å†™ä¸ªOCæ–¹æ³•ç„¶åŽç”¨method_exchangeImplementationsäº¤æ¢æ–°æ—§æ–¹æ³•çš„å®žçŽ°æœ‰é—®é¢˜ï¼šå› ä¸ºmy_nextä¸­çš„selfæ˜¯WCAccountMainLoginViewControllerï¼Œè°ƒç”¨my_nextä¼šæ‰¾ä¸åˆ°æ–¹æ³•ã€‚è§£å†³æ–¹æ¡ˆæ˜¯æ‰‹åŠ¨ä¸ºWCAccountMainLoginViewControlleræ·»åŠ my_nextæ–¹æ³•ã€‚&emsp;ç”±æ­¤æˆ‘ä»¬ä¹Ÿå‘çŽ°ï¼Œmethod_exchangeImplementationsåœ¨åˆ†ç±»æˆ–å­ç±»ä¸­å¯¹ä¸»/çˆ¶ç±»é‡è½½çš„æ–¹æ³•è¿›è¡Œäº¤æ¢æ—¶æ›´æ–¹ä¾¿äº›ï¼Œä¸ä¼šå‡ºçŽ°ä¸Šè¿°é—®é¢˜ã€‚æ‰€ä»¥åœ¨é€†å‘ä¸­ä¸€èˆ¬ä¸ç›´æŽ¥ä½¿ç”¨method_exchangeImplementationsï¼Œæ›´å€¾å‘äºŽå‰ä¸¤ç§æ–¹å¼ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[èµ°å‡ºåŒºå—é“¾è®¤çŸ¥çš„è¯¯åŒº]]></title>
    <url>%2F2019%2F01%2F31%2F%E8%B5%B0%E5%87%BA%E5%8C%BA%E5%9D%97%E9%93%BE%E8%AE%A4%E7%9F%A5%E7%9A%84%E8%AF%AF%E5%8C%BA%2F</url>
    <content type="text"><![CDATA[&emsp;æ–°äº‹ç‰©å¾€å¾€ä¸æ˜¯å‡­ç©ºè€Œæ¥ï¼Œå‘å±•å’Œæ¼”åŒ–ä¹Ÿå¾ˆå°‘ä¸€è¹´è€Œå°±ã€‚è®¤è¯†æ–°äº‹ç‰©ï¼Œé¦–å…ˆè¦å¼„æ¸…æ¥šå®ƒçš„æ¥é¾™åŽ»è„‰ï¼ŒçŸ¥å…¶å‡ºèº«ï¼Œæ–¹èƒ½çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚æ­¤æ–‡ç« ä¸ºã€ŠåŒºå—é“¾æŠ€æœ¯æŒ‡å—ã€‹çš„è¯»åŽç¬”è®°&amp;æ‘˜è¦ã€‚ è´¦æœ¬ç§‘æŠ€çš„æ¼”åŒ–&emsp;åŒºå—é“¾ï¼ˆBlockchainï¼‰çš„æ¦‚å¿µé¦–æ¬¡è¢«äººä»¬å…³æ³¨ï¼ŒæºäºŽ2009å¹´åˆä¸Šçº¿çš„æ¯”ç‰¹å¸ï¼ˆBitcoinï¼‰å¼€æºé¡¹ç›®ã€‚ä»Žè®°è´¦ç§‘æŠ€çš„æ¼”åŒ–è§’åº¦æ¥çœ‹ï¼ŒåŒºå—é“¾å®žé™…ä¸Šæ˜¯è®°è´¦é—®é¢˜å‘å±•åˆ°åˆ†å¸ƒå¼åœºæ™¯ä¸‹çš„å¤©ç„¶ç»“æžœã€‚è´¦æœ¬ç§‘æŠ€çš„æ¼”åŒ–è¿‡ç¨‹å¤§è‡´å¯ä»¥åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼šç®€å•è´¦æœ¬ã€å¤å¼è´¦æœ¬ã€æ•°å­—åŒ–è´¦æœ¬ã€åˆ†å¸ƒå¼è´¦æœ¬ã€‚ç®€å•è´¦æœ¬å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯æ•°æ®æ²¡æœ‰å¤‡ä»½ï¼Œå®¹æ˜“å‡ºé”™ä¸”å¾ˆéš¾å‘çŽ°æ˜¯å¦è¢«ç¯¡æ”¹è¿‡ã€‚å¤å¼è´¦æœ¬,ç®€å•ç†è§£å°±æ˜¯ï¼Œå°†æ¯ç¬”äº¤æ˜“åˆ†åˆ«åœ¨æ¥æºæ–¹å’Œç›®æ ‡æ–¹è¿›è¡Œè®°å½•ï¼Œä¸”å¤šæ–¹ä¹‹é—´çš„è´¦æœ¬æ€»é¢åº”è¯¥æ—¶åˆ»ä¿æŒç›¸ç­‰ï¼Œè¿™æ ·å°±è§£å†³äº†å•ä¸ªè´¦æœ¬çš„è´¦æœ¬å¯ä¿¡é—®é¢˜ã€‚æ•°å­—åŒ–è´¦æœ¬çš„è®°è´¦æ–¹æ³•ç›¸å¯¹äºŽå¤å¼è´¦æœ¬æœ¬èº«å¹¶æ²¡æœ‰å¤ªå¤šåˆ›æ–°ï¼Œä½†ç”±äºŽæ•°å­—åª’ä»‹çš„å‡ºçŽ°ï¼Œä½¿å¾—è´¦æœ¬çš„è§„æ¨¡ã€å¤„ç†çš„é€Ÿåº¦ã€è´¦æœ¬çš„å¤æ‚åº¦éƒ½æœ‰äº†å¤©ç¿»åœ°è¦†çš„æå‡ï¼Œè¿™æ˜¯çŽ°åœ¨çš„ç”µå­å•†åŠ¡ã€äº’è”ç½‘é‡‘èžçš„æŠ€æœ¯åŸºç¡€ã€‚å¤å¼è´¦æœ¬è™½ç„¶è®°å½•äº†äº¤æ˜“çš„æ¥é¾™åŽ»è„‰ï¼Œä¸æ˜“å‡ºé”™ï¼Œä½†æœ¬è´¨ä¸Šä»ç„¶æ˜¯ä¸­å¿ƒåŒ–æ¨¡å¼ï¼Œå¤šæ–¹äº¤æ˜“æƒ…å†µä¸‹å¦‚æžœæŸä¸ªæˆ–éƒ¨åˆ†è´¦æœ¬æ•°æ®å‡ºçŽ°ä¸ä¸€è‡´ï¼Œå¯¹è´¦ååˆ†å›°éš¾ï¼Œåˆ†å¸ƒå¼è´¦æœ¬ï¼šç”±äº¤æ˜“å¤šæ–¹å…±åŒç»´æŠ¤åŒä¸€ä¸ªå…±äº«çš„åˆ†å¸ƒå¼è´¦æœ¬ï¼Œæ‰“é€šäº¤æ˜“åœ¨ä¸åŒé˜¶æ®µçš„æ¥é¾™åŽ»è„‰ï¼ŒåŒæ—¶å‡­å€Ÿåˆ†å¸ƒå¼æŠ€æœ¯è¿›ä¸€æ­¥æé«˜è®°è´¦çš„è§„æ¨¡ã€æ•ˆçŽ‡ã€å¯é æ€§ä»¥åŠåˆè§„æ€§ã€‚ä½†åœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹ï¼Œå¦‚ä½•é¿å…å‚ä¸Žæ–¹æ¶æ„ç¯¡æ”¹æˆ–è€…ç ´åè®°å½•ï¼Ÿè¯¥ç”±è°æ¥å†³å®šæ¯ç¬”äº¤æ˜“è®°å½•æ˜¯å¦å†™å…¥åˆ°è´¦æœ¬ä¸­ï¼Ÿè¿™äº›é—®é¢˜ä¸€ç›´éƒ½è¿˜åœ¨æŽ¢ç´¢æœ€ä½³å®žè·µã€‚ åˆ†å¸ƒå¼è´¦æœ¬ä¸ŽåŒºå—é“¾&emsp;ä¸ºäº†é˜²æ­¢æœ‰å‚ä¸Žè€…å¯¹äº¤æ˜“è®°å½•è¿›è¡Œç¯¡æ”¹ï¼Œéœ€è¦å¼•å…¥ä¸€å®šçš„éªŒè¯æœºåˆ¶ã€‚å¾ˆè‡ªç„¶åœ°ï¼Œæˆ‘ä»¬æƒ³åˆ°äº†æ•°å­—æ‘˜è¦æŠ€æœ¯ï¼Œä¸€ä¸ªå¤šæ–¹å‚ä¸Žä¸”éƒ½æœ‰æƒé™è¯»å†™çš„è´¦æœ¬ï¼Œæ¯æ¬¡å½“æœ‰æ–°çš„äº¤æ˜“è®°å½•è¢«è¿½åŠ åˆ°è´¦æœ¬ä¸Šæ—¶ï¼Œå‚ä¸Žå„æ–¹å¯ä»¥ä½¿ç”¨Hashç®—æ³•å¯¹å®Œæ•´çš„äº¤æ˜“åŽ†å²è®¡ç®—æ•°å­—æ‘˜è¦ï¼ŒèŽ·å–å½“å‰äº¤æ˜“åŽ†å²çš„â€œæŒ‡çº¹â€ã€‚æ­¤åŽä»»æ„æ—¶åˆ»ï¼Œæ¯ä¸ªå‚ä¸Žæ–¹éƒ½å¯ä»¥å¯¹äº¤æ˜“åŽ†å²é‡æ–°è®¡ç®—æ•°å­—æ‘˜è¦ï¼Œä¸€æ—¦å‘çŽ°æŒ‡çº¹ä¸åŒ¹é…ï¼Œåˆ™è¯´æ˜Žäº¤æ˜“è®°å½•è¢«ç¯¡æ”¹è¿‡ã€‚åŒæ—¶ï¼Œé€šè¿‡è¿½è¸ªæŒ‡çº¹æ”¹å˜ä½ç½®ï¼Œå¯ä»¥å®šä½åˆ°è¢«ç¯¡æ”¹çš„äº¤æ˜“è®°å½•ï¼š&emsp;ä¸Šè¿°æ–¹æ¡ˆï¼Œåœ¨å®žé™…åº”ç”¨ä¸­å¯ä»¥è§£å†³è®°å½•é˜²ç¯¡æ”¹é—®é¢˜ï¼Œä½†ä»ç„¶å­˜åœ¨è¾ƒå¤§ç¼ºé™·ã€‚ç”±äºŽæ¯æ¬¡è¿½åŠ æ–°çš„äº¤æ˜“è®°å½•æ—¶éœ€è¦ä»Žå¤´å¯¹æ‰€æœ‰çš„åŽ†å²æ•°æ®è®¡ç®—æ•°å­—æ‘˜è¦ï¼Œå½“å·²å­˜åœ¨å¤§é‡äº¤æ˜“åŽ†å²æ—¶ï¼Œæ•°å­—æ‘˜è¦è®¡ç®—æˆæœ¬å°†å˜å¾—å¾ˆé«˜ï¼Œéšç€æ–°äº¤æ˜“çš„æ”¾ç”Ÿäº¤æ˜“è€—è´¹å°†è¶Šæ¥è¶Šå¤§ï¼Œç³»ç»Ÿæ‰©å±•æ€§å¾ˆå·®ã€‚ä¸ºäº†è§£å†³å¯æ‰©å±•æ€§çš„é—®é¢˜ï¼Œéœ€è¦è¿›ä¸€æ­¥æ”¹è¿›ä¸ºæ–¹æ¡ˆäºŒï¼šä¸»è¦åˆ°æ¯æ¬¡æ‘˜è¦å·²ç»ç¡®ä¿äº†ä»Žå¤´å¼€å§‹åˆ°æ‘˜è¦ä½ç½®çš„å®Œæ•´åŽ†å²ï¼Œå½“æ–°çš„äº¤æ˜“å‘ç”ŸåŽï¼Œå®žé™…ä¸Šéœ€è¦è¿›è¡Œé¢å¤–éªŒè¯çš„åªæ˜¯æ–°çš„äº¤æ˜“ï¼Œå³å¢žé‡éƒ¨åˆ†ã€‚å› æ­¤ï¼Œè®¡ç®—æ‘˜è¦çš„è¿‡ç¨‹å¯ä»¥æ”¹è¿›ä¸ºå¯¹æ—§çš„æ‘˜è¦å€¼å†åŠ ä¸Šæ–°çš„äº¤æ˜“å†…å®¹è¿›è¡ŒéªŒè¯ã€‚è¿™æ ·æ—¢è§£å†³äº†é˜²ç¯¡æ”¹é—®é¢˜ï¼Œåˆè§£å†³äº†å¯æ‰©å±•æ€§é—®é¢˜ï¼š&emsp;å®žé™…ä¸Šï¼Œä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œæ–¹æ¡ˆäºŒçš„è´¦æœ¬ç»“æž„æ­£æ˜¯ä¸€ä¸ªåŒºå—é“¾ç»“æž„ï¼š&emsp;å¯è§ï¼Œä»Žåˆ†å¸ƒå¼è®°è´¦çš„åŸºæœ¬é—®é¢˜å‡ºå‘ï¼Œå¯ä»¥è‡ªç„¶æŽ¨å¯¼å‡ºåŒºå—é“¾ç»“æž„ï¼Œè¿™ä¹Ÿè¯´æ˜Žäº†åœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹çš„è®°è´¦é—®é¢˜ä¸­ï¼ŒåŒºå—é“¾æ˜¯ä¸€ä¸ªç®€æ´æœ‰æ•ˆçš„å¤©ç„¶ç­”æ¡ˆã€‚å½“ç„¶ï¼ŒåŒºå—é“¾ç»“æž„ä¹Ÿå¹¶éžè§£å†³åˆ†å¸ƒå¼è®°è´¦é—®é¢˜çš„å”¯ä¸€ç­”æ¡ˆï¼Œå®žé™…ä¸Šï¼Œé™¤äº†ç®€å•çš„çº¿æ€§é˜Ÿåˆ—ç»“æž„ï¼Œä¹Ÿæœ‰äººæå‡ºé‡‡ç”¨æ ‘æˆ–è€…å›¾ç»“æž„ã€‚ æ¯”ç‰¹å¸çš„æ„ä¹‰å’Œä»·å€¼&emsp;ç›´åˆ°ä»Šå¤©ï¼Œå…³äºŽæ¯”ç‰¹å¸çš„è¯é¢˜ä»å……æ»¡äº†ä¸å°‘äº‰è®®ã€‚ä½†å¤§éƒ¨åˆ†äººåº”è¯¥éƒ½ä¼šè®¤å¯ï¼Œæ¯”ç‰¹å¸æ˜¯æ•°å­—è´§å¸åŽ†å²ä¸Šï¼Œç”šè‡³æ•´ä¸ªé‡‘èžåŽ†å²ä¸Šä¸€æ¬¡äº†ä¸èµ·çš„ç¤¾ä¼šå­¦å®žéªŒã€‚&emsp;æ¯”ç‰¹å¸é¦–æ¬¡çœŸæ­£ä»Žå®žè·µæ„ä¹‰ä¸Šå®žçŽ°äº†å®‰å…¨å¯é çš„éžä¸­å¿ƒåŒ–æ•°å­—è´§å¸æœºåˆ¶ï¼Œè¿™ä¹Ÿæ˜¯å®ƒå—åˆ°æ— æ•°é‡‘èžç§‘æŠ€ä»Žä¸šè€…çƒ­æ§çš„æ ¹æœ¬åŽŸå› ã€‚ä½œä¸ºä¸€ç§æ¦‚å¿µè´§å¸ï¼Œæ¯”ç‰¹å¸ä¸»è¦æ˜¯å¸Œæœ›è§£å†³å·²æœ‰è´§å¸ç³»ç»Ÿé¢ä¸´çš„å‡ ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š è¢«æŽŒæŽ§åœ¨å•ä¸€æœºæž„æ‰‹ä¸­ï¼Œå®¹æ˜“è¢«æ”»å‡»ã€‚ è‡ªèº«çš„ä»·å€¼æ— æ³•ä¿è¯ï¼Œå®¹æ˜“å‡ºçŽ°æ³¢åŠ¨ã€‚ æ— æ³•åŒ¿ååŒ–äº¤æ˜“ï¼Œä¸å¤Ÿéšç§ã€‚&emsp;è¦å®žçŽ°ä¸€å¥—æ•°å­—è´§å¸æœºåˆ¶ï¼Œæœ€å…³é”®çš„è¿˜æ˜¯è¦å»ºç«‹ä¸€å¥—å®Œå–„çš„äº¤æ˜“è®°å½•ç³»ç»Ÿï¼Œä»¥åŠå½¢æˆä¸€å¥—åˆç†çš„è´§å¸å‘è¡Œæœºåˆ¶ã€‚è¿™ä¸ªäº¤æ˜“è®°å½•ç³»ç»Ÿè¦èƒ½å‡†ç¡®ã€å…¬æ­£åœ°è®°å½•å‘ç”Ÿè¿‡çš„æ¯ä¸€ç¬”äº¤æ˜“ï¼Œå¹¶ä¸”æ— æ³•è¢«æ¶æ„ç¯¡æ”¹ã€‚å¯¹æ¯”å·²æœ‰çš„é“¶è¡Œç³»ç»Ÿï¼Œå¯ä»¥çœ‹å‡ºï¼ŒçŽ°æœ‰çš„é“¶è¡Œæœºåˆ¶ä½œä¸ºé‡‘èžäº¤æ˜“çš„ç¬¬ä¸‰æ–¹ä¸­ä»‹æœºæž„ï¼Œæœ‰ä»£ä»·åœ°æä¾›äº†äº¤æ˜“è®°å½•æœåŠ¡ã€‚å¦‚æžœå‚ä¸Žäº¤æ˜“çš„å¤šæ–¹éƒ½å®Œå…¨ç›¸ä¿¡é“¶è¡Œçš„è®°å½•ï¼ˆæ•°æ®åº“ï¼‰ï¼Œå°±ä¸å­˜åœ¨ä¿¡ä»»é—®é¢˜ã€‚å¯æ˜¯å¦‚æžœæ˜¯æ›´å¤§èŒƒå›´ï¼ˆç”šè‡³è·¨å¤šå®¶é“¶è¡Œï¼‰è¿›è¡Œæµé€šçš„è´§å¸å‘¢ï¼Ÿå“ªå®¶é“¶è¡Œçš„ç³»ç»Ÿèƒ½æä¾›å®Œå…¨å¯é ä¸ä¸­æ–­çš„æœåŠ¡å‘¢ï¼Ÿå”¯ä¸€å¯èƒ½çš„æ–¹æ¡ˆæ˜¯ä¸€å¥—åˆ†å¸ƒå¼è´¦æœ¬ã€‚è¿™ä¸ªè´¦æœ¬å¯ä»¥è¢«æ‰€æœ‰ç”¨æˆ·è‡ªç”±è®¿é—®ï¼Œè€Œä¸”ä»»ä½•ä¸ªä½“éƒ½æ— æ³•å¯¹æ‰€è®°å½•çš„æ•°æ®è¿›è¡Œæ¶æ„ç¯¡æ”¹å’ŒæŽ§åˆ¶ã€‚ä¸ºäº†å®žçŽ°è¿™æ ·ä¸€ä¸ªå‰æ‰€æœªæœ‰çš„è´¦æœ¬ç³»ç»Ÿï¼Œæ¯”ç‰¹å¸ç½‘ç»œå·§å¦™åœ°è®¾è®¡äº†åŒºå—é“¾ç»“æž„ï¼Œæä¾›äº†å¯é ã€æ— æ³•è¢«ç¯¡æ”¹çš„æ•°å­—è´§å¸è´¦æœ¬åŠŸèƒ½ã€‚&emsp;æ¯”ç‰¹å¸ç½‘ç»œä¸­ï¼Œè´§å¸çš„å‘è¡Œæ˜¯é€šè¿‡æ¯”ç‰¹å¸åè®®æ¥è§„å®šçš„ã€‚è´§å¸æ€»é‡å—åˆ°æŽ§åˆ¶ï¼Œå‘è¡Œé€Ÿåº¦éšæ—¶é—´è‡ªåŠ¨è¿›è¡Œè°ƒæ•´ã€‚æ—¢ç„¶æ€»é‡ä¸€å®šï¼Œé‚£ä¹ˆå•ä¸ªæ¯”ç‰¹å¸çš„ä»·å€¼ä¼šéšç€è¶Šæ¥è¶Šå¤šçš„ç»æµŽå®žä½“è®¤å¯æ¯”ç‰¹å¸è€Œæ°´æ¶¨èˆ¹é«˜ã€‚å‘è¡Œé€Ÿåº¦çš„è‡ªåŠ¨è°ƒæ•´åˆ™é¿å…å‡ºçŽ°é€šèƒ€æˆ–è€…æ»žæ¶¨çš„æƒ…å†µã€‚&emsp;å¦ä¸€æ–¹é¢ï¼Œä¹Ÿè¦å†·é™åœ°çœ‹åˆ°ï¼Œä½œä¸ºç¤¾ä¼šå­¦å®žéªŒï¼Œæ¯”ç‰¹å¸å·²ç»èŽ·å¾—äº†æŸç§æˆåŠŸï¼Œç‰¹åˆ«æ˜¯åŸºäºŽåŒºå—é“¾æŠ€æœ¯ï¼Œå·²ç»å‡ºçŽ°äº†è®¸å¤šé¢‡æœ‰ä»·å€¼çš„å•†ä¸šåœºæ™¯å’Œåˆ›æ–°æŠ€æœ¯ã€‚ä½†è¿™ç»ä¸æ„å‘³ç€æ¯”ç‰¹å¸è‡ªèº«å¿…ç„¶èƒ½å¤Ÿè¿›å…¥åˆ°æœªæ¥çš„å•†ä¸šä½“ç³»ä¸­ã€‚æ¯”ç‰¹å¸è‡ªèº«ä»·å€¼çš„æ³¢åŠ¨ååˆ†å‰§çƒˆï¼›åŒæ—¶ç”±äºŽè´¦ç›®å…¬å¼€å¯æŸ¥ï¼Œé€šè¿‡åˆ†æžä»æœ‰è¾ƒå¤§æ¦‚çŽ‡è¿½è¸ªåˆ°å®žé™…ä½¿ç”¨è€…ï¼›å¦å¤–ï¼Œæ¯”ç‰¹å¸ç³»ç»Ÿåœ¨ä¸å°‘ç®¡ç†çŽ¯èŠ‚ä¸Šä»ç„¶ä¾èµ–ä¸­å¿ƒåŒ–çš„æœºåˆ¶ã€‚ æ›´æœ‰ä»·å€¼çš„åŒºå—é“¾æŠ€æœ¯&emsp;å¦‚æžœè¯´æ¯”ç‰¹å¸æ˜¯å½±å“åŠ›å·¨å¤§çš„ç¤¾ä¼šå­¦å®žéªŒï¼Œé‚£ä¹ˆä»Žæ¯”ç‰¹å¸æ ¸å¿ƒè®¾è®¡ä¸­æç‚¼å‡ºæ¥çš„åŒºå—é“¾æŠ€æœ¯ï¼Œåˆ™è®©å¤§å®¶çœ‹åˆ°äº†å¡‘é€ æ›´é«˜æ•ˆã€æ›´å®‰å…¨çš„æœªæ¥å•†ä¸šç½‘ç»œçš„å¯èƒ½ã€‚&emsp;2014 å¹´å¼€å§‹ï¼Œæ¯”ç‰¹å¸èƒŒåŽçš„åŒºå—é“¾æŠ€æœ¯å¼€å§‹é€æ¸å—åˆ°å¤§å®¶å…³æ³¨ï¼Œå¹¶è¿›ä¸€æ­¥å¼•å‘äº†åˆ†å¸ƒå¼è®°è´¦æœ¬ï¼ˆDistributed Ledgerï¼‰æŠ€æœ¯çš„é©æ–°æµªæ½®ã€‚&emsp;å®žé™…ä¸Šï¼Œäººä»¬å¾ˆæ—©å°±æ„è¯†åˆ°ï¼Œè®°è´¦ç›¸å…³çš„æŠ€æœ¯ï¼Œå¯¹äºŽèµ„äº§ï¼ˆåŒ…æ‹¬æœ‰å½¢èµ„äº§å’Œæ— å½¢èµ„äº§ï¼‰çš„ç®¡ç†ï¼ˆåŒ…æ‹¬æ‰€æœ‰æƒå’Œæµé€šï¼‰ååˆ†å…³é”®ï¼›è€Œå¤šä¸­å¿ƒåŒ–çš„åˆ†å¸ƒå¼è®°è´¦æœ¬æŠ€æœ¯ï¼Œå¯¹äºŽå½“å‰å¼€æ”¾ã€å¤šç»´çš„å•†ä¸šæ¨¡å¼æ„ä¹‰é‡å¤§ã€‚åŒºå—é“¾çš„æ€æƒ³å’Œç»“æž„ï¼Œæ­£æ˜¯å®žçŽ°è¿™ç§åˆ†å¸ƒå¼è®°è´¦æœ¬ç³»ç»Ÿçš„ä¸€ç§æžå…·å¯è¡Œæ½œåŠ›çš„æŠ€æœ¯ã€‚&emsp;åŒºå—é“¾æŠ€æœ¯çŽ°åœ¨å·²ç»ä»Žæ¯”ç‰¹å¸é¡¹ç›®è„±é¢–è€Œå‡ºï¼Œåœ¨åŒ…æ‹¬é‡‘èžã€è´¸æ˜“ã€å¾ä¿¡ã€ç‰©è”ç½‘ã€å…±äº«ç»æµŽç­‰è¯¸å¤šé¢†åŸŸå´­éœ²å¤´è§’ã€‚çŽ°åœ¨ï¼Œé™¤éžç‰¹åˆ«æŒ‡å‡ºæ˜¯â€œæ¯”ç‰¹å¸åŒºå—é“¾â€ï¼Œå¦åˆ™å½“äººä»¬æåˆ°â€œåŒºå—é“¾æŠ€æœ¯â€æ—¶ï¼Œå¾€å¾€å·²ä¸Žæ¯”ç‰¹å¸æ²¡æœ‰ä»€ä¹ˆå¿…ç„¶è”ç³»äº†ã€‚&emsp;å•†ä¸šè¡Œä¸ºçš„å…¸åž‹è¿‡ç¨‹ä¸ºï¼šäº¤æ˜“å¤šæ–¹é€šè¿‡åå•†ç¡®å®šå•†ä¸šåˆçº¦ï¼Œé€šè¿‡æ‰§è¡Œåˆçº¦å®Œæˆäº¤æ˜“ã€‚åŒºå—é“¾æ“…é•¿çš„æ­£æ˜¯å¦‚ä½•åœ¨å¤šæ–¹ä¹‹é—´è¾¾æˆåˆçº¦ï¼Œå¹¶ç¡®ä¿åˆçº¦çš„é¡ºåˆ©æ‰§è¡Œã€‚æ ¹æ®ç±»åˆ«å’Œåº”ç”¨åœºæ™¯ä¸åŒï¼ŒåŒºå—é“¾æ‰€ä½“çŽ°çš„ç‰¹ç‚¹å’Œä»·å€¼ä¹Ÿä¸åŒã€‚ä»ŽæŠ€æœ¯è§’åº¦ï¼Œä¸€èˆ¬è®¤ä¸ºï¼ŒåŒºå—é“¾å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š åˆ†å¸ƒå¼å®¹é”™æ€§ï¼šåˆ†å¸ƒå¼è´¦æœ¬ç½‘ç»œæžå…¶é²æ£’ï¼Œèƒ½å¤Ÿå®¹å¿éƒ¨åˆ†èŠ‚ç‚¹çš„å¼‚å¸¸çŠ¶æ€ï¼› ä¸å¯ç¯¡æ”¹æ€§ï¼šå…±è¯†æäº¤åŽçš„æ•°æ®ä¼šä¸€ç›´å­˜åœ¨ï¼Œä¸å¯è¢«é”€æ¯æˆ–ä¿®æ”¹ï¼› éšç§ä¿æŠ¤æ€§ï¼šå¯†ç å­¦ä¿è¯äº†æ•°æ®éšç§ï¼Œå³ä¾¿æ•°æ®æ³„éœ²ï¼Œä¹Ÿæ— æ³•è§£æžã€‚ éšä¹‹å¸¦æ¥çš„ä¸šåŠ¡ç‰¹æ€§å°†å¯èƒ½åŒ…æ‹¬ï¼š å¯ä¿¡ä»»æ€§ï¼šåŒºå—é“¾æŠ€æœ¯å¯ä»¥æä¾›å¤©ç„¶å¯ä¿¡çš„åˆ†å¸ƒå¼è´¦æœ¬å¹³å°ï¼Œä¸éœ€è¦é¢å¤–ç¬¬ä¸‰æ–¹ä¸­ä»‹æœºæž„å‚ä¸Žï¼› é™ä½Žæˆæœ¬ï¼šè·Ÿä¼ ç»ŸæŠ€æœ¯ç›¸æ¯”ï¼ŒåŒºå—é“¾æŠ€æœ¯å¯èƒ½é€šè¿‡è‡ªåŠ¨åŒ–åˆçº¦æ‰§è¡Œå¸¦æ¥æ›´å¿«çš„äº¤æ˜“ï¼ŒåŒæ—¶é™ä½Žç»´æŠ¤æˆæœ¬ï¼› å¢žå¼ºå®‰å…¨ï¼šåŒºå—é“¾æŠ€æœ¯å°†æœ‰åˆ©äºŽå®‰å…¨ã€å¯é çš„å®¡è®¡ç®¡ç†å’Œè´¦ç›®æ¸…ç®—ï¼Œå‡å°‘çŠ¯ç½ªé£Žé™©ã€‚ &emsp;åŒºå—é“¾å¹¶éžå‡­ç©ºè¯žç”Ÿçš„æ–°æŠ€æœ¯ï¼Œæ›´æ˜¯å¤šç§æŠ€æœ¯æ¼”åŒ–åˆ°ä¸€å®šç¨‹åº¦åŽçš„äº§ç‰©ï¼Œå› æ­¤ï¼Œå…¶å•†ä¸šåº”ç”¨åœºæ™¯ä¹Ÿè·Ÿä¿ƒç”Ÿå…¶å‡ºçŽ°çš„çŽ¯å¢ƒæ¯æ¯ç›¸å…³ã€‚å¯¹äºŽåŸºäºŽæ•°å­—æ–¹å¼çš„äº¤æ˜“è¡Œä¸ºï¼ŒåŒºå—é“¾æŠ€æœ¯èƒ½æ½œåœ¨åœ°é™ä½Žäº¤æ˜“æˆæœ¬ã€åŠ å¿«äº¤æ˜“é€Ÿåº¦ï¼ŒåŒæ—¶èƒ½æé«˜å®‰å…¨æ€§ã€‚æˆ‘è®¤ä¸ºï¼Œèƒ½å¦æœ€ç»ˆæé«˜ç”Ÿäº§åŠ›ï¼Œå°†æ˜¯ä¸€é¡¹æŠ€æœ¯èƒ½å¦è¢«å®žè·µæŽ¥å—çš„å…³é”®ã€‚ åŒºå—é“¾çš„å®šä¹‰ä¸ŽåŽŸç†è®¨è®ºåŒºå—é“¾çš„å®šä¹‰å¯ä»¥ä»Žç‹­ä¹‰å’Œå¹¿ä¹‰ä¸¤ä¸ªå±‚é¢æ¥çœ‹å¾…ã€‚&emsp;ç‹­ä¹‰ä¸Šï¼ŒåŒºå—é“¾æ˜¯ä¸€ç§ä»¥åŒºå—ä¸ºåŸºæœ¬å•ä½çš„é“¾å¼æ•°æ®ç»“æž„ï¼ŒåŒºå—ä¸­åˆ©ç”¨æ•°å­—æ‘˜è¦å¯¹ä¹‹å‰çš„äº¤æ˜“åŽ†å²è¿›è¡Œæ ¡éªŒï¼Œé€‚åˆåˆ†å¸ƒå¼è®°è´¦åœºæ™¯ä¸‹é˜²ç¯¡æ”¹å’Œå¯æ‰©å±•æ€§çš„éœ€æ±‚ã€‚&emsp;å¹¿ä¹‰ä¸Šï¼ŒåŒºå—é“¾è¿˜æŒ‡ä»£åŸºäºŽåŒºå—é“¾ç»“æž„å®žçŽ°çš„åˆ†å¸ƒå¼è®°è´¦æŠ€æœ¯ï¼ŒåŒ…æ‹¬åˆ†å¸ƒå¼å…±è¯†ã€éšç§ä¸Žå®‰å…¨ä¿æŠ¤ã€ç‚¹å¯¹ç‚¹é€šä¿¡æŠ€æœ¯ã€ç½‘ç»œåè®®ã€æ™ºèƒ½åˆçº¦ç­‰ã€‚&emsp;åŒºå—é“¾çš„åŸºæœ¬åŽŸç†ç†è§£èµ·æ¥å¹¶ä¸å¤æ‚ã€‚é¦–å…ˆæ¥çœ‹ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µï¼š äº¤æ˜“ï¼ˆTransactionï¼‰ï¼šä¸€æ¬¡å¯¹è´¦æœ¬çš„æ“ä½œï¼Œå¯¼è‡´è´¦æœ¬çŠ¶æ€çš„ä¸€æ¬¡æ”¹å˜ï¼Œå¦‚æ·»åŠ ä¸€æ¡è½¬è´¦è®°å½•ï¼› åŒºå—ï¼ˆBlockï¼‰ï¼šè®°å½•ä¸€æ®µæ—¶é—´å†…å‘ç”Ÿçš„æ‰€æœ‰äº¤æ˜“å’ŒçŠ¶æ€ç»“æžœç­‰ï¼Œæ˜¯å¯¹å½“å‰è´¦æœ¬çŠ¶æ€çš„ä¸€æ¬¡å…±è¯†ï¼› é“¾ï¼ˆChainï¼‰ï¼šç”±åŒºå—æŒ‰ç…§å‘ç”Ÿé¡ºåºä¸²è”è€Œæˆï¼Œæ˜¯æ•´ä¸ªè´¦æœ¬çŠ¶æ€å˜åŒ–çš„æ—¥å¿—è®°å½•ã€‚ &emsp;å¦‚æžœæŠŠåŒºå—é“¾ç³»ç»Ÿä½œä¸ºä¸€ä¸ªçŠ¶æ€æœºï¼Œåˆ™æ¯æ¬¡äº¤æ˜“æ„å‘³ç€ä¸€æ¬¡çŠ¶æ€æ”¹å˜ï¼›ç”Ÿæˆçš„åŒºå—ï¼Œå°±æ˜¯å‚ä¸Žè€…å¯¹å…¶ä¸­äº¤æ˜“å¯¼è‡´çŠ¶æ€æ”¹å˜ç»“æžœçš„å…±è¯†ã€‚åŒºå—é“¾çš„ç›®æ ‡æ˜¯å®žçŽ°ä¸€ä¸ªåˆ†å¸ƒçš„æ•°æ®è®°å½•è´¦æœ¬ï¼Œè¿™ä¸ªè´¦æœ¬åªå…è®¸æ·»åŠ ã€ä¸å…è®¸åˆ é™¤ã€‚è´¦æœ¬åº•å±‚çš„åŸºæœ¬ç»“æž„æ˜¯ä¸€ä¸ªçº¿æ€§çš„é“¾è¡¨ã€‚é“¾è¡¨ç”±ä¸€ä¸ªä¸ªâ€œåŒºå—â€ä¸²è”ç»„æˆï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼ŒåŽç»§åŒºå—ä¸­è®°å½•å‰å¯¼åŒºå—çš„å“ˆå¸Œï¼ˆHashï¼‰å€¼ã€‚æŸä¸ªåŒºå—ï¼ˆä»¥åŠå—é‡Œçš„äº¤æ˜“ï¼‰æ˜¯å¦åˆæ³•ï¼Œå¯é€šè¿‡è®¡ç®—å“ˆå¸Œå€¼çš„æ–¹å¼è¿›è¡Œå¿«é€Ÿæ£€éªŒã€‚ç½‘ç»œä¸­èŠ‚ç‚¹å¯ä»¥æè®®æ·»åŠ ä¸€ä¸ªæ–°çš„åŒºå—ï¼Œä½†å¿…é¡»ç»è¿‡å…±è¯†æœºåˆ¶æ¥å¯¹åŒºå—è¾¾æˆç¡®è®¤ã€‚ è®¤è¯†ä¸Šçš„è¯¯åŒºç›®å‰ï¼ŒåŒºå—é“¾è‡ªèº«ä»æ˜¯ä¸€ç§ç›¸å¯¹å¹´è½»çš„æŠ€æœ¯ï¼Œä¸å°‘äººå¯¹å®ƒçš„è®¤è¯†è¿˜å­˜åœ¨ä¸€äº›ä¸è¶³ã€‚ä¸‹é¢æ€»ç»“äº†åœ¨æŽ¢è®¨åŒºå—é“¾æŠ€æœ¯æ—¶å€™ä¸€äº›å¸¸è§çš„è¯¯åŒºï¼š åŒºå—é“¾æ ¸å¿ƒåœ¨äºŽæ¯”ç‰¹å¸ï¼Ÿè™½è¯´åŒºå—é“¾çš„åŸºæœ¬æ€æƒ³å‡ºçŽ°åœ¨æ¯”ç‰¹å¸è®¾è®¡ä¸­ï¼Œä½†å‘å±•åˆ°ä»Šæ—¥ï¼ŒåŠ å¯†è´§å¸å’ŒåŒºå—é“¾å·²ç»ä¿¨ç„¶æˆä¸ºäº†ä¸¤ä¸ªä¸å¤ªç›¸å…³çš„é˜µè¥ã€‚å‰è€…ä¾§é‡ä»Žé‡‘èžè§’åº¦å‘æŽ˜æ¯”ç‰¹å¸ç­‰ä»£å¸çš„å®žéªŒæ€§æ„ä¹‰ï¼›åŽè€…åˆ™ä»ŽæŠ€æœ¯å±‚é¢æŽ¢è®¨å’Œç ”ç©¶åˆ†å¸ƒå¼è´¦æœ¬ç§‘æŠ€å¯èƒ½å¸¦æ¥çš„å•†ä¸šä»·å€¼ï¼Œè¯•å›¾æ‹“å±•åˆ°æ›´å¤šçš„åœºæ™¯ã€‚ åŒºå—é“¾æ˜¯ä¸€ç§æ•°æ®åº“æŠ€æœ¯ è™½ç„¶åŒºå—é“¾ä¹Ÿå¯ä»¥ç”¨æ¥å­˜å‚¨æ•°æ®ï¼Œä½†å®ƒè¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜æ˜¯å¤šæ–¹çš„äº’ä¿¡åä½œé—®é¢˜ã€‚å•çº¯ä»Žå­˜å‚¨æ•°æ®è§’åº¦ï¼ŒåŒºå—é“¾æ•ˆçŽ‡å¯èƒ½ä¸é«˜ï¼Œä¸€èˆ¬ä¹Ÿä¸æŽ¨èæŠŠå¤§é‡åŽŸå§‹æ•°æ®ç›´æŽ¥æ”¾åˆ°åŒºå—é“¾ç³»ç»Ÿä¸Šã€‚å½“ç„¶ï¼ŒçŽ°æœ‰åŒºå—é“¾ç³»ç»Ÿä¸­å¤§é‡ä½¿ç”¨äº†æ•°æ®åº“æŠ€æœ¯ã€‚ä¹Ÿæœ‰ä¼ä¸šå°è¯•å°†åŒºå—é“¾æŠ€æœ¯å¼•å…¥åˆ°åˆ†å¸ƒå¼æ•°æ®åº“é¢†åŸŸï¼Œè§£å†³éžä¸­å¿ƒåŒ–çš„ç®¡ç†ï¼Œå¦‚ BigchainDBã€‚ Token å°±æ˜¯æ•°å­—è´§å¸ï¼Ÿ æ—©åœ¨åŒºå—é“¾æ¦‚å¿µå‡ºçŽ°ä¹‹å‰ï¼ŒTokenï¼ˆä»¤ç‰Œï¼‰å°±å¤§é‡åº”ç”¨åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œä½œä¸ºå¸¦æœ‰æŸç§æƒé™çš„è¯æ˜Žï¼Œå®ƒå¯ä»¥ååŠ©ç³»ç»Ÿåº”ç”¨è¿›è¡Œå¿«é€Ÿåä½œã€‚å› æ­¤ï¼Œåœ¨åŒºå—é“¾ç³»ç»Ÿä¸­ä½¿ç”¨ Token å¯èƒ½åœ¨æŸäº›åº”ç”¨åœºæ™¯ï¼ˆå¦‚æ¸¸æˆç§¯åˆ†ï¼‰ä¸‹æä¾›ç®¡ç†ä¾¿åˆ©ã€‚è€Œæ•°å­—è´§å¸åˆ™å¼ºè°ƒç»æµŽä»·å€¼ï¼Œè·Ÿå…¶åœ¨ç³»ç»Ÿä¸­çš„åŽŸç”ŸåŠŸèƒ½æ— å¿…ç„¶è”ç³»ã€‚ åŒºå—é“¾æ˜¯ä¸‡èƒ½çš„ï¼Œæ˜¯é¢ è¦†æ€§çš„ï¼Ÿ ä½œä¸ºèžåˆå¤šé¡¹å·²æœ‰æŠ€æœ¯è€Œå‡ºçŽ°çš„äº‹ç‰©ï¼ŒåŒºå—é“¾è·ŸçŽ°æœ‰æŠ€æœ¯ä½“ç³»æ˜¯ä¸€è„‰ç›¸æ‰¿çš„ã€‚å®ƒåœ¨è§£å†³å¤šæ–¹åˆä½œå’Œå¯ä¿¡å¤„ç†ä¸Šå‘å‰å¤šèµ°äº†ä¸€æ­¥ï¼Œä½†å¹¶ä¸æ„å‘³ç€å®ƒè§£å†³äº†æ‰€æœ‰é—®é¢˜ï¼Œæ›´ä¸ä¼šå¿«é€Ÿé¢ è¦†å¤§é‡çš„å•†ä¸šæ¨¡å¼ã€‚å¾ˆé•¿ä¸€æ®µæ—¶é—´é‡Œï¼ŒåŒºå—é“¾æœ€é€‚ç”¨çš„åœºæ™¯ä»éœ€ä¸æ–­æ‘¸ç´¢ï¼ŒåŒºå—é“¾ä¹Ÿä¼šè·Ÿå·²æœ‰ç³»ç»Ÿå…±å­˜ä½¿ç”¨ã€‚ åŒºå—é“¾å¿…ç„¶æ˜¯éžä¸­å¿ƒåŒ–çš„ï¼Ÿéžä¸­å¿ƒåŒ–çš„ä¸€å®šä¼˜äºŽä¸­å¿ƒåŒ–è®¾è®¡ï¼Ÿè®¨è®ºæŠ€æœ¯çš„ä¼˜åŠ£å¿…é¡»è¦æœ‰åœºæ™¯å‰æï¼ŒåŒºå—é“¾ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å¹¶ä¸å­˜åœ¨æŸç§åŒºå—é“¾æŠ€æœ¯èƒ½åœ¨ä»»æ„åœºæ™¯ä¸‹éƒ½ä¼˜äºŽå…¶å®ƒæ–¹æ¡ˆï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä½•ç›®å‰å…¬å¼€é“¾å’Œè”ç›Ÿé“¾åœ¨æŠ€æœ¯é€‰åž‹ä¸Šå­˜åœ¨è¾ƒå¤§å·®å¼‚ã€‚ä¸­å¿ƒåŒ–è®¾è®¡å…·æœ‰è®¾è®¡ç®€å•ï¼Œç®¡ç†å®Œå–„ï¼Œæ€§èƒ½å¯æŽ§çš„ç‰¹ç‚¹ï¼Œä½†å¾€å¾€å®¹é”™æ€§èƒ½æ¯”è¾ƒå·®ï¼›éžä¸­å¿ƒåŒ–ï¼ˆå¤šä¸­å¿ƒåŒ–ï¼‰çš„è®¾è®¡å¯ä»¥æé«˜å®¹é”™æ€§èƒ½ï¼Œåˆ©ç”¨å¤šæ–¹å…±è¯†æ¥é™ä½Žç¯¡æ”¹é£Žé™©ï¼Œä½†æ„å‘³ç€è®¾è®¡è¾ƒå¤æ‚ï¼Œè¦ä»˜å‡ºæ€§èƒ½ä»£ä»·ã€‚å®žé™…ä¸Šï¼Œæ ¹æ®å®žé™…åœºæ™¯çš„éœ€æ±‚ï¼ŒçŽ°æœ‰å¤§éƒ¨åˆ†åŒºå—é“¾æŠ€æœ¯éƒ½ä»‹äºŽç»å¯¹çš„ä¸­å¿ƒåŒ–å’Œç»å¯¹çš„éžä¸­å¿ƒåŒ–ä¹‹é—´ï¼Œä»¥å–å¾—ä¸åŒæŒ‡æ ‡ä¸Šçš„å¹³è¡¡ã€‚ä¾‹å¦‚å…¬å¼€é“¾ä¸ºäº†æé«˜æ€§èƒ½é€šè¿‡é€‰æ‹©éƒ¨åˆ†ä¿¡ä»»çš„èŠ‚ç‚¹æ¥ä½œä¸ºä»£è¡¨ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[Unix/Linuxæ–‡ä»¶ç±»åž‹ä¸Žæƒé™ç®¡ç†]]></title>
    <url>%2F2019%2F01%2F27%2FUnix%3ALinux%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E4%B8%8E%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%2F</url>
    <content type="text"><![CDATA[&emsp;åœ¨å°ç™½ä¸Žè®¡ç®—æœºçš„æ—¥å¸¸ä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°æ–‡ä»¶æ— ï¼ˆè¯»ã€å†™ã€æ‰§è¡Œï¼‰æƒé™ï¼ŒåŒ…æ‹¬å¾ˆå¤šåˆšå…¥é—¨çš„ç¨‹åºå‘˜ï¼Œä¹Ÿå¸¸å¸¸åœ¨åˆ«äººçš„åšå®¢é‡Œä¼šçœ‹åˆ°ç±»ä¼¼ 777 XX.file```ã€```chmod u+x XX.file```ã€```chmod g-w XX.file```è¿™äº›ä¸æ˜Žè§‰åŽ‰çš„å‘½ä»¤ï¼Œä»Šå¤©æ¥å¸®è¿˜ä¸æ¸…æ¥šçš„ç«¥éž‹ç§‘æ™®ä¸€ä¸‹ï¼Œç”µè„‘ä¸­æ¯ä¸ªæ–‡ä»¶çš„æƒé™ ç³»ç»Ÿç©¶ç«Ÿæ˜¯å¦‚ä½•ç®¡ç†çš„ï¼Œåˆå¦‚ä½•ä¿®æ”¹æ–‡ä»¶çš„æƒé™ã€‚ 12### çœ‹æ‡‚æ–‡ä»¶ç±»åž‹ä¸Žæƒé™ç­‰ä¿¡æ¯&amp;emsp;å…ˆä¸æ…Œï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œåœ¨ä»»æ„éžç©ºç›®å½•ä¸‹æˆ‘ä»¬è¾“å…¥ï¼š ls -l1234567891011ç»ˆç«¯ä¼šè¾“å‡ºè¯¥ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„ä¿¡æ¯ï¼š![](https://user-gold-cdn.xitu.io/2019/1/23/16878e2679f7e8f8?w=1210&amp;h=174&amp;f=png&amp;s=49942)å¥½ï¼Œæˆ‘ä»¬æ¥å¯¹æ¯ä¸€åˆ—æ˜¯ä»€ä¹ˆåˆ†åˆ«ä»‹ç»ï¼š1. -r-xr-xr-xï¼šæ–‡ä»¶ç±»åž‹åŠæƒé™ä¿¡æ¯ æˆ‘ä»¬ä¼šå‘çŽ°ä»»æ„ä¸€ä¸ªæ–‡ä»¶ç¬¬ä¸€åˆ—éƒ½æ˜¯ä¸€ä¸ªç”± - d l p s b c D r w x + @ è¿™äº›å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œè¿™ä¸€ä¸²å­—ç¬¦ç©¶ç«Ÿæ˜¯ç”±å“ªå‡ éƒ¨åˆ†ç»„æˆåˆåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆå‘¢ï¼Ÿ * ç¬¬ä¸€ä½å­—ç¬¦ï¼šæ–‡ä»¶ç±»åž‹ä¿¡æ¯ï¼Œ-ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªå¸¸è§„æ–‡ä»¶--Regular fileï¼Œdä»£è¡¨è¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹--Directoryï¼Œlä»£è¡¨æ–‡ä»¶é“¾æŽ¥--Symbolic linkï¼Œæ›´å¤šæ–‡ä»¶ç±»åž‹ï¼ˆp-Named pipeã€s-Socketã€b/c-Device fileã€D-Doorï¼‰è¯·å‚è€ƒ[Unix file types]((https://en.wikipedia.org/wiki/Unix_file_types)) * ç¬¬2-10ä½ï¼Œè¿™ä¹ä½å­—ç¬¦æ¯ä¸‰ä¸ªä¸ºä¸€ç»„ï¼Œæ¯ç»„çš„ä¸‰ä¸ªå­—ç¬¦åˆ†åˆ«ä»£è¡¨è¯»(r)ã€å†™(w)ã€æ‰§è¡Œ(x)æƒé™ï¼Œä¸‰ç»„åˆ†åˆ«ä»£è¡¨ä¸åŒæ‰€æœ‰è€…å¯¹è¯¥æ–‡ä»¶çš„æƒé™ï¼Œç¬¬ä¸€ç»„ï¼šæ–‡ä»¶æ‰€æœ‰è€…çš„æƒé™ã€ç¬¬äºŒç»„ï¼šè¿™ä¸€ç»„å…¶ä»–ç”¨æˆ·çš„æƒé™ã€ç¬¬ä¸‰ç»„ï¼šéžæœ¬ç»„ç”¨æˆ·çš„æƒé™ï¼Œæ€»ç»“å¦‚ä¸‹å›¾ï¼š![](https://user-gold-cdn.xitu.io/2019/1/23/16878dd01879f1d6?w=2142&amp;h=796&amp;f=png&amp;s=455829) * åœ¨MacOSç³»ç»Ÿä¸­ï¼Œè¾“å…¥```ls -l``` å‘çŽ°æ–‡ä»¶æƒé™æ ¼å¼ä¸ŽLinuxç¨æœ‰ä¸åŒï¼Œéƒ¨åˆ†æ–‡ä»¶æƒé™ä¿¡æ¯çš„æœ«å°¾æœ‰â€+â€œæˆ–â€@â€œç¬¦å·ï¼š![](https://user-gold-cdn.xitu.io/2019/1/23/16878df88b3644fa?w=1110&amp;h=266&amp;f=png&amp;s=70168)æˆ‘ä»¬ç›´æŽ¥çœ‹å®˜æ–¹è¯´æ˜Žï¼šç»ˆç«¯è¾“å…¥```man ls```ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸€æ®µè¯´æ˜Žï¼š If the file or directory has extended attributes, the permissions field printed by the -l option is followed by a &apos;@&apos; character. Otherwise, if the file or directory has extended security information (such as an access control list), the permissions field printed by the -l option is followed by a &apos;+&apos; character. é‚£ä»€ä¹ˆæ˜¯â€œextended securityâ€å‘¢ï¼Ÿå…¶å®žå°±æ˜¯æ‰©å±•å®‰å…¨ä¿¡æ¯ æ‰§è¡Œls -leæŸ¥çœ‹extended security: ![](https://user-gold-cdn.xitu.io/2019/1/23/16879719bf49f408?w=1506&amp;h=380&amp;f=png&amp;s=91760) ä½ ä¼šå‘çŽ°æƒé™æœ«å°¾æœ‰&#39;+&#39;çš„éƒ½ä¼šæœ‰0: group:everyone deny delete`ï¼Œæ„ä¹‰å°±å¾ˆæ˜Žæ˜¾å•¦~ é‚£ä»€ä¹ˆåˆæ˜¯â€œextended attributesâ€å‘¢ï¼Ÿç»§ç»­æŸ¥çœ‹â€œ@â€çš„å«ä¹‰ï¼Œæ‰§è¡Œ ls -l@æˆ–xattr -l XX.file æŸ¥çœ‹æ‰©å±•å±žæ€§ï¼šç®€å•ç†è§£@å°±æ˜¯è¡¨ç¤ºæ–‡ä»¶æˆ–ç›®å½•æœ‰é¢å¤–å±žæ€§ï¼Œæ¯”å¦‚åœ¨MacOSä¸Š ä»Žç½‘ä¸Šä¸‹è½½ä¸ªæ–‡ä»¶æœ‰æ—¶ä¼šæç¤ºâ€œæ­¤æ–‡ä»¶æ¥è‡ªç½‘ç»œä¸‹è½½ä¸å®‰å…¨â€ï¼Œå°±æ˜¯è¿™ä¸ªå±žæ€§èµ·çš„ä½œç”¨ã€‚è€Œä»ŽMacOSä¸‹copyæ–‡ä»¶åˆ°Linuxç³»ç»Ÿä¸Šæ—¶ä¹Ÿä¼šå› ä¸ºè¿™ä¸ªå±žæ€§å‡ºçŽ°æ‰“ä¸å¼€çš„æƒ…å†µã€‚å¯ä»¥æ‰‹åŠ¨åŽ»é™¤æŽ‰ï¼šxattr -c XX.fileã€‚ å…¶ä½™æ¯ä¸€åˆ—å¯¹åº”çš„ä¿¡æ¯å¦‚ä¸‹ï¼š[ç±»åž‹+æƒé™]â€”[è¿žæŽ¥]-[æ‰€æœ‰è€…]-[æ‰€å±žç»„]-[æ–‡ä»¶å¤§å°]-[æœ€åŽä¿®æ”¹æ—¥æœŸ]-[æ–‡ä»¶åç§°] æ–‡ä»¶æƒé™çš„ä¿®æ”¹ï¼šä¸€å¼ å›¾çœ‹æ‡‚ä¿®æ”¹æ–‡ä»¶æƒé™çš„å‘½ä»¤ï¼šé€šè¿‡æŒ‰ä½ä¸Žçš„è®¾è®¡å·§å¦™çš„ç”¨ä¸‰ä¸ªäºŒè¿›åˆ¶ä½è¡¨ç¤ºäº†ä¸‰ç§æƒé™äº§ç”Ÿçš„8ç§ç»„åˆã€‚ç”¨ç¬¦å·æ”¹å˜æƒé™æ—¶ï¼Œå¦‚ï¼šchmod a+r XX.fileè¡¨ç¤ºå¯¹ç”¨æˆ·ã€ç»„ã€å…¶ä»– å…¨éƒ¨æ·»åŠ è¯»å–æƒé™ã€‚ ä»¥ä¸Šï¼Œæœ‰ä»»ä½•ç–‘é—®æ¬¢è¿Žç•™è¨€~]]></content>
  </entry>
  <entry>
    <title><![CDATA[æ’¸ä¸€ä¸ª iOS é‡ç­¾åè„šæœ¬]]></title>
    <url>%2F2019%2F01%2F23%2F%E6%92%B8%E4%B8%80%E4%B8%AAiOS%E9%87%8D%E7%AD%BE%E5%90%8D%E8%84%9A%E6%9C%AC%2F</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡iOS APPç­¾åè¯¦è§£æˆ‘ä»¬äº†è§£äº†iOSç­¾åçš„æœºåˆ¶å’ŒåŽŸç†ï¼Œè¿™ä¸€ç¯‡æˆ‘ä»¬ä¸€èµ·æ¥åŠ¨æ‰‹å†™ä¸€ä¸ªè‡ªåŠ¨é‡ç­¾åçš„è„šæœ¬ï¼Œæ‡’æ˜¯ç¨‹åºå‘˜ä¹ƒè‡³äººç±»è¿›æ­¥çš„ç»ˆæžåŠ›é‡ï¼Œé€ è½®å­å†™å·¥å…·å¯ä»¥æžå¤§çš„é¿å…é‡å¤æ€§å·¥ä½œï¼Œä¸ºæˆ‘ä»¬èŠ‚çœæ›´å¤šçš„æ—¶é—´æ”¾åœ¨æ€è€ƒä¸Šï¼Œè¯ä¸å¤šè¯´æ’¸èµ·è¢–å­å¼€å§‹å¹²ï¼š ç¬¬ä¸€æ­¥ï¼šèŽ·å–è„±å£³çš„ipaåŒ… ä»ŽiTunes 12.6.3åŠä»¥å‰çš„ç‰ˆæœ¬ä¸Šç›´æŽ¥ä¸‹è½½ ï¼ˆmacOS Mojave Doesnâ€™t Supportï¼‰ï¼Œè¿™æ ·èŽ·å–åˆ°çš„æ˜¯æ­£ç‰ˆipaï¼Œéœ€è¦ç”¨Clutchã€dumdecryptedç­‰å·¥å…·å…ˆè„±å£³ï¼Œå¦åˆ™åˆ«äººçš„åŠ å¯†éªŒè¯ä¸é€šè¿‡æ— æ³•å®‰è£… å„ç±»åŠ©æ‰‹ä¸Šä¸‹è½½è¶Šç‹±ç‰ˆipaåŒ… è¶Šç‹±æ‰‹æœºå¯¼å‡º Xcodeæ‰“åŒ… ç­‰ç­‰ è¿™é‡Œæˆ‘ä¸‹è½½äº†å¾®ä¿¡çš„è¶Šç‹±ç‰ˆipaåŒ…ç”¨æ¥æ¼”ç¤ºã€‚ ç¬¬äºŒæ­¥ï¼šå‘½ä»¤è¡Œå®žçŽ°é‡ç­¾å å°†ipaè§£åŽ‹ç¼©åŽå‰å¾€.appæ‰€åœ¨ç›®å½•ï¼Œè¾“å…¥ -d -vv WeChat.app``` 1234567891011121314151617181920212223 æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶çš„ç­¾åä¿¡æ¯ï¼š![](https://user-gold-cdn.xitu.io/2019/1/22/1687194244bf3be8?w=1424&amp;h=376&amp;f=png&amp;s=245630)å¯ä»¥çœ‹åˆ°ç­¾åä¿¡æ¯çŽ°åœ¨è¿˜æ˜¯è…¾è®¯çš„ 2. è¾“å…¥ï¼š ```security find-identity -v -p codesigning``` æŸ¥çœ‹Macæœ¬åœ°çš„è¯ä¹¦åˆ—è¡¨:![](https://user-gold-cdn.xitu.io/2019/1/22/16871950dcd0e283?w=1592&amp;h=272&amp;f=png&amp;s=114415) è®°ä¸‹ä½ è¦ç”¨æ¥ç­¾åçš„è¯ä¹¦åŒå¼•å·ï¼ˆåŒ…æ‹¬åŒå¼•å·ï¼‰ä¸­çš„å­—ç¬¦ä¸²ï¼Œä¸€ä¼šå„¿ä¼šç”¨åˆ° 3. ç¡®è®¤ipaåŒ…æ˜¯å¦å·²ç»è„±å£³ï¼Œè¾“å…¥ï¼š ```cd WeChat.app``` ```otool -l WeChat | grep crypt``` ä¼šè¾“å‡ºï¼š![](https://user-gold-cdn.xitu.io/2019/1/22/16871958f396421c?w=988&amp;h=244&amp;f=png&amp;s=94527) cryptidä¸º0å³ä¸ºå·²è„±å£³ï¼Œä¸º1ä¸ºåŠ å¯†çŠ¶æ€ã€‚è¿™é‡Œæœ‰ä¸¤ç»„æ•°æ®æ˜¯å› ä¸ºè¿™æ˜¯ä¸ªæ”¯æŒä¸¤ç§CPUæž¶æž„çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯è¾“å…¥```file WeChat```æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶æ”¯æŒçš„æž¶æž„ï¼š![](https://user-gold-cdn.xitu.io/2019/1/22/16871961777d44a5?w=1396&amp;h=142&amp;f=png&amp;s=108757)4. åˆ é™¤æ— æ³•ç­¾åçš„æ’ä»¶æ–‡ä»¶ï¼šPlugInsæ–‡ä»¶å¤¹ã€Watchæ–‡ä»¶å¤¹ 5. å¯¹.appæ–‡ä»¶å¤¹å†…çš„Frameworksæ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸€ä¸ªframeworkå¼ºåˆ¶é‡ç­¾åï¼š ```codesign -fs æ­¥éª¤2ä¸­è®°ä¸‹çš„è¯ä¹¦ä¿¡æ¯ è¦ç­¾åçš„.framework``` æ³¨æ„ä¸è¦é—æ¼ï¼Œæ¯ä¸€ä¸ªframeworkéƒ½è¦ç”¨è‡ªå·±çš„è¯ä¹¦é‡ç­¾ä¸€ä¸‹6. å°†è‡ªå·±çš„æè¿°æ–‡ä»¶åæ”¹ä¸ºembedded.mobileprovisionï¼Œå¹¶æ‹–å…¥åˆ°.appä¸­ï¼Œå†å°†.appä¸­info.plistæ–‡ä»¶é‡Œçš„Bundle identifieræ”¹æˆæˆ‘ä»¬è‡ªå·±çš„BundleID7. åœ¨.appåŒçº§ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªentitlements.plistæ–‡ä»¶ï¼ŒæŸ¥çœ‹æè¿°æ–‡ä»¶å†…å®¹ï¼š ```security cms -D -i embedded.mobileprovision```å°†EntitlementsèŠ‚ç‚¹ä¸‹çš„ ... ... 12345 å¤åˆ¶ç²˜è´´åˆ°åˆšåˆšæ–°å»ºçš„entitlements.plistæ–‡ä»¶ä¸­8. æœ€åŽä¸€æ­¥ï¼Œå¯¹æ•´ä¸ªåŒ…ç­¾åï¼Œå›žåˆ°.appæ‰€åœ¨ç›®å½•ï¼Œè¾“å…¥ï¼š ```codesign -fs æ­¥éª¤2ä¸­è®°ä¸‹çš„è¯ä¹¦ä¿¡æ¯ --no-strict --entitlements=entitlements.plist WeChat.app``` ç­¾åæˆåŠŸï¼9. æ‰“åŒ…ï¼š```zip -ry WeiChat.ipa Payload ä»¥ä¸Šï¼Œå°±æ˜¯é€šè¿‡å‘½ä»¤è¡Œä¸€æ­¥æ­¥çš„å®žçŽ°åº”ç”¨é‡ç­¾åã€‚ æœ€åŽï¼šæ’¸è‡ªåŠ¨é‡ç­¾åçš„è„šæœ¬çŽ°åœ¨æˆ‘å°±æŒ‰ç…§è¿™ä¸ªæ€è·¯å†™è„šæœ¬ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657#$&#123;SRCROOT&#125; å®ƒæ˜¯å·¥ç¨‹æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•TEMP_PATH=&quot;$&#123;SRCROOT&#125;/Temp&quot;#èµ„æºæ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬æå‰åœ¨å·¥ç¨‹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªAPPæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ”¾ipaåŒ…ASSETS_PATH=&quot;$&#123;SRCROOT&#125;/APP&quot;#ç›®æ ‡ipaåŒ…è·¯å¾„TARGET_IPA_PATH=&quot;$&#123;ASSETS_PATH&#125;/*.ipa&quot;#æ¸…ç©ºTempæ–‡ä»¶å¤¹rm -rf &quot;$&#123;SRCROOT&#125;/Temp&quot;mkdir -p &quot;$&#123;SRCROOT&#125;/Temp&quot;#----------------------------------------# 1. è§£åŽ‹IPAåˆ°Tempä¸‹unzip -oqq &quot;$TARGET_IPA_PATH&quot; -d &quot;$TEMP_PATH&quot;# æ‹¿åˆ°è§£åŽ‹çš„ä¸´æ—¶çš„APPçš„è·¯å¾„TEMP_APP_PATH=$(set -- &quot;$TEMP_PATH/Payload/&quot;*.app;echo &quot;$1&quot;)# echo &quot;è·¯å¾„æ˜¯:$TEMP_APP_PATH&quot;#----------------------------------------# 2. å°†è§£åŽ‹å‡ºæ¥çš„.appæ‹·è´è¿›å…¥å·¥ç¨‹ä¸‹# BUILT_PRODUCTS_DIR å·¥ç¨‹ç”Ÿæˆçš„APPåŒ…çš„è·¯å¾„# TARGET_NAME targetåç§°TARGET_APP_PATH=&quot;$BUILT_PRODUCTS_DIR/$TARGET_NAME.app&quot;echo &quot;appè·¯å¾„:$TARGET_APP_PATH&quot;rm -rf &quot;$TARGET_APP_PATH&quot;mkdir -p &quot;$TARGET_APP_PATH&quot;cp -rf &quot;$TEMP_APP_PATH/&quot; &quot;$TARGET_APP_PATH&quot;#----------------------------------------# 3. åˆ é™¤extensionå’ŒWatchAPP.ä¸ªäººè¯ä¹¦æ²¡æ³•ç­¾åExtentionrm -rf &quot;$TARGET_APP_PATH/PlugIns&quot;rm -rf &quot;$TARGET_APP_PATH/Watch&quot;#----------------------------------------# 4. æ›´æ–°info.plistæ–‡ä»¶ CFBundleIdentifier# è®¾ç½®:&quot;Set : KEY Value&quot; &quot;ç›®æ ‡æ–‡ä»¶è·¯å¾„&quot;/usr/libexec/PlistBuddy -c &quot;Set :CFBundleIdentifier $PRODUCT_BUNDLE_IDENTIFIER&quot; &quot;$TARGET_APP_PATH/Info.plist&quot;#----------------------------------------# 5. ç»™MachOæ–‡ä»¶ä¸Šæ‰§è¡Œæƒé™# æ‹¿åˆ°MachOæ–‡ä»¶çš„è·¯å¾„APP_BINARY=`plutil -convert xml1 -o - $TARGET_APP_PATH/Info.plist|grep -A1 Exec|tail -n1|cut -f2 -d\&gt;|cut -f1 -d\&lt;`#ä¸Šå¯æ‰§è¡Œæƒé™chmod +x &quot;$TARGET_APP_PATH/$APP_BINARY&quot;#----------------------------------------# 6. é‡ç­¾åç¬¬ä¸‰æ–¹ FrameWorksTARGET_APP_FRAMEWORKS_PATH=&quot;$TARGET_APP_PATH/Frameworks&quot;if [ -d &quot;$TARGET_APP_FRAMEWORKS_PATH&quot; ];thenfor FRAMEWORK in &quot;$TARGET_APP_FRAMEWORKS_PATH/&quot;*do#ç­¾å/usr/bin/codesign --force --sign &quot;$EXPANDED_CODE_SIGN_IDENTITY&quot; &quot;$FRAMEWORK&quot;donefi å°†å†™å¥½çš„è„šæœ¬ç›´æŽ¥ä¸¢åˆ°.xcodeprojåŒçº§ç›®å½•ä¸­ Xcode â€“&gt; Build Phases â€“&gt; New Run Script Phase: çŽ°åœ¨ï¼Œå°†ä½ è¦é‡ç­¾åçš„ipaåŒ…ä¸¢åˆ°åœ¨å·¥ç¨‹ç›®å½•ä¸‹æ–°å»ºçš„æ–‡ä»¶å¤¹APPä¸­ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹è·Ÿä½ å†™çš„è„šæœ¬ä¸­çš„ç›®æ ‡æ–‡ä»¶å¤¹åŒåå³å¯ï¼‰ï¼Œç›´æŽ¥Runï¼ä»»ä½•åº”ç”¨éƒ½ä¼šåœ¨ä½ çš„çœŸæœºä¸Šè·‘èµ·æ¥äº†ï¼è¿™ä¹Ÿæ˜¯åŽé¢è®²é€†å‘çš„å‡†å¤‡å·¥ä½œã€‚ äº†è§£äº†iOSç­¾åçš„åŽŸç†å†åšé‡ç­¾åï¼Œæˆ‘ç›¸ä¿¡ä¸Šé¢çš„æ¯ä¸€æ­¥ä¸ºä»€ä¹ˆé‚£ä¹ˆåšï¼Œä½ è‡ªç„¶ä¹Ÿå¾ˆæ¸…æ¥šäº†ï¼Œå†™èµ·è„šæœ¬æ¥è‡ªç„¶æ€è·¯ä¹Ÿå¾ˆæ¸…æ™°~å¦‚æžœä½ åœ¨å®žè·µä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿Žç•™è¨€äº¤æµ~]]></content>
  </entry>
  <entry>
    <title><![CDATA[iOS APPç­¾åæœºåˆ¶è¯¦è§£]]></title>
    <url>%2F2019%2F01%2F18%2FiOS%20APP%E7%AD%BE%E5%90%8D%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[è‹¹æžœçš„éœ€æ±‚ ä¸ºäº†ä¿è¯ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œæ‰€æœ‰iPhoneä¸Šå®‰è£…çš„åº”ç”¨å¿…é¡»æ˜¯ç»è¿‡è‹¹æžœæŽˆæƒçš„ å®‰è£…åŒ…ä¸éœ€è¦ä¸Šä¼ åˆ°App Storeä¹Ÿèƒ½è¢«å®‰è£… ï¼ˆå¼€å‘è°ƒè¯• ä¼ä¸šç°åº¦ï¼‰ é˜²æ­¢è¯ä¹¦æƒé™æ»¥ç”¨ï¼šè®¾å¤‡é™åˆ¶ã€æŒ‡å®šAPPã€iCloud/PUSH/åŽå°è¿è¡Œç­‰é™„åŠ æƒé™æŽ§åˆ¶ è‹¹æžœçš„è§£å†³æ–¹æ¡ˆï¼šåŒå±‚ä»£ç ç­¾å+æè¿°æ–‡ä»¶: è¿™é‡Œç”»ä¸€å¼ å›¾é™„ä¸Šï¼š &emsp;åœ¨iOSå‡ºæ¥ä¹‹å‰ï¼Œä¸»æµçš„æ“ä½œç³»ç»Ÿï¼ˆMacOS/Windowsï¼‰è½¯ä»¶éšä¾¿ä»Žå“ªé‡Œä¸‹è½½éƒ½èƒ½è¿è¡Œï¼Œç³»ç»Ÿå®‰å…¨å­˜åœ¨éšæ‚£ï¼Œç›—ç‰ˆè½¯ä»¶ã€ç—…æ¯’å…¥ä¾µã€é™é»˜å®‰è£…ç­‰ç­‰ï¼Œè‹¹æžœå¸Œæœ›è§£å†³ç±»ä¼¼çš„é—®é¢˜ï¼Œä¿è¯åœ¨iPhone iOSä¸Šçš„APPéƒ½æ˜¯ç»è¿‡è‹¹æžœå®˜æ–¹å…è®¸çš„ï¼Œæ€Žæ ·ä¿è¯å‘¢ï¼Ÿå°±æ˜¯é€šè¿‡ä»£ç ç­¾åã€‚ &emsp;å¦‚æžœè¦å®žçŽ°éªŒè¯ï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯è‹¹æžœå®˜æ–¹ç”Ÿæˆä¸€å¯¹RSAå…¬ç§é’¥ï¼Œåœ¨iOSç³»ç»Ÿä¸­å†…ç½®ä¸€ä¸ªå…¬é’¥ï¼Œç§é’¥ç”±è‹¹æžœåŽå°ä¿å­˜ï¼Œæˆ‘ä»¬ä¸Šä¼ APPåˆ°App Storeæ—¶è‹¹æžœåŽå°ç”¨ç§é’¥å¯¹APPæ•°æ®è¿›è¡ŒåŠ å¯†ï¼ŒiPhoneä¸‹è½½APPåŽç”¨å…¬é’¥éªŒè¯è¿™ä¸ªç­¾åå°±å¯ä»¥ç¡®è®¤APPæ˜¯å¦ç»è¿‡å…è®¸æˆ–è¢«ä¸‰æ–¹ç¯¡æ”¹è¿‡ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å®‰è£…APPå¹¶ä¸ä»…ä»…åªæœ‰App Storeè¿™ä¸€ä¸ªæ–¹å¼ï¼Œæ¯”å¦‚çœŸæœºè°ƒè¯•ã€ä¼ä¸šåŒ…ç­‰ï¼Œæ‰€ä»¥åªé è¿™ä¸ªç®€å•çš„æ•°å­—ç­¾åæ–¹å¼æ˜¯ä¸å¤Ÿçš„ã€‚ &emsp;äºŽæ˜¯è‹¹æžœè®¾è®¡äº†åŒå±‚ç­¾åçš„æœºåˆ¶ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“iOSçš„åº”ç”¨å¼€å‘å¿…é¡»åœ¨Macç³»ç»Ÿä¸‹è¿›è¡Œï¼Œæ­£æ˜¯ç”±äºŽè¿™ä¸ªä¾èµ–å…³ç³»ï¼ŒåŒå±‚ç­¾åæ‰æœ‰äº†åŸºç¡€ï¼š åœ¨Macç³»ç»Ÿä¸­ç”Ÿæˆä¸€å¯¹éžå¯¹ç§°åŠ å¯†ç®—æ³•çš„å…¬ç§é’¥Mï¼ˆXcodeä¼šå¸®ä½ åšå¥½ï¼‰ è‹¹æžœè‡ªå·±æœ‰å›ºå®šçš„ä¸€å¯¹å…¬ç§é’¥ï¼Œæ­£å¦‚ä¸Šè¿°æœ€ç®€å•çš„ä»£ç ç­¾åä¸­æåˆ°çš„ï¼šç§é’¥Aåœ¨è‹¹æžœåŽå°ï¼Œå…¬é’¥Aåœ¨æ¯ä¸ªiOSç³»ç»Ÿçš„æ‰‹æœºä¸­ æŠŠå…¬é’¥Mä»¥åŠä¸€äº›å¼€å‘è€…ä¿¡æ¯ï¼ˆä¹Ÿå°±æ˜¯CSRæ–‡ä»¶ï¼‰å‘é€ç»™è‹¹æžœåŽå°ï¼Œç”¨è‹¹æžœåŽå°çš„ç§é’¥Aå¯¹å…¬é’¥Mç­¾åï¼Œå¾—åˆ°ä¸€ä»½åŒ…å«å…¬é’¥Mä»¥åŠå…¶ç­¾åç»“æžœçš„æ•°æ®å°±æ˜¯è¯ä¹¦ï¼ˆ.p12ï¼‰ã€‚ åœ¨å¼€å‘æ—¶ï¼Œå½“æˆ‘ä»¬æ‰“åŒ…æ—¶ä¼šç”¨æœ¬åœ°çš„ç§é’¥Mï¼ˆä¹Ÿå°±æ˜¯å¯å¯¼å‡ºç»™å°ä¼™ä¼´çš„å¼€å‘è€…è¯ä¹¦ï¼‰å¯¹è¿™ä¸ªAPPè¿›è¡Œç­¾åï¼ŒåŒæ—¶æŠŠç¬¬ä¸‰æ­¥å¾—åˆ°çš„è¯ä¹¦ä¸€èµ·æ‰“åŒ…è¿›APPé‡Œï¼Œç„¶åŽå®‰è£…åˆ°æ‰‹æœºä¸Šï¼ˆçœŸæœºè”è°ƒï¼‰æˆ–è€…æäº¤App Storeå®¡æ ¸ å®‰è£…æ—¶ï¼ŒiOSç³»ç»Ÿå–å¾—å†…ç½®å…¬é’¥AåŽ»éªŒè¯å…¬é’¥Mçš„æ•°å­—ç­¾åè¯ä¹¦æ˜¯å¦æ­£ç¡® éªŒè¯å…¬é’¥Mæ˜¯è‹¹æžœè®¤è¯è¿‡çš„åŽï¼Œå†ç”¨å…¬é’¥MåŽ»éªŒè¯APPçš„ç­¾åï¼Œè¿™æ ·å°±é—´æŽ¥éªŒè¯äº†è¿™ä¸ªAPPçš„å®‰è£…æ˜¯ç»è¿‡è‹¹æžœå…è®¸çš„äº†ï¼ˆæ³¨æ„è¿™é‡ŒåªéªŒè¯å®‰è£…è¡Œä¸ºï¼Œä¸éªŒè¯APPæ˜¯å¦è¢«æ”¹åŠ¨ï¼Œå› ä¸ºå¼€å‘é˜¶æ®µAPPå†…å®¹æ€»æ˜¯ä¸æ–­å˜åŒ–çš„ï¼‰ &emsp;æœ‰äº†ä¸Šé¢çš„è¿‡ç¨‹å·²ç»å¯ä»¥ä¿è¯å¼€å‘è€…çš„è®¤è¯å’Œç¨‹åºçš„å®‰å…¨äº†ï¼Œä½†æ˜¯å¦‚æžœåªæœ‰ä¸Šè¿°çš„è¿‡ç¨‹ï¼Œé‚£å²‚ä¸æ˜¯åªè¦ç”³è¯·äº†ä¸€ä¸ªè¯ä¹¦å°±å¯ä»¥å®‰è£…åˆ°æ‰€æœ‰çš„iOSè®¾å¤‡äº†ï¼Ÿæ‰€ä»¥ï¼Œè‹¹æžœåˆå¢žåŠ äº†æŽˆæƒæ–‡ä»¶ï¼ˆProvisioning profileï¼‰çš„éªŒè¯ï¼ŒProvisioning profileä¸€èˆ¬åŒ…æ‹¬ä¸‰æ ·ä¸œè¥¿ï¼šè¯ä¹¦ã€APP IDã€è®¾å¤‡ã€‚ &emsp;æè¿°æ–‡ä»¶æ˜¯åœ¨AppleDevelopç½‘ç«™åˆ›å»ºçš„(åœ¨Xcodeä¸­å¡«ä¸ŠAppleIDå®ƒä¼šä»£åŠžåˆ›å»º)ï¼ŒXcodeè¿è¡Œæ—¶ä¼šæ‰“åŒ…è¿›å…¥APPå†…ã€‚åœ¨å¼€å‘æ—¶ï¼Œç¼–è¯‘å®Œä¸€ä¸ª APP åŽï¼Œç”¨æœ¬åœ°çš„ç§é’¥Må¯¹è¿™ä¸ªAPPè¿›è¡Œç­¾åï¼ŒåŒæ—¶æŠŠä»Žè‹¹æžœæœåŠ¡å™¨å¾—åˆ°çš„ Provisioning Profile æ–‡ä»¶æ‰“åŒ…è¿›APPé‡Œï¼Œæ–‡ä»¶åä¸ºembedded.mobileprovisionï¼Œå½“æŠŠAPPå®‰è£…åˆ°æ‰‹æœºä¸Šæ—¶ï¼ŒiOSç³»ç»Ÿä¼šè¿›è¡ŒéªŒè¯ã€‚ &emsp;ä»¥ä¸Šå°±æ˜¯iOSåº”ç”¨ç­¾åçš„åŽŸç†ï¼Œä¸‹ä¸€ç¯‡åŸºäºŽè¿™ä¸ªåŽŸç†æˆ‘ä¼šæ‰‹æ’¸ä¸€ä¸ªè‡ªåŠ¨é‡ç­¾åçš„è„šæœ¬ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆiOSä¸­å¸¸ç”¨åŠ å¯†ç®—æ³•çš„ä½¿ç”¨]]></title>
    <url>%2F2019%2F01%2F12%2F%E6%B5%85%E8%B0%88iOS%E4%B8%AD%E5%B8%B8%E7%94%A8%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[&emsp;ä»¥å‰å¦‚æžœæˆ‘ä»¬å¿˜è®°äº†ç™»å½•å¯†ç ï¼Œé€šå¸¸å¯ä»¥é€šè¿‡â€œæ‰¾å›žå¯†ç â€è¿™æ ·çš„æ–¹å¼æ‹¿å›žå¯†ç ï¼Œé‚£è¯´æ˜Žä½ çš„éšç§æ•°æ®åœ¨ä»–ä»¬çš„æ•°æ®åº“ä¸­æ˜¯æ˜Žæ–‡ä¿å­˜çš„ï¼ŒçŽ°åœ¨è¯·åˆ‡è®°ï¼šå¦‚æžœå“ªä¸ªå¹³å°è¿˜æœ‰è¿™æ ·çš„æ–¹å¼è¯·ç«‹åˆ»é©¬ä¸Šæ³¨é”€ä½ çš„è´¦å·ï¼Œå¹¶é¿å…åœ¨ä»»ä½•å…¶ä»–å¹³å°ä½¿ç”¨è¿™ä¸ªå¹³å°ä½¿ç”¨è¿‡çš„å¯†ç ã€‚è¯·åšä¿¡ï¼šåœ¨ç½‘ç»œä¸–ç•Œä¸­ï¼Œåªè¦æ˜¯æ˜Žæ–‡å­˜åœ¨æˆ–å¯é€†çš„ä¸œè¥¿ï¼Œéƒ½æ˜¯ä¸å®‰å…¨çš„ã€‚æ²¡æœ‰å“ªå®¶å…¬å¸ä¼šå‘Šè¯‰ä½ ä»–ä»¬çš„æ•°æ®åº“è¢«æ‹–åº“è¿‡ï¼Œä½ æ›´æ— æ³•æƒ³è±¡çŽ°åœ¨çš„é»‘è‰²äº§ä¸šæ—©å·²è®©ä½ æ¯«æ— éšç§ã€‚ &emsp;åƒä¸‡åˆ«ä¸€ä¸ªå¯†ç èµ°å¤©ä¸‹ï¼Œä¸€å®šè¦å®šæœŸæ”¹å¯†ç ï¼ &emsp;é“é«˜ä¸€å°ºé­”é«˜ä¸€ä¸ˆï¼Œå¯¹ç”¨æˆ·éšç§åŠä¸€äº›æ•æ„Ÿæ•°æ®çš„ä¿æŠ¤è¶Šæ¥è¶Šé‡è¦ï¼Œåœ¨iOSä¸­ï¼Œè‹¹æžœå°è£…äº†Security.frameworkã€CommonCrypto.frameworkè¿™ä¸¤ä¸ªä¿æŠ¤ä¿¡æ¯å®‰å…¨çš„åº“ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†å®‰å…¨ç›¸å…³çš„é€šç”¨APIï¼š RSAï¼šå…¬ç§é’¥çš„ç”Ÿæˆã€å…¬é’¥åŠ å¯†ã€ç§é’¥è§£å¯†ã€ç§é’¥ç­¾åã€å…¬é’¥éªŒç­¾åŠŸèƒ½ï¼Œè¯ä¹¦ä¿¡æ¯çš„è¯»å–ï¼Œä»¥åŠå¯†é’¥åœ¨KeyChainä¸­å­˜å‚¨ï¼ŒæŸ¥æ‰¾ï¼Œåˆ é™¤ç­‰åŠŸèƒ½ å“ˆå¸Œï¼šSHA1ã€SHA224ã€SHA256ã€SHA384ã€SHA512MD2ã€MD4ã€MD5 å¯¹ç§°åŠ å¯†ï¼šDESã€3DESã€AES &emsp;è¿™ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°±ä»¥â€œç”¨æˆ·è¾“å…¥å¯†ç ï¼Œç™»å½•ï¼ŒæœåŠ¡ç«¯éªŒè¯ç”¨æˆ·ä¿¡æ¯ï¼Œç”¨æˆ·ä¸Šä¼ éšç§æ•°æ®â€è¿™ä¸ªå¸¸è§åœºæ™¯ä¸ºä¾‹ï¼Œåˆ†äº«ä¸€äº›å¯†ç å­¦å¸¸è¯†å’ŒåŠ å¯†æ—¶å¸¸ç”¨çš„é˜²ç ´è§£æŠ€å·§ï¼Œè‡³äºŽä¸Šè¿°ç®—æ³•ç›¸å…³APIçš„ä½¿ç”¨ï¼Œæ–‡æœ«æˆ‘ä¼šé™„ä¸ŠiOSä¸­æ‰€æœ‰å¸¸ç”¨åŠ å¯†APIä½¿ç”¨çš„demoï¼Œè¿™é‡Œå°±ä¸æµªè´¹ç¯‡å¹…è´´ä»£ç äº†ã€‚å…ˆè¯´ä¸¤ä¸ªä¿æŠ¤ç”¨æˆ·éšç§çš„åŽŸåˆ™ï¼š ç½‘ç»œä¸Šä¸å…è®¸æ˜Žæ–‡ä¼ é€’ç”¨æˆ·éšç§ä¿¡æ¯ æœ¬åœ°ä¸å…è®¸æ˜Žæ–‡ä¿å­˜ç”¨æˆ·éšç§ä¿¡æ¯ &emsp;å†äº†è§£ä¸‹å‡ ç§ç®—æ³•çš„ç‰¹ç‚¹ï¼š å¯¹ç§°åŠ å¯† åŠ å¯†è§£å¯†å…±ç”¨ä¸€ä¸ªå¯†é’¥ DES æ•°æ®åŠ å¯†æ ‡å‡†ï¼Œå®‰å…¨å¼ºåº¦ä¸å¤Ÿå·²ç»å¾ˆå°‘ç”¨äº† 3DES ä½¿ç”¨ä¸‰ä¸ªå¯†é’¥å¯¹ç›¸åŒçš„æ•°æ®æ‰§è¡Œä¸‰æ¬¡åŠ å¯† å¼ºåº¦ç•¥é«˜ï¼Œä½†å¯†é’¥çš„ä¿æŠ¤ä¸€ç›´æ˜¯ä¸ªéšæ‚£æ‰€ä»¥ä¹Ÿä¸å¸¸ç”¨ AES é«˜çº§å¯†ç æ ‡å‡† ç”¨å¾—æœ€å¤š ä¸¤ç§å¸¸ç”¨åŠ å¯†æ¨¡å¼ï¼š ECBï¼š&emsp;æœ€åŸºæœ¬çš„åŠ å¯†æ–¹å¼ï¼Œæ— åˆå§‹å‘é‡ï¼Œç›¸åŒçš„æ˜Žæ–‡æ°¸è¿œç”Ÿæˆä¸å˜çš„å¯†æ–‡ï¼Œå®¹æ˜“å—åˆ°å¯†ç æœ¬é‡æ”¾æ”»å‡»ï¼Œå¾ˆå°‘ç”¨ CBCï¼š&emsp;æ˜Žæ–‡è¢«åŠ å¯†å‰è¦ä¸Žå‰é¢çš„å¯†æ–‡è¿›è¡Œå¼‚æˆ–è¿ç®—åŽå†åŠ å¯†ï¼Œå› æ­¤åªè¦é€‰æ‹©ä¸åŒçš„åˆå§‹å‘é‡ï¼Œç›¸åŒçš„å¯†æ–‡åŠ å¯†åŽä¼šå½¢æˆä¸åŒçš„å¯†æ–‡ï¼Œè¿™æ˜¯ç›®å‰åº”ç”¨æœ€å¹¿æ³›çš„æ¨¡å¼ã€‚CBCåŠ å¯†åŽçš„å¯†æ–‡æ˜¯ä¸Šä¸‹æ–‡ç›¸å…³çš„ï¼Œä½†æ˜Žæ–‡çš„é”™è¯¯ä¸ä¼šä¼ é€’åˆ°åŽç»­åˆ†ç»„ï¼Œä½†å¦‚æžœä¸€ä¸ªåˆ†ç»„ä¸¢å¤±ï¼ŒåŽé¢çš„åˆ†ç»„å°†å…¨éƒ¨ä½œåºŸ(åŒæ­¥é”™è¯¯)ã€‚&emsp;å¯ä»¥æœ‰æ•ˆçš„ä¿è¯å¯†æ–‡çš„å®Œæ•´æ€§ï¼Œå¦‚æžœä¸€ä¸ªæ•°æ®å—åœ¨ä¼ é€’æ˜¯ä¸¢å¤±æˆ–æ”¹å˜ï¼ŒåŽé¢çš„æ•°æ®å°†æ— æ³•æ­£å¸¸è§£å¯†ã€‚ RSAå…³äºŽRSAç›¸å…³çŸ¥è¯†è¯·å‚è€ƒï¼šéžå¯¹ç§°åŠ å¯†â€“RSAåŽŸç†æµ…æžRSAçš„ä¸»åœº-è¯ä¹¦ç­¾åä¹‹OpenSSLæ¼”ç¤º è¿™é‡Œä¸å†èµ˜è¿°ã€‚ å“ˆå¸Œç®—æ³•ä¹Ÿå°±æ˜¯å¸¸è¯´çš„æ•£åˆ—å‡½æ•°ï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šå®ƒå¹¶ä¸æ˜¯ä¸€ç§åŠ å¯†ç®—æ³•ï¼Œä½†å®ƒå¸¸å¸¸ä¸ŽåŠ å¯†ç®—æ³•ä¸€èµ·å‡ºçŽ°ï¼Œä½œä¸ºä¸€ç§ç»„åˆæ–¹å¼ã€‚å“ˆå¸Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š ç®—æ³•æ˜¯å…¬å¼€çš„ å¯¹ç›¸åŒçš„æ•°æ®è¿ç®—ï¼Œå¾—åˆ°çš„ç»“æžœæ˜¯ä¸€æ ·çš„ åŒä¸€ç®—æ³•å¯¹ä¸åŒçš„æ•°æ®è¿ç®—ï¼Œå¾—åˆ°çš„ç»“æžœé•¿åº¦æ˜¯å›ºå®šçš„ï¼Œå¦‚MD5çš„ç»“æžœä¸€å®šæ˜¯128bitï¼Œ32ä¸ªå­—ç¬¦(16è¿›åˆ¶è¡¨ç¤º)ï¼Œæ‰€ä»¥æ•£åˆ—ç¢°æ’žæ˜¯å¿…ç„¶çš„å¶ç„¶ ä¸å¯é€†ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å½©è™¹è¡¨åŽ»åæŸ¥è¯¢ é€šå¸¸ä½œä¸ºä¿¡æ¯â€œæŒ‡çº¹â€â€“ä¿¡æ¯æ‘˜è¦ï¼Œç”¨æ¥åšæ•°æ®è¯†åˆ«ï¼ˆç‰ˆæƒã€æœç´¢å¼•æ“Žã€æ•°å­—ç­¾åç­‰ï¼‰ã€‚ å®žé™…åº”ç”¨&emsp;çŸ¥é“äº†æ¯ç§ç®—æ³•çš„ç‰¹ç‚¹ï¼Œå›žåˆ°åº”ç”¨åœºæ™¯ï¼šç”¨æˆ·è¾“å®Œå¯†ç ç‚¹å‡»ç™»å½•æ—¶ï¼Œæˆ‘ä»¬å¦‚ä½•ä¿è¯ç”¨æˆ·ä¿¡æ¯æ˜¯è¶³å¤Ÿå®‰å…¨çš„å‘¢ï¼Ÿ å¯¹ç§°åŠ å¯†ï¼šå¯†é’¥ä¼ è¾“æœ‰éšæ‚£ï¼Œä¸”åœ¨å®¢æˆ·ç«¯åŠ å¯†å‰å’ŒæœåŠ¡ç«¯è§£å¯†åŽä¼šå‡ºçŽ°æ˜Žæ–‡ï¼Œä¸å®‰å…¨ã€‚ RSAï¼šå®‰å…¨æ€§é«˜ï¼Œç½‘ç»œåŠ«æŒå¾ˆéš¾ç ´è§£ï¼Œä½†æ˜¯æœåŠ¡ç«¯æ‹¿åˆ°å®¢æˆ·ç«¯åŠ å¯†åŽçš„å¯†æ–‡æ€Žä¹ˆåŠžå‘¢ï¼Ÿç”¨ç§é’¥è§£å¯†ï¼Œè§£å¯†ä¹‹åŽæ‹¿åˆ°æ˜Žæ–‡ä¿¡æ¯ï¼Ÿå¤§å¿Œï¼Œæ²¡æœ‰å“ªä¸ªæœåŠ¡ç«¯æ˜¯å®‰å…¨çš„ï¼Œæ›´æ²¡æ³•ä¿è¯æ•°æ®åº“äººå‘˜çš„ä¸ªäººæ³„éœ²ç”¨æˆ·ä¿¡æ¯ã€‚ä¸å¯å–ã€‚ å“ˆå¸Œï¼š ç›´æŽ¥MD5ï¼Ÿç”¨æˆ·è¾“å…¥å¸¸è§„ç»„åˆæ¦‚çŽ‡å¾ˆå¤§ï¼Œæš´åŠ›ç ´è§£é£Žé™©å¾ˆé«˜ï¼Œä¸å¯å–ã€‚æœ¬åœ°åŠ ç›ï¼Œå¾ˆå˜æ€çš„ç›ï¼Ÿå®‰å…¨æ€§æœ‰ä¸€å®šä¿éšœï¼Œç¼ºç‚¹æ˜¯ç›å†™æ­»åœ¨ç¨‹åºé‡Œäº†ï¼Œå†™ä»£ç çš„äººä¹Ÿæœ‰æ³„éœ²çš„å¯èƒ½æ€§ï¼Œä¸€æ—¦æ³„æ¼ç»“æžœæ˜¯æ¯ç­æ€§çš„ï¼Œä¸å¯å–ã€‚ HMACï¼šKeyed-Hashing for Message Authenticationï¼Œè¿™æ˜¯ä¸€ç§ä½¿ç”¨å•å‘æ•£åˆ—å‡½æ•°æ¥æž„é€ æ¶ˆæ¯è®¤è¯ç çš„æ–¹æ¡ˆï¼Œè€Œä¸æ˜¯ç®—æ³•ã€‚&emsp; åœ¨ç¬¬ä¸€æ¬¡æ³¨å†Œæ—¶ï¼ŒæœåŠ¡ç«¯ä¸‹å‘ä¸€ä¸ªéšæœºå¯†é’¥ nï¼Œè¿™ä¸ªå¯†é’¥ä¼šåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½ä¿å­˜ä¸€ä»½ï¼ˆæ”¯æŒæœåŠ¡ç«¯æ›´æ–°ï¼‰ï¼Œå®¢æˆ·ç«¯çš„ n ç”¨ä½œä»¥åŽæ¯æ¬¡ç™»å½•æ—¶çš„â€œç›â€å‚ä¸Žç¬¬ä¸€æ¬¡æ•£åˆ—è¿ç®—ï¼Œå¹¶å°†ç¬¬ä¸€æ¬¡æ•£åˆ—è¿ç®—çš„ç»“æžœ s å‘ç»™æœåŠ¡ç«¯ä½œä¸ºç”¨æˆ·å¯†ç ä¿¡æ¯ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™æ ·ç”¨æˆ·çš„çœŸå®žå¯†ç æ— è®ºæ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡ç«¯éƒ½ä¸çŸ¥é“ï¼Œä¹Ÿä¸å­˜åœ¨æ•°æ®åº“è¢«æ‹–åº“æ³„éœ²çš„é—®é¢˜ã€‚æœåŠ¡ç«¯ä¿å­˜çš„ n ç”¨äºŽå½“ç”¨æˆ·æ¢è®¾å¤‡ç™»å½•æˆ–å¸è½½é‡æ–°è£…æ—¶éªŒè¯é€šè¿‡åŽå†æ¬¡å°† n ä¸‹å‘ç»™å®¢æˆ·ç«¯ä¿å­˜ã€‚&emsp;ç”¨æˆ·æ¯æ¬¡ç™»å½•æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå†åŠ¨æ€ä¸‹å‘ä¸€ä¸ªéšæœºå€¼ä½œä¸ºå¯†é’¥ï¼Œå¹¶åœ¨ä¼šè¯ä¸­è®°ä¸‹è¿™ä¸ªéšæœºå€¼ rï¼Œå®¢æˆ·ç«¯å…ˆç”¨æœ¬åœ°ä¿å­˜çš„ n å¯¹ç”¨æˆ·å¯†ç åšæ•£åˆ—è¿ç®—å¾—åˆ° s ï¼Œå†ç”¨ r å¯¹ s åšä¸€æ¬¡MACï¼ˆMessage Authentication Codesï¼‰è¿ç®—å¹¶å°†è¿ç®—ç»“æžœå‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä¹Ÿä»Žæ•°æ®åº“ä¸­å–å‡ºç”¨æˆ·çš„å¯†ç æ•£åˆ—å€¼åšåŒæ ·çš„è¿ç®—ï¼Œå¹¶å°†ç»“æžœä¸Žå®¢æˆ·ç«¯è¿›è¡Œå¯¹æ¯”ã€‚ä¸ºäº†é˜²æ­¢ç½‘ç»œä¸­é—´äººæ”»å‡»ï¼Œè¿˜éœ€å°†æ—¶é—´æˆ³ï¼ˆæœåŠ¡å™¨æ—¶é—´ï¼Œä¸€èˆ¬ç²¾ç¡®åˆ°åˆ†é’Ÿï¼‰å‚ä¸Žæ ¡éªŒï¼Œé»‘å®¢å°±å¾ˆéš¾ç ´è§£äº†ã€‚è¿™æ˜¯ç›®å‰æœ€ä¸»æµçš„å®‰å…¨æ–¹æ¡ˆã€‚ &emsp;çŽ°åœ¨ç”¨æˆ·ç™»å½•æˆåŠŸï¼ŒçŽ°åœ¨è¦ä¸Šä¼ ä¸€ä»½æ•æ„Ÿæ•°æ®ï¼Œæˆ‘ä»¬å¦‚ä½•ä¿è¯æ•°æ®çš„å®Œæ•´æ€§å‘¢ï¼Ÿç»“åˆä¸Šé¢çš„åˆ†æžï¼ŒæŽ¨èAESçš„CBCåŠ å¯†æ–¹å¼ï¼Œå®‰å…¨æ€§é«˜ï¼Œè¿˜èƒ½ä¿è¯å®Œæ•´æ€§ï¼Œæ•°å­—ç­¾ååŒæ ·ä¹Ÿå¯ä»¥éªŒè¯æ•°æ®å®Œæ•´æ€§ï¼Œç”¨RSAå¯¹æ•°æ®çš„hashå€¼è¿›è¡ŒåŠ å¯†ï¼ŒæœåŠ¡ç«¯æŽ¥æ”¶å®Œæ•°æ®åŽï¼Œç”¨ç§é’¥è§£å¯†å¾—åˆ°hashå€¼ï¼Œä¸ŽæŽ¥æ”¶æ•°æ®çš„hashå€¼ä½œæ¯”å¯¹ã€‚ è¡¥å……ï¼šiOSä¸­å¸¸è§åŠ å¯†ç®—æ³•çš„ä½¿ç”¨ï¼šEncryptDemoåœ¨Demoä¸­ï¼Œå¯¹ç§°åŠ å¯†AESçš„åŠ å¯†è§£å¯†å‡½æ•°ï¼š CCCryptorStatus CCCrypt( CCOperation op, /* kCCEncrypt, etc. */ CCAlgorithm alg, /* kCCAlgorithmAES128, etc. */ CCOptions options, /* kCCOptionPKCS7Padding, etc. */ const void *key, size_t keyLength, const void *iv, /* optional initialization vector */ const void *dataIn, /* optional per op and alg */ size_t dataInLength, void *dataOut, /* data RETURNED here */ size_t dataOutAvailable, size_t *dataOutMoved) API_AVAILABLE(macos(10.4), ios(2.0)); è°ƒç”¨CCCryptæ—¶ï¼Œç”¨æˆ·æ•æ„Ÿæ•°æ®ä¸è¦ç›´æŽ¥ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œå¦åˆ™é€†å‘å¾ˆå®¹æ˜“hookåˆ°ï¼Œé€šå¸¸çš„åšæ³•æ˜¯å¯¹æ•æ„Ÿæ•°æ®åšå¼‚æˆ–ã€åŠ ç›ç­‰å¤„ç†ï¼Œå…·ä½“æ ¹æ®éœ€è¦è‡ªå·±è®¾è®¡ã€‚ iOS appç­¾åæœºåˆ¶è¯¦è§£ æŽ¨èé˜…è¯»ï¼šiOSåº”ç”¨ç­¾å(ä¸Š)iOSåº”ç”¨ç­¾å(ä¸‹) iOSä¸­å¯¹é’¥åŒ™ä¸²çš„æ“ä½œæŽ¨èï¼šSSKeyChain å®žè·µå‡ºçœŸçŸ¥ï¼Œä¸‹ç¯‡å†ä¼š~è€è§„çŸ©ï¼Œæœ‰é”™è¯¯è¯·ç§¯æžæŒ‡æ­£ï¼Œæœ‰é—®é¢˜è¯·è¸Šè·ƒç•™è¨€ã€‚ æ›´å¤šä¸€æ‰‹å¥½æ–‡æ›´æ–°ï¼Œè¯·å…³æ³¨æˆ‘çš„ä¸ªäººå¾®ä¿¡å…¬ä¼—å·ï¼šé¢å‘æœªæ¥ç¼–ç¨‹]]></content>
  </entry>
  <entry>
    <title><![CDATA[RSAçš„ä¸»åœº-è¯ä¹¦ç­¾å&OpenSSLæ¼”ç¤º]]></title>
    <url>%2F2019%2F01%2F09%2FRSA%E7%9A%84%E4%B8%BB%E5%9C%BA-%E8%AF%81%E4%B9%A6%E7%AD%BE%E5%90%8D%26OpenSSL%E6%BC%94%E7%A4%BA%2F</url>
    <content type="text"><![CDATA[&emsp;åœ¨ä¸Šä¸€ç¯‡éžå¯¹ç§°åŠ å¯†â€“RSAåŽŸç†æµ…æžä¸­ï¼Œæˆ‘ä»¬äº†è§£äº†RSAåŠ å¯†çš„æ•°å­¦åŽŸç†ï¼ŒRSAçš„å®‰å…¨æ€§ç›®å‰è™½ç„¶å¾—åˆ°å…¬è®¤ï¼Œä½†å®ƒåŒæ ·ä¹Ÿæœ‰ç¼ºç‚¹ï¼šåŠ å¯†é€Ÿåº¦æ…¢ã€æ€§èƒ½è¾ƒä½Žï¼Œä¸é€‚åˆå¯¹å¤§æ–‡ä»¶ç›´æŽ¥åšåŠ å¯†ï¼Œéœ€è¦åŠ å¯†çš„åŽŸå§‹æ•°æ®é€šå¸¸ä¼šå…ˆç»è¿‡Base64ã€Hashã€å¯¹ç§°åŠ å¯†ç­‰å¤„ç†åŽï¼Œå†ç”¨RSAå¯¹å…¶è¿›è¡ŒåŠ å¯†ï¼Œå› æ­¤RSAæœ€ä¸»è¦çš„åº”ç”¨åœºæ™¯ï¼Œæ˜¯æ•°å­—ç­¾åâ€“å¯¹æ•°æ®åšèº«ä»½/åˆæ³•æ€§æ ¡éªŒã€‚&emsp;æƒå¨çš„è¯ä¹¦é¢å‘æœºæž„â€“èººç€èµšé’±çš„CAï¼Œå°±æ˜¯ç”¨çš„RSAè¿™ä¸€å¥—ç®—æ³•ï¼Œè¿™ä¸€ç¯‡æˆ‘ä»¬ä¸€èµ·ç”¨å‘½ä»¤è¡Œæ¥é€æ­¥æ‹†è§£è¯ä¹¦çš„ç”Ÿæˆè¿‡ç¨‹ï¼Œæ­å¼€è¯ä¹¦èƒŒåŽçš„ç§˜å¯†ã€‚Talk is cheapï¼Œshow you the codeï¼ŒCome onï¼ ä»€ä¹ˆæ˜¯OpenSSL&emsp;SSLå¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œæˆ‘ä»¬è®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œä»¥HTTPSå¼€å¤´çš„è¡¨ç¤ºä½ å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“çš„æ•°æ®ç»è¿‡äº†åŠ å¯†ï¼Œè¿™é‡Œæ‰€ä½¿ç”¨çš„åŠ å¯†åè®®å°±æ˜¯SSLï¼ˆSecure Sockets Layerï¼ŒåŽæ¥åˆæŽ¨å‡ºäº†å®ƒçš„åŽç»­ç‰ˆæœ¬ï¼Œæ”¹åå«TLSï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠŠHTTPåè®®ç»è¿‡ä¸€å±‚SSLåè®®è¿›è¡ŒåŠ å¯†åŒ…è£…ï¼Œå°±å˜æˆäº†HTTPSã€‚å½“ç„¶ï¼ŒSSL/TLSè¿˜ç”¨åœ¨å¾ˆå¤šåè®®ä¸­ï¼Œä¾‹å¦‚VPNã€åŠ å¯†çš„ç”µå­é‚®ä»¶åè®®ç­‰ã€‚&emsp;é‚£OpenSSLæ˜¯å•¥ï¼Ÿåœ¨SSLåè®®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å¾ˆå¤šå¯†ç å­¦æ‰‹æ®µæ¥ä¿æŠ¤æ•°æ®ï¼Œå…¶ä¸­åŒ…æ‹¬å¯¹ç§°å¯†ç ã€å…¬é’¥å¯†ç ã€æ•°å­—ç­¾åã€è¯ä¹¦ã€å®Œæ•´æ€§æ ¡éªŒã€ä¼ªéšæœºæ•°ç”Ÿæˆç­‰ã€‚ç”±äºŽè¿™äº›ç®—æ³•å’Œæ“ä½œéƒ½éžå¸¸å¤æ‚ï¼ŒäºŽæ˜¯å¼€æºç¤¾åŒºå°±å¼€å‘äº†ä¸€å¥—åº“ï¼Œè¿™ä¸ªåº“é‡Œé¢æä¾›äº†å¾ˆå¤šçŽ°æˆçš„æ ‡å‡†æ–¹æ³•ï¼Œå…¶ä»–å¼€å‘è€…åªè¦ç”¨æ­£ç¡®è°ƒç”¨è¿™äº›æ–¹æ³•ï¼Œå°±å¯ä»¥å®žçŽ°SSLåè®®ä¸­çš„å„ç§åŠ å¯†/è§£å¯†æ“ä½œäº†ã€‚å› æ­¤ï¼ŒOpenSSLæ˜¯ä¸€å¥—å¼€æºçš„å¯†ç å­¦å·¥å…·åŒ…ï¼ˆopen source cryptography toolkitï¼‰ã€‚æƒ…ç†ä¹‹ä¸­çš„ï¼ŒOpenSSLä¹Ÿæ”¯æŒäº†RSAç®—æ³•ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬å°±ç”¨OpenSSLåœ¨macOSçš„ç»ˆç«¯ä¸Šä¸ºå¤§å®¶æ¼”ç¤ºè¯ä¹¦ç­¾åçš„æ¯ä¸€ä¸ªæ­¥éª¤ã€‚ RSAåŠ å¯†ã€è¯ä¹¦ç”Ÿæˆç»ˆç«¯æ¼”ç¤º&emsp;ä¸ºäº†ä¾¿äºŽè§‚å¯Ÿï¼Œè¯·å¼€è¾Ÿå¹¶å‰å¾€ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ä¸‹å¼€å§‹ä½ çš„è¡¨æ¼”~è¾“å…¥ï¼š12345openssl genrsa -out private.pem 2048``` æ­¤æ—¶ç›®å½•ä¸­å‡ºçŽ°ä¸€ä¸ªprivate.pemæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«äº†ç§é’¥ä¿¡æ¯ æ ¹æ®ç§é’¥ç”Ÿæˆå…¬é’¥ è¾“å…¥ï¼š openssl rsa -in private.pem -pubout -out public.pem1åˆ†åˆ«æŸ¥çœ‹æ–‡ä»¶ä¸­çš„å†…å®¹ï¼š cat private.pem1234```cat public.pem``` ä½ ä¼šå¾—åˆ°è¿™æ ·ç±»ä¼¼è¿™æ ·çš„ç»“æžœï¼š â€”â€“BEGIN RSA PRIVATE KEYâ€”â€“Base64ç¼–ç çš„å†…å®¹â€”â€“END RSA PRIVATE KEYâ€”â€“123456```-----BEGIN PUBLIC KEY-----Base64ç¼–ç çš„å†…å®¹-----END PUBLIC KEY-----``` çŽ°åœ¨æˆ‘ä»¬éšä¾¿å†™ä¸€ä¸ªtxtæ–‡ä»¶ä½œä¸ºè¦åŠ å¯†çš„æ•°æ®ï¼š echo â€œhello word!â€œ &gt; message.txt1ç”¨å…¬é’¥å¯¹å…¶åŠ å¯†ï¼š openssl rsautl -encrypt -in message.txt -inkey public.pem -pubin -out enc.txt12æŸ¥çœ‹åŠ å¯†åŽçš„æ–‡ä»¶ï¼š```cat enc.txt```ï¼Œä½ åªèƒ½çœ‹åˆ°ä¸€å †ä¹±ç  ç”¨ç§é’¥å¯¹åŠ å¯†æ–‡ä»¶è§£å¯†ï¼š openssl rsautl -decrypt -in enc.txt -inkey private.pem -out dec.txt123æŸ¥çœ‹è§£å¯†ç»“æžœï¼š```cat dec.txt```ï¼Œä¸Žä½ çš„message.txtå†…å®¹å®Œç¾Žå»åˆ~ ä¸Šé¢çš„è¿‡ç¨‹åè¿‡æ¥ï¼ˆç§é’¥åŠ å¯† å…¬é’¥è§£å¯†ï¼‰ä¸€ä¸ªé“ç†ï¼Œä½†æ‰§è¡Œå‘½ä»¤æœ‰ç‚¹åŒºåˆ«ï¼š ç”¨ç§é’¥å¯¹å…¶åŠ å¯†ï¼š openssl rsautl -sign -in message.txt -inkey private.pem -out enc.bat1ç”¨å…¬é’¥å¯¹åŠ å¯†æ–‡ä»¶è§£å¯†ï¼š openssl rsautl -verify -in enc.bat -inkey public.pem -pubin -out dec.txt1&amp;emsp;è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†RSAåŠ å¯†è§£å¯†çš„æ“ä½œï¼Œé‚£æˆ‘ä»¬å¼€å‘ä¸­ç”¨çš„è¯ä¹¦è·Ÿå®ƒä»¬æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼ŸåšiOSå¼€å‘çš„éƒ½ç”¨é’¥åŒ™ä¸²ä»ŽCAè¯·æ±‚è¿‡csræ–‡ä»¶ï¼Œå…¶å®žå°±æ˜¯æ ¹æ®å½“å‰Macå†…ç½®çš„ç§é’¥ï¼ˆå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šç§é’¥ï¼‰ç”Ÿæˆå¯¹åº”çš„å…¬é’¥ï¼Œç”Ÿæˆçš„csræ–‡ä»¶åŒ…å«äº†å…¬é’¥è¯ä¹¦åŽŸå§‹æ–‡ä»¶+ä½ çš„æœåŠ¡å™¨ä¿¡æ¯å’Œå•ä½ç­‰ä¿¡æ¯ã€‚æˆ‘ä»¬æ¥ç”¨å‘½ä»¤æ‰§è¡Œè¿™ä¸€æ­¥æ“ä½œï¼š openssl req -new -key private.pem -out rsacert.csr1æ ¹æ®æç¤ºä¾æ¬¡è¾“å…¥ä¸‹åˆ—ä¿¡æ¯å¹¶å›žè½¦: Country Name (2 letter code) []:State or Province Name (full name) []:Locality Name (eg, city) []:Organization Name (eg, company) []:Organizational Unit Name (eg, section) []:Common Name (eg, fully qualified host name) []:Email Address []:A challenge password []:1æ‹¿åˆ°å¸¦ç€å…¬é’¥ä¿¡æ¯çš„csræ–‡ä»¶ä¹‹åŽï¼Œä¸‹ä¸€æ­¥å°±æ˜¯äº¤ç»™CAè®¤è¯ä¸­å¿ƒè¿›è¡Œç­¾åï¼Œä¹Ÿå°±æ˜¯è®©CAç›–ä¸ªç« ï¼ˆä¸€ä¸ªç« ä¸€å¹´äº”åƒå¤§æ´‹@_@ï¼Œå¦‚æžœä½ çš„httpsç”¨è‡ªç­¾çš„è¯ä¹¦é‚£åˆ«äººè®¿é—®æ—¶æœ‰ä¸å®‰å…¨æç¤ºå°±æ˜¯å› ä¸ºä½ æ²¡æœ‰CAç›–çš„è¿™ä¸ªç« ï¼Œä¸è¢«æ‰¿è®¤æ˜¯å®‰å…¨çš„ï¼‰ï¼š openssl x509 -req -days 3650 -in rsacert.csr -signkey private.pem -out rsacert.crt1è¿™æ—¶å¾—åˆ°çš„crtæ–‡ä»¶æ˜¯Base64ç¼–ç çš„ï¼Œæˆ‘ä»¬éœ€è¦è½¬æˆDERäºŒè¿›åˆ¶æ ¼å¼çš„è¯ä¹¦æ‰èƒ½ç›´æŽ¥ä½¿ç”¨ï¼š openssl x509 -outform der -in rsacert.crt -out rsacert.der123è¿™ä¸ªrsacert.deræ–‡ä»¶å°±æ˜¯åŒ…å«äº†æˆ‘ä»¬å…¬é’¥ä¿¡æ¯çš„è¯ä¹¦ï¼ ![](https://user-gold-cdn.xitu.io/2019/1/9/16832dfe1997dfd0?w=1022&amp;h=826&amp;f=png&amp;s=172453)æœ€åŽä¸€æ­¥ï¼Œå¯¼å‡ºå…¬é’¥è¯ä¹¦å¯¹åº”çš„ç§é’¥è¯ä¹¦ï¼š openssl pkcs12 -export -out p.p12 -inkey private.pem -in rsacert.crt12345![](https://user-gold-cdn.xitu.io/2019/1/9/16832e25c325de5f?w=1004&amp;h=816&amp;f=png&amp;s=165762)è¾“å…¥ä¸¤æ¬¡ç§é’¥è¯ä¹¦çš„å¯†ç å°±å¾—åˆ°äº†æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„.p12æ–‡ä»¶ã€‚ &amp;emsp;å½“ç„¶ï¼Œåœ¨æˆ‘ä»¬å®žé™…å¼€å‘ä¸­ä¸ä¼šåŒæ—¶æ‹¿åˆ°è¿™ä¸¤ä¸ªè¯ä¹¦ï¼Œè¿™é‡Œåªæ˜¯ç»™å¤§å®¶æ¼”ç¤ºå®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼ŒåŽé¢æˆ‘ä¼šå¯¹è‹¹æžœçš„åŒå‘éªŒè¯(åŒå±‚ç­¾å)åŽŸç†ä¸“é—¨å†™ä¸€ç¯‡æ–‡ç« è®²è§£ ### è¡¥å……&amp;emsp;å…³äºŽ.pemæ–‡ä»¶å†…éƒ¨çš„æ•°æ®ç»“æž„å¯ä»¥é€šè¿‡å‘½ä»¤ openssl rsa -in private.pem -text -out ptivate.txt`æŸ¥çœ‹ï¼Œptivate.txtæ–‡ä»¶ä¸­æ¯ä¸€é¡¹çš„å…·ä½“æ„ä¹‰è¯·å‚è€ƒï¼ˆPEMæ ¼å¼ï¼‰è§£æž&emsp;åœ¨ä¸Šé¢çš„å‘½ä»¤ä¸­å¦‚æžœæœ‰äº›ä¸æ˜Žè§‰åŽ‰çš„çŽ©æ„å„¿ï¼Œé‚£å¤šåŠæ˜¯ä½ å¯¹è¯ä¹¦ç›¸å…³çš„æ–‡ä»¶ç¼–ç æ ¼å¼ã€åè®®å’Œæ‰©å±•åä¸å¤ªç†Ÿæ‚‰ï¼Œä¸è¦æ…Œï¼Œæˆ‘å·²ç»ä¸ºä½ å‡†å¤‡å¥½äº†åŠ é¤ã€‚ é«˜èƒ½é¢„è­¦â€”â€”è¯ä¹¦æ–‡ä»¶ç¼–ç æ ¼å¼ã€æ‰©å±•åã€åè®®ç§‘æ™®&emsp;æˆ‘ä»¬ç»Ÿä¸€é‡‡ç”¨X.509çš„æ ¼å¼æ ‡å‡†ç”Ÿæˆè¯ä¹¦ï¼ŒæŽ¥è§¦è¿‡è¯ä¹¦çš„åŒå­¦çœ‹åˆ°ï¼špemã€derã€pfxã€jksã€kdbã€cerã€keyã€csrã€crtã€crlã€ocspã€scepç­‰è¿™äº›å­—çœ¼ä¸€å®šä¸ä¼šå®Œå…¨é™Œç”Ÿï¼Œè¿™äº›ä¸œä¸œç©¶ç«Ÿæ˜¯ä¸ªå•¥ï¼Ÿèµ¶ç´§æ¥ä¸€æŽ¢ç©¶ç«Ÿï¼Œæœ‰æè¿°ä¸å‡†ç¡®çš„åœ°æ–¹è¿˜æœ›æŒ‡æ­£ï¼š ç¼–ç æ ¼å¼ DERï¼šï¼ˆDistinguished Encoding Rulesï¼‰çš„ç¼©å†™ï¼Œå®ƒæ˜¯å¤§å¤šæ•°æµè§ˆå™¨çš„ç¼ºçœæ ¼å¼ï¼Œå¹¶æŒ‰ ASN1 DER æ ¼å¼å­˜å‚¨ï¼Œå®ƒæ˜¯æ— æŠ¥å¤´çš„ã€‚å¯åŒ…å«æ‰€æœ‰ç§é’¥ã€å…¬é’¥å’Œè¯ä¹¦ã€‚ PEMï¼šï¼ˆPrivacy Enhanced Mailï¼‰çš„ç¼©å†™ï¼Œå®ƒæ˜¯OpenSSLé»˜è®¤é‡‡ç”¨çš„ä¿¡æ¯å­˜æ”¾æ–¹å¼ï¼Œå®ƒå­˜å‚¨ç”¨Base64ç¼–ç çš„DERæ ¼å¼æ•°æ®ï¼Œç”¨ASCIIæŠ¥å¤´åŒ…å›´ï¼Œå› æ­¤é€‚åˆç³»ç»Ÿä¹‹é—´çš„æ–‡æœ¬æ¨¡å¼ä¼ è¾“ã€‚å¯ä»¥åŒ…æ‹¬æ‰€æœ‰ç§é’¥ã€å…¬é’¥å’Œè¯ä¹¦ã€‚ æ–‡ä»¶æ‰©å±•å .pem - (éšç§å¢žå¼ºåž‹ç”µå­é‚®ä»¶) DERç¼–ç çš„è¯ä¹¦å†è¿›è¡ŒBase64ç¼–ç çš„æ•°æ®å­˜æ”¾åœ¨â€â€”â€“BEGIN CERTIFICATEâ€”â€“â€å’Œâ€â€”â€“END CERTIFICATEâ€”â€“â€ä¹‹ä¸­ .cer, .crt, .der - é€šå¸¸æ˜¯DERäºŒè¿›åˆ¶æ ¼å¼çš„è¯ä¹¦ï¼Œä½†Base64ç¼–ç åŽä¹Ÿå¾ˆå¸¸è§ .p7b, .p7c - PKCS#7 SignedData structure without data, just certificate(s) or CRL(s)ï¼ŒåŠ å¯†æ¶ˆæ¯è¯­æ³•(pkcs7),æ˜¯å„ç§æ¶ˆæ¯å­˜æ”¾çš„æ ¼å¼æ ‡å‡†ã€‚è¿™äº›æ¶ˆæ¯åŒ…æ‹¬:æ•°æ®ã€ç­¾åæ•°æ®ã€æ•°å­—ä¿¡å°ã€ç­¾åæ•°å­—ä¿¡å°ã€æ‘˜è¦æ•°æ®å’ŒåŠ å¯†æ•°æ®ã€‚ .p12 - PKCS#12æ ¼å¼ï¼ŒåŒ…å«è¯ä¹¦çš„åŒæ—¶å¯èƒ½è¿˜æœ‰å¸¦å¯†ç ä¿æŠ¤çš„ç§é’¥ .pfx - PFXï¼ŒPKCS#12ä¹‹å‰çš„æ ¼å¼ï¼ˆé€šå¸¸ç”¨PKCS#12æ ¼å¼ï¼Œæ¯”å¦‚é‚£äº›ç”±IISäº§ç”Ÿçš„PFXæ–‡ä»¶ï¼‰ .jks - é€šå¸¸å¯ä»¥å°†Apache/OpenSSLä½¿ç”¨çš„â€œ.keyæ–‡ä»¶ + .crtæ–‡ä»¶â€æ ¼å¼è½¬æ¢ä¸ºæ ‡å‡†çš„Java Key Store(JKS)æ–‡ä»¶ã€‚JKSæ–‡ä»¶æ ¼å¼è¢«å¹¿æ³›çš„åº”ç”¨åœ¨åŸºäºŽJAVAçš„WEBæœåŠ¡å™¨ã€åº”ç”¨æœåŠ¡å™¨ã€ä¸­é—´ä»¶ã€‚ä½ å¯ä»¥å°†JKSæ–‡ä»¶å¯¼å…¥åˆ°TOMCATã€WEBLOGIC ç­‰è½¯ä»¶ .kdb - é€šå¸¸å¯ä»¥å°†Apache/OpenSSLä½¿ç”¨çš„â€œ.keyæ–‡ä»¶ + .crtæ–‡ä»¶â€æ ¼å¼è½¬æ¢ä¸ºæ ‡å‡†çš„IBM KDBæ–‡ä»¶ã€‚KDBæ–‡ä»¶æ ¼å¼è¢«å¹¿æ³›çš„åº”ç”¨åœ¨IBMçš„WEBæœåŠ¡å™¨ã€åº”ç”¨æœåŠ¡å™¨ã€ä¸­é—´ä»¶ã€‚ä½ å¯ä»¥å°†KDBæ–‡ä»¶å¯¼å…¥åˆ°IBM HTTP Serverã€IBM Websphere ç­‰è½¯ä»¶ .csr - è¯ä¹¦è¯·æ±‚æ–‡ä»¶(Certificate Signing Request)ã€‚ç”ŸæˆX509æ•°å­—è¯ä¹¦å‰,ä¸€èˆ¬å…ˆç”±ç”¨æˆ·æäº¤è¯ä¹¦ç”³è¯·æ–‡ä»¶,ç„¶åŽç”± CA æ¥ç­¾å‘è¯ä¹¦ã€‚ .key - ä¸€èˆ¬æŒ‡PEMæ ¼å¼çš„ç§é’¥æ–‡ä»¶ï¼Œä¹Ÿå¯èƒ½æ˜¯DERæ ¼å¼çš„ .crl - è¯ä¹¦åŠé”€åˆ—è¡¨ (Certification Revocation List)æ˜¯ä¸€ç§åŒ…å«æ’¤é”€çš„è¯ä¹¦åˆ—è¡¨çš„ç­¾åæ•°æ®ç»“æž„ã€‚CRLæ˜¯è¯ä¹¦æ’¤é”€çŠ¶æ€çš„å…¬å¸ƒå½¢å¼,CRL å°±åƒä¿¡ç”¨å¡çš„é»‘åå•,ç”¨äºŽå…¬å¸ƒæŸäº›æ•°å­—è¯ä¹¦ä¸å†æœ‰æ•ˆã€‚CRLæ˜¯ä¸€ç§ç¦»çº¿çš„è¯ä¹¦çŠ¶æ€ä¿¡æ¯ã€‚å®ƒä»¥ä¸€å®šçš„å‘¨æœŸè¿›è¡Œæ›´æ–°ã€‚CRLå¯ä»¥åˆ†ä¸ºå®Œå…¨CRLå’Œå¢žé‡CRLã€‚åœ¨å®Œå…¨CRLä¸­åŒ…å«äº†æ‰€æœ‰çš„è¢«æ’¤é”€è¯ä¹¦ä¿¡æ¯,å¢žé‡CRLç”±ä¸€ç³»åˆ—çš„CRLæ¥è¡¨æ˜Žè¢«æ’¤é”€çš„è¯ä¹¦ä¿¡æ¯,å®ƒæ¯æ¬¡å‘å¸ƒçš„CRLæ˜¯å¯¹å‰é¢å‘å¸ƒCRLçš„å¢žé‡æ‰©å……ã€‚åŸºæœ¬çš„CRLä¿¡æ¯æœ‰:è¢«æ’¤é”€è¯ä¹¦åºåˆ—å·ã€æ’¤é”€æ—¶é—´ã€æ’¤é”€åŽŸå› ã€ç­¾åè€…ä»¥åŠ CRL ç­¾åç­‰ä¿¡æ¯ã€‚åŸºäºŽCRLçš„éªŒè¯æ˜¯ä¸€ç§ä¸ä¸¥æ ¼çš„è¯ä¹¦è®¤è¯ã€‚CRLèƒ½è¯æ˜Žåœ¨CRLä¸­è¢«æ’¤é”€çš„è¯ä¹¦æ˜¯æ— æ•ˆçš„ã€‚ä½†æ˜¯,å®ƒä¸èƒ½ç»™å‡ºä¸åœ¨CRLä¸­çš„è¯ä¹¦çš„çŠ¶æ€ã€‚å¦‚æžœæ‰§è¡Œä¸¥æ ¼çš„è®¤è¯,éœ€è¦é‡‡ç”¨åœ¨çº¿æ–¹å¼è¿›è¡Œè®¤è¯,å³OCSPè®¤è¯ã€‚ä¸€èˆ¬æ˜¯ç”±CAç­¾åçš„ä¸€ç»„ç”µå­æ–‡æ¡£ï¼ŒåŒ…æ‹¬äº†è¢«åºŸé™¤è¯ä¹¦çš„å”¯ä¸€æ ‡è¯†ï¼ˆè¯ä¹¦åºåˆ—å·ï¼‰ï¼ŒCRLç”¨æ¥åˆ—å‡ºå·²ç»è¿‡æœŸæˆ–åºŸé™¤çš„æ•°å­—è¯ä¹¦ã€‚å®ƒæ¯éš”ä¸€æ®µæ—¶é—´å°±ä¼šæ›´æ–°ï¼Œå› æ­¤å¿…é¡»å®šæœŸä¸‹è½½è¯¥æ¸…å•ï¼Œæ‰ä¼šå–å¾—æœ€æ–°ä¿¡æ¯ åè®® OCSP â€“ åœ¨çº¿è¯ä¹¦çŠ¶æ€åè®®(Online Certificate Status Protocol,rfc2560)ï¼Œç”¨äºŽå®žæ—¶è¡¨æ˜Žè¯ä¹¦çŠ¶æ€ã€‚OCSP å®¢æˆ·ç«¯é€šè¿‡æŸ¥è¯¢ OCSP æœåŠ¡æ¥ç¡®å®šä¸€ä¸ªè¯ä¹¦çš„çŠ¶æ€,å¯ä»¥æä¾›ç»™ä½¿ç”¨è€…ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—è¯ä¹¦çš„æœ‰æ•ˆæ€§èµ„æ–™ï¼Œå®ƒå»ºç«‹ä¸€ä¸ªå¯å®žæ—¶å“åº”çš„æœºåˆ¶ï¼Œè®©ç”¨æˆ·å¯ä»¥å®žæ—¶ç¡®è®¤æ¯ä¸€å¼ è¯ä¹¦çš„æœ‰æ•ˆæ€§ï¼Œè§£å†³ç”±CRLå¼•å‘çš„å®‰å…¨é—®é¢˜ã€‚ã€‚OCSP å¯ä»¥é€šè¿‡ HTTPåè®®æ¥å®žçŽ°ã€‚rfc2560 å®šä¹‰äº† OCSP å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„æ¶ˆæ¯æ ¼å¼ SCEP ï¼ ç®€å•è¯ä¹¦æ³¨å†Œåè®®ï¼ˆSimple Certificate Enrollment Protocolï¼‰ï¼ŒåŸºäºŽæ–‡ä»¶çš„è¯ä¹¦ç™»è®°æ–¹å¼éœ€è¦ä»Žæ‚¨çš„æœ¬åœ°è®¡ç®—æœºå°†æ–‡æœ¬æ–‡ä»¶å¤åˆ¶å’Œç²˜è´´åˆ°è¯ä¹¦å‘å¸ƒä¸­å¿ƒï¼Œå’Œä»Žè¯ä¹¦å‘å¸ƒä¸­å¿ƒå¤åˆ¶å’Œç²˜è´´åˆ°æ‚¨çš„æœ¬åœ°è®¡ç®—æœºã€‚SCEPå¯ä»¥è‡ªåŠ¨å¤„ç†è¿™ä¸ªè¿‡ç¨‹ä½†æ˜¯CRLsä»ç„¶éœ€è¦æ‰‹åŠ¨çš„åœ¨æœ¬åœ°è®¡ç®—æœºå’ŒCAå‘å¸ƒä¸­å¿ƒä¹‹é—´è¿›è¡Œå¤åˆ¶å’Œç²˜è´´ å®žè·µå‡ºçœŸçŸ¥ï¼Œä¸‹ç¯‡å†ä¼š~ è€è§„çŸ©ï¼Œæœ‰é—®é¢˜è¯·è¸Šè·ƒç•™è¨€ã€‚æ›´å¤šä¸€æ‰‹å¥½æ–‡æ›´æ–°è¯·å…³æ³¨æˆ‘çš„ä¸ªäººå¾®ä¿¡å…¬ä¼—å·ï¼šé¢å‘æœªæ¥ç¼–ç¨‹]]></content>
  </entry>
  <entry>
    <title><![CDATA[éžå¯¹ç§°åŠ å¯†--RSAåŽŸç†æµ…æž]]></title>
    <url>%2F2019%2F01%2F07%2F%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86--RSA%E5%8E%9F%E7%90%86%E6%B5%85%E6%9E%90%2F</url>
    <content type="text"><![CDATA[æ¥é¾™åŽ»è„‰&emsp;åœ¨1976å¹´ä»¥å‰ï¼Œæ‰€æœ‰çš„åŠ å¯†æ–¹æ³•éƒ½æ˜¯åŒä¸€ç§æ¨¡å¼ï¼šåŠ å¯†ã€è§£å¯†ä½¿ç”¨åŒä¸€ç§ç®—æ³•ã€‚åœ¨äº¤äº’æ•°æ®çš„æ—¶å€™ï¼Œå½¼æ­¤é€šä¿¡çš„åŒæ–¹å°±å¿…é¡»å°†è§„åˆ™å‘Šè¯‰å¯¹æ–¹ï¼Œå¦åˆ™æ²¡æ³•è§£å¯†ã€‚è¿™ç§åŠ å¯†ä¸Žè§£å¯†ä½¿ç”¨åŒä¸€è§„åˆ™çš„åŠ å¯†æ–¹å¼è¢«ç§°ä¸ºå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚é‚£ä¹ˆåŠ å¯†å’Œè§£å¯†çš„è§„åˆ™ï¼ˆç®€ç§°å¯†é’¥ï¼‰çš„ä¿æŠ¤å°±æ˜¾å¾—å°¤å…¶é‡è¦ï¼Œä¼ é€’å¯†é’¥çš„é£Žé™©ä¹Ÿä¸€ç›´æ˜¯ä¸ªéšæ‚£ã€‚&emsp;ç›´åˆ°1976å¹´ï¼Œä¸¤ä½ç¾Žå›½è®¡ç®—æœºå­¦å®¶ï¼šè¿ªè²ï¼ˆW.Diffieï¼‰ã€èµ«å°”æ›¼ï¼ˆM.Hellmanï¼‰æå‡ºäº†ä¸€ç§å´­æ–°æž„æ€ï¼Œå¯ä»¥åœ¨ä¸ç›´æŽ¥ä¼ é€’å¯†é’¥çš„æƒ…å†µä¸‹å®Œæˆå¯†é’¥äº¤æ¢ï¼Œå¼€åˆ›äº†å¯†ç å­¦ç ”ç©¶çš„æ–°æ–¹å‘ã€‚è¿™å°±æ˜¯â€œè¿ªè²èµ«å°”æ›¼å¯†é’¥äº¤æ¢â€ç®—æ³•ï¼Œå…¶ä»ç„¶æ˜¯ä¸€ç§å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œåªæ˜¯å¯†é’¥ä¸å†éœ€è¦ä¼ é€’ã€‚äº¤æ¢åŽŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå…¶ä¸­aï¼Œbæ˜¯åœ¨é€šä¿¡ä¸¤ç«¯æœ¬åœ°çš„éšæœºæ•°ï¼Œgæ˜¯æ¨¡pçš„ä¸€ä¸ªåŽŸæ ¹ï¼ŒKæ˜¯äº¤æ¢åŽäº§ç”Ÿçš„å¯†é’¥ï¼Œå®‰å…¨æ€§æ¥æºäºŽå½“péžå¸¸å¤§æ—¶ï¼Œå·²çŸ¥gï¼Œpï¼ŒAï¼ŒBå¾ˆéš¾åç®—å‡ºaï¼Œbã€‚ç¦»æ•£å¯¹æ•°é—®é¢˜æ˜¯è¯¥ç®—æ³•çš„åŸºç¡€ã€‚&emsp;1977å¹´ï¼Œä¸‰ä½éº»çœç†å·¥å­¦é™¢çš„æ•°å­¦å®¶ ç½—çº³å¾·Â·æŽç»´æ–¯ç‰¹ï¼ˆRon Rivestï¼‰ã€é˜¿è¿ªÂ·è¨èŽ«å°”ï¼ˆAdi Shamirï¼‰å’Œä¼¦çº³å¾·Â·é˜¿å¾·æ›¼ï¼ˆLeonard Adlemanï¼‰ä¸€èµ·è®¾è®¡äº†ä¸€ç§ç®—æ³•ï¼Œå¯ä»¥å®žçŽ°éžå¯¹ç§°åŠ å¯†ã€‚è¿™å°±æ˜¯ç”¨ä»–ä»¬ä¸‰ä¸ªäººçš„åå­—å‘½åçš„ç®—æ³•â€“RSAç®—æ³•ã€‚&emsp;è¦å¼„æ¸…æ¥šRSAçš„åŠ å¯†åŽŸç†ï¼Œå…ˆè¦çŸ¥é“æ¬§æ‹‰å®šç†)ï¼š å¯¹äºŽä¸¤ä¸ªäº’è´¨çš„æ­£æ•´æ•°mã€nï¼Œm^Ï†(n) mod n â‰¡ 1å½“m&lt;næ—¶ä¸éš¾æŽ¨å¯¼å‡ºï¼šm^(k*Ï†(n)) mod n â‰¡ 1è¿›ä¸€æ­¥å¾—åˆ°ï¼šm^(k*Ï†(n)+1) mod n â‰¡ m åŸºäºŽæ­¤è¿˜éœ€è¦ç†è§£ä¸€ä¸ªæ¦‚å¿µï¼Œæ¨¡åå…ƒç´ ï¼š å¦‚æžœä¸¤ä¸ªæ­£æ•´æ•°eå’Œxäº’è´¨ï¼Œé‚£ä¹ˆä¸€å®šå¯ä»¥æ‰¾åˆ°æ•´æ•°dï¼Œä½¿å¾— e*d-1 è¢«xæ•´é™¤ã€‚é‚£ä¹ˆdå°±æ˜¯eå¯¹äºŽxçš„â€œæ¨¡åå…ƒç´ â€å³ed mod x â‰¡ 1ç­‰åŒäºŽ e\d â‰¡ k*x + 1ï¼Œkä¸ºæ­£æ•´æ•° æ•²é»‘æ¿ï¼ï¼ï¼å…³é”®æ¥äº†ï¼Œä¸Šé¢ä¸¤ä¸ªè½¬æ¢çš„ç»“æžœä¸€ç¢°æ’žï¼ŒDuangï¼å°±ç¢°å‡ºäº†æˆ‘ä»¬RSAçš„æ ¸å¿ƒç®—æ³•ï¼š å½“eä¸ŽÏ†(n)äº’è´¨æ—¶ï¼Œm^(e*d) mod n â‰¡ m é¸¡ä¸é¸¡å†»ï¼Œå¼€ä¸å¼€æ£®ï¼è¿˜æœ‰ç‚¹è¿·ç³Šï¼Ÿæ²¡å…³ç³»ï¼Œæ¥ç»§ç»­ï¼š å‡è®¾æˆ‘ä»¬å¯¹mè¿›è¡ŒåŠ å¯†ä¼ è¾“åŠ å¯†ï¼šm^e mod n = cï¼Œè§£å¯†ï¼šc^d mod n = m^(e*d) mod n = m ä¸Šè¿°è¿‡ç¨‹ä¸­ï¼Œn+eå°±æ˜¯RSAä¸­çš„å…¬é’¥ï¼Œn+då°±æ˜¯RSAä¸­çš„ç§é’¥ï¼Œcæ˜¯åŠ å¯†åŽçš„å¯†æ–‡ã€‚ è¡¥å……ï¼š nä¼šéžå¸¸å¤§ï¼Œé•¿åº¦ä¸€èˆ¬ä¸º1024ä¸ªäºŒè¿›åˆ¶ä½ï¼ŒçŽ°åœ¨ç¨³å¦¥ä¸€ç‚¹çš„é•¿åº¦ä¸º2048ä¸ªäºŒè¿›åˆ¶ä½ã€‚ï¼ˆç›®å‰äººç±»å·²ç»åˆ†è§£çš„æœ€å¤§æ•´æ•°ï¼Œ232ä¸ªåè¿›åˆ¶ä½ï¼Œ768ä¸ªäºŒè¿›åˆ¶ä½ï¼‰ å› ä¸ºéœ€è¦æ±‚å‡ºÏ†(n)ï¼Œæ‰€ä»¥æ ¹æ®æ¬§æ‹‰å‡½æ•°ç‰¹ç‚¹ï¼Œæœ€ç®€å•å¾—åˆ°nçš„æ–¹å¼æ˜¯ç”±ä¸¤ä¸ªè´¨æ•°ç›¸ä¹˜: è´¨æ•°ï¼šp1ã€p2Î¦(n) = (p1 - 1) * (p2 - 1) æœ€ç»ˆç”±Ï†(n)å¾—åˆ° e å’Œ d æ€»å…±ç”Ÿæˆ6ä¸ªæ•°å­—ï¼šp1ã€p2ã€nã€Ï†(n)ã€eã€d å…³äºŽRSAçš„å®‰å…¨ï¼šé™¤äº†å…¬é’¥ç”¨åˆ°äº†nå’Œe å…¶ä½™çš„4ä¸ªæ•°å­—æ˜¯ä¸å…¬å¼€çš„ã€‚ç›®å‰ç ´è§£RSAå¾—åˆ°ç§é’¥dçš„æ€è·¯å¦‚ä¸‹ï¼š ç”±äºŽe*d = Ï†(n)*k + 1ã€‚eæ˜¯å…¬å¼€çš„ï¼Œé‚£å¿…é¡»è¦çŸ¥é“Ï†(n) è¦å¾—åˆ°Ï†(n)ï¼Œå¿…é¡»çŸ¥é“p1 å’Œ p2 ç”±äºŽ n = p1 * p2ï¼Œæ‰€ä»¥åªæœ‰å°†nå› æ•°åˆ†è§£æ‰èƒ½ç®—å‡ºp1 p2 é‡å­è®¡ç®—æœºå¦‚æžœæˆåŠŸè¯žç”Ÿï¼ŒçŽ°åœ¨é€šè¡ŒäºŽé“¶è¡ŒåŠç½‘ç»œç­‰å¤„çš„RSAåŠ å¯†ç®—æ³•å¯ä»¥ç ´è§£ï¼Œä¹Ÿä¼šç“¦è§£æ‰€æœ‰åŸºäºŽå¤§è´¨æ•°å› å¼åˆ†è§£ç®—åŠ›é€†å¤©è€Œè¡ç”Ÿå‡ºçš„åŠ å¯†ç®—æ³•ã€‚ åŽç»­ä¼šå¯¹iOSè¯ä¹¦ç­¾åç›¸å…³åŽŸç†è¿›è¡Œåˆ†æžï¼ŒåŒæ—¶æŠŠå¸¸è§çš„åŠ å¯†ç®—æ³•åšä¸€ä¸‹æ¢³ç†å’Œæ¯”è¾ƒï¼Œå¹¶é™„ä¸Šæ¯ç§ç®—æ³•åœ¨iOSä¸­çš„ä»£ç å®žçŽ°ã€‚æ¬¢è¿Žä¸€èµ·äº¤æµå­¦ä¹ å¿ƒå¾—~]]></content>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•æˆä¸ºæœ‰æ•ˆå­¦ä¹ çš„é«˜æ‰‹]]></title>
    <url>%2F2019%2F01%2F05%2F%E5%A6%82%E4%BD%95%E6%88%90%E4%B8%BA%E6%9C%89%E6%95%88%E5%AD%A6%E4%B9%A0%E7%9A%84%E9%AB%98%E6%89%8B%2F</url>
    <content type="text"><![CDATA[ä¸é—²è¨€èµ˜è¯­ï¼Œç›´æˆ³ç—›ç‚¹ï¼Œæ”¾ä¸‹å€Ÿå£ï¼Œå…±åŒé¢å¯¹å†…å¿ƒçš„å¿å¿‘å§ã€‚ æ³¨ï¼šæœ¬æ–‡ä¸ºå¾—åˆ°ä¸“æ ä»˜è´¹è¯¾ç¨‹å­¦ä¹ å¿ƒå¾—ï¼Œåˆ†äº«ç»™å¤§å®¶ä¸€èµ·åŠ å¿«æˆé•¿é€Ÿåº¦ã€‚ &emsp;é«˜æ•ˆå­¦ä¹ ï¼Œå®ƒæ²¡æœ‰ä¸€ç§å‡†ç¡®çš„å®šä¹‰ï¼Œå®ƒæ›´æ˜¯å¯¹ä¸€ç§å­¦ä¹ çŠ¶æ€çš„æè¿°ï¼Œä¸€ä¸‡å°æ—¶ç†è®ºæˆ‘ä»¬éƒ½å¬è¿‡ï¼Œä½†è¿™ä¸ªç†è®ºå¯èƒ½ä¸é€‚åˆæˆ‘ä»¬99.9%çš„äººï¼Œæˆ‘æƒ³è¿™ä¸ªç†è®ºå‡ºçŽ°çš„ç›®çš„å…¶å®žæ˜¯ä¸ºäº†æŽ¨ç¿»äººä»¬å¯¹äºŽå¤©æ‰çš„è¿·ä¿¡ï¼Œä½†æ˜¯ï¼Œä¸€ä¸‡å°æ—¶ç†è®ºæ‰€å±•çŽ°çš„é‚£ç§å­¦ä¹ æˆ–è€…è¯´ç»ƒä¹ çš„åœºæ™¯è·Ÿä½ å’Œæˆ‘çš„ç”Ÿæ´»ã€å·¥ä½œç¦»å¾—éƒ½å¾ˆè¿œï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦éƒ½æˆä¸ºä¸–ç•Œçº§çš„é«˜æ‰‹ã€‚è¿™ä¸ªç†è®ºæœ¬èº«æ²¡æœ‰é”™ï¼Œå®ƒåœ¨æ‰“ç ´äººä»¬å¯¹äºŽå¤©æ‰çš„è¿·ä¿¡çš„åŒæ—¶ï¼Œä¹Ÿæ‰“å‡»äº†ç»å¤§éƒ¨åˆ†æˆå¹´äººçš„ä¿¡å¿ƒï¼šè°æœ‰åŠŸå¤«æ¯å¤©8å°æ—¶ç»ƒä¹ ï¼Œç»ƒ10å¹´å‘¢ï¼Ÿä½†æˆ‘ä»¬å¸¸å¸¸éœ€è¦åœ¨å¾ˆçŸ­çš„æ—¶é—´é‡Œè¦æŽŒæ¡ä¸€äº›æŠ€èƒ½ï¼Œè€Œä¸”è¦è¾¾åˆ°ä¸“ä¸šçº§åˆ«çš„æ°´å‡†ï¼Œè¿™è¦æ±‚æˆ‘ä»¬å¿…é¡»åœ¨æœ‰é™çš„ä¸šä½™ç¢Žç‰‡æ—¶é—´ä¸­ï¼Œé«˜æ•ˆçš„æœ‰ç›®çš„çš„å­¦ä¹ ï¼Œè¯ä¸å¤šè¯´ï¼Œè¿›å…¥æ­£é¢˜ã€‚ è®©æˆ‘ä»¬ä»Žä¸ƒä¸ªå…³é”®è¯ç€æ‰‹ï¼š é€‚åˆè‡ªå·± å­¦ä¹ æ‰‹æ³• çŸ­æ—¶é—´ æ³¨æ„åŠ› è§£å†³éš¾é¢˜ è®¾å®šç›®æ ‡ åå¸ˆ æŽ¥ä¸‹æ¥æˆ‘ä¼šå¯¹è¿™ä¸ƒä¸ªå…³é”®è¯ä¸»ä¹‰å±•å¼€æ¥æŽ¢è®¨ï¼Œå­¦ä¹ å¦‚ä½•å°†ä»–ä»¬æœ‰æœºçš„ç»“åˆèµ·æ¥ï¼Œå½¢æˆä¸€å¥—å¯è‡ªæŽ§ï¼Œå¯å¾ªçŽ¯ï¼Œç”šè‡³æ˜¯å¯ä»¥å‡çº§çš„å­¦ä¹ å¥—è·¯ã€‚æ­¤ç¯‡å…ˆæ¶ˆåŒ–å‰ä¸¤ä¸ªå…³é”®è¯ã€‚ 1.æ‰¾åˆ°é€‚åˆä½ çš„å­¦ä¹ æ–¹æ³•&emsp; å…ˆé‡ç‚¹è¦ç»™å¤§å®¶ä»‹ç»çš„ä¸¤ç§å­¦ä¹ æ€ç»´ï¼Œè‡ªç„¶ä¸»ä¹‰å’Œç»“æž„ä¸»ä¹‰ã€‚è‡ªç„¶ä¸»ä¹‰æ˜¯æ¨¡ä»¿å¼çš„å­¦ä¹ ï¼Œè‡ªç„¶ä¸»ä¹‰æ³¨é‡æ–‡æœ¬çš„æœ¬èº«ï¼Œä»€ä¹ˆæ˜¯æ–‡æœ¬ï¼Ÿå°±æ˜¯ä¸€é—¨çŸ¥è¯†æˆ–è€…æŠ€èƒ½å®ƒè¡¨é¢ä¸Šçœ‹èµ·æ¥çš„æ ·å­ï¼Œé‡åˆ°ä»€ä¹ˆå°±å­¦ä»€ä¹ˆï¼Œç§¯å°‘æˆå¤šï¼Œä»¥é‡å–èƒœã€‚å­¦å®Œäº†å°±é‚£æ ·äº†ï¼Œå®ƒå°±æ˜¯ä½ è‡ªå·±çš„äº†ï¼Œä½ å°±å¯ä»¥åŽ»è¿ç”¨äº†ã€‚ç»“æž„ä¸»ä¹‰å®ƒä¾§é‡å¯¹ç»“æž„å’Œäº¤äº’å…³ç³»çš„ä¸€ä¸ªè®¤è¯†ï¼Œå®ƒæå€¡é€è¿‡è¡¨é¢çš„çŽ°è±¡åŽ»å¯»æ±‚åº•å±‚çš„å…³ç³»ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ è¦å­¦ä¹ çš„æ˜¯ä¸€å¥—èƒ½ä¸¾ä¸€åä¸‰çš„ç³»ç»Ÿï¼Œè¿™ç§è¯‰æ±‚ä¸ºçš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä½“ç³»åŒ–çš„åŽ»å­¦ä¹ ï¼Œå­¦ä¼šä¹‹åŽçš„ç›®çš„ï¼Œä¸€å®šæ˜¯ä¸ºäº†åˆ›é€ ï¼Œæ˜¯ä¸€ç§è´¨å˜ï¼Œå®ƒè¦çš„æ˜¯ä¸€ç§è´¨å˜ã€‚é€‰å¯¹å­¦ä¹ æ–¹å¼è¿™æ˜¯ç¬¬ä¸€æ­¥ã€‚ï¼ˆå­¦ä¹ æ¯”å¦‚åƒè¯­è¨€ã€ä¹å™¨ã€ä¹¦æ³•è¿™äº›ä¸œè¥¿ï¼Œä½ å¯èƒ½è¦ç”¨è‡ªç„¶ä¸»ä¹‰çš„å­¦ä¹ æ–¹æ³•åŽ»å­¦ä¹ æ‰æ›´æœ‰æ•ˆæžœã€‚å¦‚æžœä½ å­¦æ¯”å¦‚åƒåŒ»è¯ã€è‰ºæœ¯ï¼Œæˆ–è€…ç»æµŽå­¦ï¼Œé‚£å°±åº”è¯¥ç”¨ç»“æž„ä¸»ä¹‰çš„æ–¹å¼æ¥å­¦äº†ã€‚ï¼‰ &emsp; å†è°ˆè°ˆå­¦ä¹ é€Ÿåº¦å’Œæ•ˆçŽ‡çš„æå‡ï¼Œç†è®ºä¸Šå¯ä»¥åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šç¬¬ä¸€æ˜¯é¿å…æ— æ•ˆå­¦ä¹ ï¼Œä¹Ÿå°±æ˜¯é€‰å¯¹å­¦ä¹ æ–¹å¼ã€‚ç„¶åŽå°±æ˜¯å°½å¯èƒ½é€šè¿‡æ›´å¥½çš„å­¦ä¹ ç­–ç•¥æ¥æŠŠè¿™ä¸ªæœ‰æ•ˆå˜ä¸ºé«˜æ•ˆã€‚æœ€ç®€å•æœ‰æ•ˆçš„æŠ€å·§å°±æ˜¯ ï¼š &emsp; æŠŠä½ çš„ç›®æ ‡è¦æ‹†ç¢Žï¼Œé’ˆå¯¹é‚£äº›ç»†èŠ‚è¿›è¡Œåå¤çš„ç»ƒä¹ ã€‚ä¸è¦ä¸€å¼€å§‹å°±ç…§é¡¾å…¨å±€ã€‚ å¦‚æžœè¿˜èƒ½ä»¥ç¢Žç‰‡åŒ–çš„æ–¹å¼æŒ¤å‡ºæ›´å¤šçš„æ—¶é—´æ¥å­¦ä¹ çš„è¯ï¼Œé‚£æ•ˆæžœä¼šæ›´å¥½ã€‚ ç¢Žç‰‡åŒ–å­¦ä¹ çš„çœŸç›¸&emsp; ç¢Žç‰‡åŒ–å­¦ä¹ çš„çœŸç›¸æ˜¯ç¢Žç‰‡åŒ–å­¦ä¹ ä¸€å®šè¦åŸºäºŽæœç´¢ï¼Œæœç´¢æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿæ„æ€å°±æ˜¯ä½ è¦å¸¦ç€å›°æƒ‘å’Œé—®é¢˜åŽ»æ‰§è¡Œç¢Žç‰‡åŒ–çš„å­¦ä¹ ï¼Œæœ€ç»ˆçš„æ•ˆæžœä¸€å®šæ˜¯è¦æŠŠè¿™äº›ç¢Žç‰‡ç»™é“¾æŽ¥èµ·æ¥ã€‚åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œä½ çš„å¤´è„‘å½“ä¸­åº”è¯¥å§‹ç»ˆæœ‰ä¸€ä¸ªè¯¾é¢˜ï¼Œè¿™äº›ç¢Žç‰‡å®ƒä¸æ˜¯æ»¡åœ°çš„è½å¶ï¼Œè€Œæ˜¯æˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ¯”å–»æˆä¸€ä¸ªæ‰“ç¢Žçš„ç“·å™¨æ‰€äº§ç”Ÿçš„ç¢Žç‰‡ã€‚ä½ è¦æœ‰ç›®çš„çš„åŽ»æ‹¾èŽ·è¿™äº›ç¢Žç‰‡ï¼Œè€Œä¸æ˜¯ä¹±æ¡ã€‚å°±ç®—ç¢Žç‰‡åŒ–çŸ¥è¯†æ˜¯æ ‘å¶ï¼Œä½ ä¹Ÿå¾—å…ˆæœ‰æ ‘æ ¹ã€æ ‘å¹²å’Œæ ‘æžã€‚ç¢Žç‰‡åŒ–å­¦ä¹ è¦çš„æ˜¯æžç¹å¶èŒ‚ï¼Œè€Œä¸æ˜¯æ¡å‡ ç‰‡æ ‘å¶å›žæ¥å¤¹åœ¨ä¹¦é‡Œè¾¹ã€‚é‚£å°±å±žäºŽä¸€ç§æƒ…ç»ªåŒ–çš„è¡Œä¸ºã€‚ &emsp; è¯è¯´å›žæ¥ï¼Œç¢Žç‰‡åŒ–å­¦ä¹ å®ƒç»ˆç©¶æ˜¯æœ‰å±€é™æ€§çš„ï¼Œå› ä¸ºå®ƒç¼ºä¹æ€è€ƒï¼Œç¼ºä¹è¾©è®ºï¼Œç¼ºä¹ä¸Žäººäº¤æµçš„è¿™äº›çŽ¯èŠ‚ã€‚æ‰€è°“å­¦è€Œä¸æ€åˆ™ç½”å˜›ã€‚ç¢Žç‰‡åˆ’æ‹‰çš„è¶Šå¤šï¼Œå¯èƒ½è¶Šç³Šæ¶‚äº†ã€‚ä½†æ˜¯ï¼Œæ— è®ºå¦‚ä½•ï¼Œç¢Žç‰‡åŒ–å­¦ä¹ ä½œä¸ºä¸€ç§æˆå¹´äººå­¦ä¹ çš„è¡¥å……æ‰‹æ®µï¼Œæ— ç–‘å®ƒæ˜¯æœ‰å¾ˆå¤§åŠ›é‡çš„ã€‚ &emsp; æˆ‘å¿…é¡»è¿˜è¦æé†’ä½ ä¸€ä»¶äº‹æƒ…ï¼ï¼ï¼æœ‰ä¸€ç§å‡çš„ç¢Žç‰‡åŒ–å­¦ä¹ å«åšæ”¶è—ã€‚ä½ ä¸€å®šå¯¹è¿™ä¸ªä¸œè¥¿éžå¸¸ç†Ÿæ‚‰ï¼Œæ”¶è—è¿™ä¸ªæŒ‰é’®æ˜¯éžå¸¸å¸¸è§çš„ï¼Œåœ¨å¾ˆå¤šappå’Œè½¯ä»¶å½“ä¸­ï¼Œæ‰€è°“ä¸€ç§äººæ€§åŒ–çš„è®¾ç½®ã€‚å®ƒçš„å­˜åœ¨èƒ½å¤Ÿéžå¸¸å¤§ç¨‹åº¦ç¼“è§£äººä»¬çš„ç„¦è™‘ã€‚ä½†è¿™ç§ç¼“è§£å®ƒå…¶å®žä¸æ˜¯çœŸæ­£çš„ç¼“è§£ï¼Œå®ƒåªæ˜¯ç»™ä½ é€ æˆä¸€ç§å¹»è§‰ï¼Œå°±æ˜¯æ”¶è—äº†è¿™äº›çŸ¥è¯†å°±æ˜¯ä½ çš„äº†ã€‚ä½†å…¶å®žï¼Œå¦‚æžœä½ æ”¶è—å®Œäº†ä¸çœ‹çš„è¯ï¼Œä½ ä¸åŽ»ç¢°å®ƒï¼Œå®ƒå¹¶ä¸æ˜¯ä½ çš„ã€‚ä½ å¿…é¡»è¦ç ´é™¤æŽ‰è¿™ç§å¹»è§‰ã€‚ 2.ä¸è°ˆå…´è¶£ï¼Œç”¨ä»»åŠ¡é©±åŠ¨å­¦ä¹ &emsp; å­¦ä¹ ï¼Œå¾ˆå¤šäººæå€¡åŸ¹å…»å…´è¶£ï¼Œè®©è‡ªå·±çˆ±ä¸Šå­¦ä¹ ï¼Œé€šå¸¸è¿™äº›äººæœ€åŽéƒ½æ”¾å¼ƒäº†ã€‚ä»¥è‡³äºŽæ…¢æ…¢çš„ä¹ æƒ¯äº†æ²¡å…´è¶£æ‰€ä»¥å­¦ä¸ä¼šã€å­¦ä¸å¥½çš„è‡ªæˆ‘è®¤çŸ¥ã€‚å­¦ä¸ä¼šï¼šè¿žé—¨éƒ½æ²¡å…¥ï¼Œè¿™å¯èƒ½ç¡®å®žè·Ÿå¤©èµ‹æœ‰å…³ï¼Œä½ è®©èº«é«˜ä¸€ç±³äº”çš„åŽ»æ‰“NBAè¿™ç§æƒ…å†µæˆ‘ä»¬å°±ä¸è®¨è®ºäº†ï¼›å­¦ä¸å¥½ï¼šæ²¡è¾¾åˆ°æŸç§ä¸“ä¸šçš„ç¨‹åº¦ã€‚å…´è¶£æ— ç–‘æ˜¯æœ€å¥½çš„è€å¸ˆï¼Œè¿™å¥è¯æ²¡æ¯›ç—…ï¼Œä½†æ˜¯å¦‚æžœæ˜Žæ˜Žæ²¡å…´è¶£çš„ä¸œè¥¿ï¼Œéžè¦è®©ä½ å–œæ¬¢ä¸Šå®ƒï¼Œè¿™æ˜¾ç„¶æ˜¯æžå°æ¦‚çŽ‡äº‹ä»¶ï¼Œç”Ÿæ´»æ²¡æ—¶é—´ç»™ä½ åŽ»çŽ©å°æ¦‚çŽ‡ã€‚ &emsp; ä¸€ä¸ªå¾ˆæµ…æ˜¾çš„é“ç†ï¼Œäººåšä»»ä½•äº‹éƒ½æ˜¯è¦å›žæŠ¥çš„ï¼Œæ‰€ä»¥ä¸€ä¸ªäººèƒ½å¸¦ç€å¤šå¤§çš„ç—›è‹¦åŽ»åšä¸€ä»¶äº‹ï¼Œé‚£æ˜¯å› ä¸ºåšæˆäº†è¿™äº‹å„¿ä¼šæ”¶èŽ·æ›´å¤§çš„åˆ©ç›Šã€‚äººåšäº‹çš„é©±åŠ¨æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œä¸€ä¸ªæ˜¯å†…éƒ¨é©±åŠ¨ï¼Œå…´è¶£å°±æ˜¯æœ€å¤§çš„å†…éƒ¨é©±åŠ¨ï¼›ä¸€ä¸ªæ˜¯å¤–éƒ¨é©±åŠ¨ï¼Œä¹Ÿå°±æ˜¯å®Œæˆç›®æ ‡ä¹‹åŽæ”¶èŽ·çš„åˆ©ç›Šï¼Œæ—¢ç„¶ä½ å¯¹è¯¥åšçš„äº‹æ²¡å…´è¶£ï¼Œé‚£å°±å¹²è„†åˆ«æµªè´¹å¿ƒæ€åŸ¹å…»å…´è¶£äº†ï¼Œæˆ‘è¦è¯´çš„æ˜¯ï¼Œæˆå¹´äººå­¦ä¹ ä¸éœ€è¦åŸ¹å…»å…´è¶£ï¼Œåº”è¯¥ç”¨ä»»åŠ¡æ¥é©±åŠ¨ã€‚ä½ å¯èƒ½ä»ç„¶ä¼šè¯´ï¼Œæˆ‘æ²¡æœ‰ä»»åŠ¡å•Šï¼Œæˆ‘æ‰¾ä¸åˆ°ä»»åŠ¡å•Šã€‚ä»»åŠ¡åˆ°å¤„éƒ½æ˜¯ï¼Œç”Ÿæ´»ä¸­çš„ä»»åŠ¡é©±åŠ¨ï¼ŒèŒåœºä¸­çš„èŒä¸šå¼ºè¿«ï¼Œä»¥æ•™ä¸ºå­¦è¿™äº›éƒ½æ˜¯ä»»åŠ¡ï¼Œæ‰¾ä¸åˆ°ä»»åŠ¡çš„å”¯ä¸€å¯èƒ½æ˜¯ä½ å¯¹æœªæ¥çš„è‡ªå·±ç¼ºå°‘é¢„æœŸã€‚ &emsp; ç”Ÿæ´»ä¸­çš„é©±åŠ¨ï¼Œæ¯”å¦‚åŽ¨è‰ºã€æ‘„å½±ã€è‹±è¯­ï¼ŒçŽ°åœ¨çš„é£Ÿå“å®‰å…¨çŽ°çŠ¶ä½ è¿˜æ‰“ç®—åƒå¤šä¹…çš„å¤–å–ï¼Ÿæƒ³è®°å½•å±žäºŽè‡ªå·±çš„ç¾Žå¥½è®°å¿†æ€»è§‰å¾—æ‹çš„ç…§ç‰‡ç»ä¸èµ·å›žå‘³ï¼Ÿå‡ºå›½æ¸¸ã€é¢å¯¹å„ç§è‹±æ–‡æ–‡æ¡£æ²¡æœ‰ç¿»è¯‘å·¥å…·å¯¸æ­¥éš¾è¡Œï¼ŸèŒåœºä¸­çš„é©±åŠ¨ï¼Œæ¯”å¦‚é¢†åŸŸä¸“ä¸šåº¦ã€è¯­è¨€è¡¨è¾¾åŠ›ã€æƒ…ç»ªä¸Žè´¢å¯Œç®¡ç†ï¼Œéƒ¨é—¨æ¯å¹´åŠ è–ªåé¢å°±é‚£ä¹ˆç‚¹å‡­ä»€ä¹ˆè®©è€æ¿ä¼˜å…ˆè€ƒè™‘ä½ å‘¢ï¼Ÿç»å¸¸è¯ä¸è¾¾æ„å¼•èµ·è¯¯ä¼šç”šè‡³é”™å¤±è‰¯æœºï¼Ÿä»»æ€§ä¹°ä¹°ä¹°å¿«ä¸‰åäº†è¿˜æ²¡æˆ¿æ²¡è½¦ï¼Ÿä»¥æ•™ä¸ºå­¦ï¼Œæ— è®ºä½ å­¦äº†ä»€ä¹ˆï¼Œä¸€æ—¦ä½ å¯ä»¥æ•™åˆ«äººäº†ï¼Œä½ å°±ä¸å†æ˜¯æ— ä¸šäº†ã€‚è€Œä¸”ä½ è¿˜ä¸æ˜¯ç»™äººæ‰“å·¥ï¼Œä½ æ˜¯è‡ªç”±èŒä¸šè€…ã€‚ä»¥æ•™ä¸ºå­¦ä¸€æ–¹é¢å¯ä»¥æ˜¯è‡ªå·±å¯¹è‡ªå·±è®¾ç½®çš„ä¸€ä¸ªä»»åŠ¡å’Œç›®æ ‡ï¼Œä¸æ–­åœ°ç£ä¿ƒè‡ªå·±ï¼Œå¦ä¸€æ–¹é¢å…¶å®žä¼šè®©ä½ å­¦çš„æ›´å¥½æ›´é€å½»ã€‚ &emsp; è¡¥å……ä¸€ç‚¹ï¼šä½ åœ¨å¿ƒæ€ä¸Šè¦æœ‰ä¸€ç§è‡ªè§‰ï¼Œè‡ªå·±æ¥è˜è¯·è‡ªå·±ï¼Œè®©è‡ªæˆ‘é¢„æœŸçš„å°ç›®æ ‡ä¸æ–­æŒ‡å¼•ç€æŒç»­å­¦ä¹ ï¼Œæ— è®ºä½ åœ¨ç”Ÿæ´»è¿˜æ˜¯å·¥ä½œå½“ä¸­åšä»»ä½•äº‹æƒ…éƒ½è¦è¿™æ ·åšï¼Œä¸è¦å¿ƒè¡€æ¥æ½®ä¸€è‚¡çŒ›åŠ²å„¿ä¸‰åˆ†é’Ÿå°±ç–²äº†ã€‚ æ„¿ä½ æœ‰æ‰€æ”¶èŽ· ( ã‚œ- ã‚œ)ã¤ãƒ­ä¹¾æ¯ðŸ»]]></content>
  </entry>
</search>
